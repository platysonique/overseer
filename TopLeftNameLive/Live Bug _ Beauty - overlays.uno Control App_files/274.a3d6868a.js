(self.webpackChunkSingular=self.webpackChunkSingular||[]).push([[274],{9769:(t,e,o)=>{function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var n,i,r,a,s=[],c=!0,u=!1;try{if(r=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=r.call(o)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var a=o(45659),s=o(33287),c=o(82465),u=o(83384),l=o(83386),f=o(95093),p=o(87021),d=["sharedWithMe","trash","recent","favorites","root","inbox","myrecent","myshows"],m=void 0,v=void 0,g=void 0,h=void 0,y=void 0;t.exports={specialFolders:d.filter(function(t){return"root"!=t}),defaultGradient:{type:"solid",solidColor:{r:204,g:204,b:204,a:1},stops:[{offset:0,color:"#ff0000",opacity:1},{offset:.5,color:"#00ff00",opacity:1},{offset:1,color:"#0000ff",opacity:1}],offset:0,angle:0,scale:100,spreadMethod:"pad",keepAspect:!1,centerX:50,centerY:50,radius:50,focalAngle:0,focalDistance:0},userSelectAll:function(t){if(document.selection)(e=document.body.createTextRange()).moveToElementText(t.currentTarget),e.select();else if(window.getSelection){var e;(e=document.createRange()).selectNode(t.currentTarget),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}t.preventDefault(),t.stopPropagation()},extendControlNode:function(t,e){for(var o in $.extend(!0,t,e),e)"object"===r(e[o])&&null!==e[o]&&(t[o]=e[o])},compareObject:function(t,e,o){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;for(var n in t)if((!o||-1==o.indexOf(n))&&t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]!==e[n]){if("object"!==r(t[n]))return!1;if(!this.compareObject(t[n],e[n],o))return!1}}for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0},compareObject2:function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if("object"!==r(t)||"object"!==r(e))return!1;if(t.constructor!==e.constructor)return!1;for(var o in t)if(t.hasOwnProperty(o)){if(!e.hasOwnProperty(o))return!1;if(t[o]!==e[o]){if("object"!==r(t[o]))return!1;if(!this.compareObject2(t[o],e[o]))return!1}}for(o in e)if(e.hasOwnProperty(o)&&!t.hasOwnProperty(o))return!1;return!0},createDefaultGroupForComposition:function(t,e){var o=t.child("groups").push(),n={id:o.key,name:"Group",priority:0,expand:1,layout:s.getDefaultLayout(0)};return o.set(n),t.child("groups").child(n.id+"/keyframes").set(a.getDefaultKeyframes()),t.child("groups").child(n.id+"/effects").set(a.getDefaultEffects()),t.child("settings").set(this.getDefaultSettings(),function(){e&&e()}),n},getSubcompositionNames:function(t){var e={};for(var o in t){var n=t[o];if(n&&n.groups)for(var i in n.groups){var r=n.groups[i].items;if(r)for(var a in r){var s=n.tiles[a];s&&"composition"==s.type&&(e[s.id]=s.name)}}}return e},getSubcompositionNamesEx:function(t,e,o){if(t){o[e]={};var n=t[e];if(n&&n.groups)for(var i in n.groups){var r=n.groups[i].items;if(r)for(var a in r){var s=n.tiles[a];s&&"composition"==s.type&&(o[e][s.id]=s.name,this.getSubcompositionNamesEx(t,s.id,o))}}}},getCompositionAnimationDuration:function(t,e){var o=0,n=0,i=e[t];for(var r in i.groups){var a=i.groups[r];"none"!=a.effects.In.effect&&(o=Math.max(o,a.keyframes.In[1])),"none"!=a.effects.Out.effect&&(n=Math.max(n,a.keyframes.Out[1]))}for(var s in i.tiles){var c=i.tiles[s];if("none"!=c.effects.In.effect&&(o=Math.max(o,c.keyframes.In[1])),"none"!=c.effects.Out.effect&&(n=Math.max(n,c.keyframes.Out[1])),"composition"==c.type&&e[c.id]&&e[c.id].settings&&e[c.id].settings.linkTimeline){var u=this.getCompositionAnimationDuration(c.id,e);o=Math.max(o,u.In),n=Math.max(n,u.Out)}}return{In:o,Out:n}},getCompositionInfo:function(t,e){var o={},n={},i={},r={},a={},s={};for(var c in t.compositions){var u=this.getCompositionName(t.compositions,c);u&&(o[u]=c,n[c]=u),i[c]=this.getCompositionAnimationDuration(c,t.compositions),a[c]=this.extend(!0,t.compositions[c].dataSources);var l={In:"none",Out:"none"};for(var f in r[c]={},t.compositions[c].tiles)"none"!=t.compositions[c].tiles[f].effects.In.effect?r[c].In=t.compositions[c].tiles[f].effects.In:l=t.compositions[c].tiles[f].effects,"none"!=t.compositions[c].tiles[f].effects.Out.effect?r[c].Out=t.compositions[c].tiles[f].effects.Out:l=t.compositions[c].tiles[f].effects;for(var p in t.compositions[c].groups)"none"!=t.compositions[c].groups[p].effects.In.effect?r[c].In=t.compositions[c].groups[p].effects.In:l=t.compositions[c].groups[p].effects,"none"!=t.compositions[c].groups[p].effects.Out.effect?r[c].Out=t.compositions[c].groups[p].effects.Out:l=t.compositions[c].groups[p].effects;r[c].In||(r[c].In=l.In),r[c].Out||(r[c].Out=l.Out)}return this.getSubcompositionNamesEx(t.compositions,e,s),{compositionId:e,nameToId:o,idToName:n,compositionDuration:i,effect:r,dataSources:a,subcompositionNames:s,compositionProps:this.extend(!0,t.compositionProps),compositionStates:this.extend(!0,t.compositionStates),adaptationGlobals:this.extend(!0,t.adaptationGlobals)}},getSubcompositions:function(t,e,o,n){var i=[];if(e&&o&&o[t])for(var r in o[t]){var a,s=e.compositionStates[r],c=!1;if(n?("in"==n.toLowerCase()&&"In"==s||"out"==n.toLowerCase()&&("Out1"==s||"Out2"==s))&&(c=!0):c=!0,"In"==s?a=s:"Out1"!=s&&"Out2"!=s||(a="Out"),c){var u=null;e.compositionProps&&e.compositionProps&&e.compositionProps.logicLayers&&e.compositionProps.logicLayers[r]&&(u=e.compositionProps.logicLayers[r]),i.push({id:r,name:o[t][r],state:a,logicLayer:u})}}return i},getSubcompositionsTreeV2:function(t,e,o,n){var i=function(t,e,o,n){var r={};if(t.compositions&&(r=t.compositions[e]||{}),n=n||[],r.tiles||t.subcompositionNames){var a="",s={};if(r.tiles?(a="t",s=r.tiles):t.subcompositionNames&&(a="sn",s=Object.keys(t.subcompositionNames[e])),""!=a){var c,u,l=function(){var r=s[f],l=!1;if("t"==a?l="composition"==r.type.toLowerCase():"sn"==a&&(l=!0),l){var p,d;"t"==a?(p=r.id,d=r.name):"sn"==a&&(p=r,d=t.subcompositionNames[e][p]);var m=[],v={};if(t.compositions&&(v=t.compositions[p]||{}),v.dataSources&&v.dataSources.composition&&v.dataSources.composition.controlNode&&v.dataSources.composition.controlNode.model)for(var g in v.dataSources.composition.controlNode.model.fields)m.push(v.dataSources.composition.controlNode.model.fields[g]);var h=t.compositionStates[p];null!=h&&null!=h&&"out1"!=h.toLowerCase()&&"out2"!=h.toLowerCase()||(h="Out");var y=o||"";if(""==y||y.toLowerCase()==h.toLowerCase()){c=null,u=null,t.compositionProps&&t.compositionProps&&t.compositionProps.logicLayers&&t.compositionProps.logicLayers[p]&&(c=t.compositionProps.logicLayers[p]),t.compositionProps&&t.compositionProps&&t.compositionProps.snapshot&&t.compositionProps.snapshot[p]&&(u=t.compositionProps.snapshot[p]);var b={id:p,name:d,state:h,model:m,logicLayer:c,snapshot:u,subcompositions:[]};"t"==a?t.compositions[p].tiles&&Object.keys(t.compositions[p].tiles).filter(function(e,o){return"composition"==t.compositions[p].tiles[e].type.toLowerCase()}).length>0&&i(t,b.id,o,b.subcompositions):(a="sn")&&t.subcompositionNames[p]&&Object.keys(t.subcompositionNames[p]).length>0&&i(t,b.id,o,b.subcompositions),n.push(b)}}};for(var f in s)l()}}};i(t,e,o,n)},getSubcompositionsTree:function(t,e,o,n){var i=function(t,e,o,n){var r={};if(t.compositions&&(r=t.compositions[e]||{}),n=n||[],r.tiles||t.subcompositionNames){var a="",s={};if(r.tiles?(a="t",s=r.tiles):t.subcompositionNames&&(a="sn",s=Object.keys(t.subcompositionNames[e])),""!=a){var c,u,l=function(){var r=s[f],l=!1;if("t"==a?l="composition"==r.type.toLowerCase():"sn"==a&&(l=!0),l){var p,d;"t"==a?(p=r.id,d=r.name):"sn"==a&&(p=r,d=t.subcompositionNames[e][p]);var m=null,v={};t.compositions&&(v=t.compositions[p]||{}),v.dataSources&&v.dataSources.composition&&v.dataSources.composition.controlNode&&(m=v.dataSources.composition.controlNode);var g=t.compositionStates[p];null!=g&&null!=g&&"out1"!=g.toLowerCase()&&"out2"!=g.toLowerCase()||(g="Out");var h=o||"";if(""==h||h.toLowerCase()==g.toLowerCase()){c=null,u=null,t.compositionProps&&t.compositionProps&&t.compositionProps.logicLayers&&t.compositionProps.logicLayers[p]&&(c=t.compositionProps.logicLayers[p]),t.compositionProps&&t.compositionProps&&t.compositionProps.snapshot&&t.compositionProps.snapshot[p]&&(u=t.compositionProps.snapshot[p]);var y={id:p,name:d,state:g,controlnode:m,logicLayer:c,snapshot:u,subcompositions:[]};"t"==a?t.compositions[p].tiles&&Object.keys(t.compositions[p].tiles).filter(function(e,o){return"composition"==t.compositions[p].tiles[e].type.toLowerCase()}).length>0&&i(t,y.id,o,y.subcompositions):(a="sn")&&t.subcompositionNames[p]&&Object.keys(t.subcompositionNames[p]).length>0&&i(t,y.id,o,y.subcompositions),n.push(y)}}};for(var f in s)l()}}};i(t,e,o,n)},getDefaultSettings:function(){return{perspectiveActive:!1,perspective:500,perspectiveOriginX:50,perspectiveOriginY:50,linkTimeline:!1}},extend:function(){var t=this,e={},o=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],n++);for(var r=function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=t.extend(!0,e[i],n[i]):e[i]=n[i])};n<i;n++)r(arguments[n]);return e},update:function(t){for(var e=1;e<arguments.length;e++)for(var o in arguments[e]){var n=arguments[e][o];"object"==r(n)?(null!=t[o]&&null!=t[o]||(t[o]={}),this.update(t[o],n)):t[o]=n}return t},getAnimationState:function(t,e,o){var n,i;return"In"==t&&"In"==e?(n="In",i="In"):"Out1"!=t&&"Out2"!=t||"Out"!=e&&"Out1"!=e&&"Out2"!=e?"In"==e?(i="In","In"!=t&&(n="Out1")):"Out"==e?"In"==t&&(n="In",i=o?"Out2":"Out1"):"Out1"!=e&&"Out2"!=e||"In"==t&&(n="In",i=e):(n=t,i=t),{from:n,to:i}},getDefaultDashboardFolders:function(){var t=this,e=function(e,o,n){var i={};return i.fid=e,i.name=o,i.type="fo",i.parents=t.extend(!0,n),i},o={};return o.root=e("root","Root",{}),o.favorites=e("favorites","Favorites",{root:!0}),o.recent=e("recent","Recent",{root:!0}),o.myrecent=e("myrecent","My Recent",{root:!0}),o.sharedWithMe=e("sharedWithMe","Shared With Me",{root:!0}),o.trash=e("trash","Trash",{root:!0}),o.inbox=e("inbox","Inbox",{root:!0}),o},getGroupArray:function(t){var e=[];for(var o in t)e.push(t[o]);return e.sort(function(t,e){return(t.priority>e.priority)-.5}),e},getTileArray:function(t){var e=[];for(var o in t)e.push(t[o]);return e},getCompArray:function(t){var e=[];for(var o in t)e.push(t[o]);return e},getParentCompositionId:function(t,e){for(var o in t)for(var n in t[o].tiles){var i=t[o].tiles[n];if(("composition"==i.type||"widget"==i.type)&&i.id==e)return o}return null},getGroupFromTileId:function(t,e,o){if(o)return this.__getGroupFromTileIdWithCompId(t,e,o);for(var n in t)if(this.__getGroupFromTileIdWithCompId(t,e,n))return;return null},__getGroupFromTileIdWithCompId:function(t,e,o){for(var n in t[o].groups){var i=t[o].groups[n];for(var r in i.items)if(r==e)return i}return null},getCompositionName:function(t,e){for(var o in t)for(var n in t[o].tiles){var i=t[o].tiles[n];if("composition"==i.type&&i.id==e)return i.name}return null},isSpecialFolder:function(t){for(var e=0;e<d.length;e++)if(t==d[e])return!0;return!1},convertWidgetModelIntoSBaseData:function(t){var e={};if(t&&t.fields){var o=this;t.fields.forEach(function(t,n){if("groupPanel"!=t.type){var i=t.defaultValue;switch(null==i&&null==(i=t.resetValue)&&(i=""),t.type){case"checkbox":""==i&&(i=!1);break;case"color":if("#"==i[0]){var r=i.substr(1,2),a=i.substr(3,2),s=i.substr(5,2),c=i.substr(7,2);""==c&&(c="FF"),i={r:parseInt(r,16),g:parseInt(a,16),b:parseInt(s,16),a:parseInt(c,16)/255}}break;case"font":""==i&&(i={alignment:"left",fontData:{family:"Open Sans",weight:"400"}});break;case"gradient":""==i&&(i=o.defaultGradient);break;case"number":void 0!==t.unitName&&""!=t.unitName&&(e[t.unitName]=t.unit);break;case"composition":i="";break;case"timecontrol":i={UTC:0,isRunning:!1,value:0}}"button"!=t.type&&(e[t.id]=i)}})}return e},getApiEndpointFromBrowserShortType:function(t){return c.API_ENDPOINTS[t]},getShortTypeFromBrowserFullName:function(t){for(var e in c.BROWSERITEM_FULLNAME_MAP)if(c.BROWSERITEM_FULLNAME_MAP[e]==t)return e;return null},getNiceNameFromBrowserShortType:function(t){return c.BROWSERITEM_NICENAME_MAP[t]},getIconClassFromBrowserShortType:function(t){return c.BROWSERITEM_ICON_CLASS_MAP[t]?c.BROWSERITEM_ICON_CLASS_MAP[t]:c.BROWSERITEM_ICON_CLASS_MAP.c},getDefaultIconFromBrowserShortType:function(t){return c.BROWSERITEM_DEFAULT_ICON_MAP[t]?c.BROWSERITEM_DEFAULT_ICON_MAP[t]:c.BROWSERITEM_DEFAULT_ICON_MAP.c},compareDashboardItemType:function(t,e){return t==e||!(!c.BROWSERITEM_FULLNAME_MAP[e]||t!=c.BROWSERITEM_FULLNAME_MAP[e])},dropdownClearAllContextExceptCurrentElement:function(t){var e=t.attr("id");$(".dropdown-menu").each(function(t,o){var n=$(o).attr("id");e!=n&&$(o).removeClass("show")})},dropdownClearAllContext:function(){$(".dropdown-menu").each(function(t,e){$(e).removeClass("show")})},getMouseEventType:function(t){var e=u.MOUSE_UNKNOW_CLICK;switch(t.which){case 1:e=u.MOUSE_LEFT_CLICK;break;case 2:e=u.MOUSE_MIDDLE_CLICK;break;case 3:e=u.MOUSE_RIGHT_CLICK;break;default:e=u.MOUSE_UNKNOW_CLICK}return e},dropDownFixPosition:function(t,e){var o=$("[id$=BrowserModal]"),n=o.filter(function(t){return"block"==o[t].style.display}),i=n.length>0,r=function(t){return n[0].querySelector(".modal-content").getBoundingClientRect()},a=i?-r().left:0,s=i?-r().top:0,c=t.width(),u=t.height();e.pageX+c>window.innerWidth?t.css("left",e.pageX-c-5+"px"):t.css("left",e.pageX+a+5+"px"),e.pageY+u>window.innerHeight?t.css("top",e.pageY-u+"px"):t.css("top",e.pageY+s+"px")},humanFileSize:function(t){if(t||(t=0),Math.abs(t)<1024)return t+" B";var e=["kB","MB","GB","TB","PB","EB","ZB","YB"],o=[1024,1024,1e3,1e3,1e3,1e3,1e3,1e3,1e3],n=-1;do{t/=o[++n]}while(Math.abs(t)>=o[n+1]&&n<e.length-1);return t.toFixed(1)+" "+e[n]},numberWithCommas:function(t){return t||(t=0),"number"==typeof t||"string"==typeof t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},formatMinutes:function(t){if(t||(t=0),t<60)return t+"m";var e=Math.floor(t/60),o=t%60;return this.numberWithCommas(e)+"h "+o+"m"},shortNumber:function(t){return t||(t=0),t>1e6?(t/1e6).toFixed(1)+" m":t>1e3?(t/1e3).toFixed(1)+" k":t},genNodeRefKeyFromLocation:function(t){var e=t.join("#");return l(e)},dataURItoBlob:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var o=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return new Blob([n],{type:o})},blobToFile:function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},dataURItoFile:function(t,e){var o=this.dataURItoBlob(t);return this.blobToFile(o,e)},isChrome:function(){return/chrome/i.test(navigator.userAgent)},millisecondsToString:function(t,e){var o=" year",n=" day",i=" hour",r=" minute",a=" second";"short"!=e&&"flow"!=e||(o="y",n="d",i="h",r="m",a="s");var s="";function c(t){return 1==t||"short"==e||"flow"==e?"":"s"}t<0&&(s="-",t=-t);var u=Math.round(t/1e3),l=Math.floor(u/31536e3),f=Math.floor((u%=31536e3)/86400),p=Math.floor((u%=86400)/3600);"flow"==e&&(p+=24*f+365*l*24,l=0,f=0);var d=Math.floor((u%=3600)/60),m=u%60,v=l+o+c(l),g=f+n+c(f),h=p+i+c(p),y=d+r+c(d),b=m+a+c(m);return l?s+v+" "+g+" "+h:f?s+g+" "+h+" "+y:p?p>=1e3?s+h+" "+y:s+h+" "+y+" "+b:d?s+y+" "+b:m?s+b:b},millisecondsToSeconds:function(t){return t/1e3},secondsToMilliseconds:function(t){return 1e3*t},intervalsOverlap:function(t,e,o,n){return(null===n||t<n)&&(null===e||e>o)},millisecondsToHms:function(t){t=Math.round(Number(t)/1e3);var e=Math.floor(t%60),o=Math.floor(t/60%60),n=Math.floor(t/3600);return(n>0?n<10?"0"+n:n:"00")+":"+(o>0?o<10?"0"+o:o:"00")+":"+(e>0?e<10?"0"+e:e:"00")},getNodeDataType:function(t,e){for(var o in t)if(t[o].id==e)return t[o].type;return null},getNode:function(t,e){for(var o in t)if(t[o].id==e)return t[o];return null},convertNodeValue:function(t,e){if(!t)return e;if("normalizednumber"==t.type){var o=function(t){var e=parseFloat(t);return isNaN(e)?0:e},n=o(t.low),i=n+(o(t.high)-n)*(o(e)/100);return Math.round(1e3*i)/1e3}return e},copyStringToClipboard:function(t){var e=$("<input>");$("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove()},appendAccessTokenUrl:function(t){var e=t;return window.singularAccessToken&&(-1==e.indexOf("?")?e+="?access_token="+window.singularAccessToken:e+="&access_token="+window.singularAccessToken),e},isInteractivityEnabled:function(t,e){return!(!t||!t.events||!e&&!t.visible||!Object.keys(t.events).find(function(e){if(t.events[e].active)return!0}))},getInteractivityEvents:function(t){if(t&&t.events){var e=[];for(var o in t.events)t.events[o].active&&e.push(o);return e}return[]},compareTwoDomNodes:function(t,e){function o(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}var n=function(t,e){var n=o(t),i=o(e);if(n[0]==i[0])for(var r=0;r<n.length;r++)if(n[r]!=i[r])return[n[r],i[r]]}(t,e);if(n){var i=parseInt(getComputedStyle(n[0]).zIndex),r=parseInt(getComputedStyle(n[1]).zIndex);return i>r?-1:i<r?1:0}return 0},getParameterByName:function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},isIOS:function(){return void 0===m&&(m=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream),m},isAndroid:function(){return void 0===v&&(v=navigator.userAgent.toLowerCase().indexOf("android")>-1),v},isMobile:function(){return void 0===g&&(g=navigator.userAgent.toLowerCase().indexOf("mobile")>-1),g},isFlow:function(){return void 0===h&&(h=!(!window||!window.flowOnairIndeed)),h},isFlowLib:function(){return void 0===y&&(y=!(!window||!window.isFlowLib)),y},getMarketplaceNewReleaseDaysLeft:function(t){if(!t)return 0;var e=f(t).diff(Date.now(),"days")+1;return e>0?e:0},getPropertyFromSelection:function(t,e,o){var n=t.find(function(t){return t.id==e});return n&&void 0!==n[o]?n[o]:"Invalid"},getTitleFromSelection:function(t,e){return this.getPropertyFromSelection(t,e,"title")},addFitInToImageURL:function(t,e,o){if(!(t=String(t))||e<=0||o<=0)return"";var n="image.singular.live/";if(-1===t.indexOf(n)||-1!==t.indexOf(n+"fit-in")||-1!==t.indexOf(".gif"))return t;var i=t.indexOf(n)+20,r="fit-in/"+e+"x"+o+"/filters:no_upscale()/";return t.substring(0,i)+r+t.substring(i)},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},checkDataType:function(t,e){var o={},n={},i={},a={},s=[];if(t){var c=t.fields;for(var u in c)o[c[u].id]=c[u].type}for(var l in e)if(this.isNumber(l))s.push("Payload ["+l+"] cannot be a number.");else if("json"==o[l]&&"object"==r(e[l]))s.push("Payload ["+l+"] must be a JSON string.");else if("color"==o[l]){var f=p(e[l]);n[l]=f.toRgb()}else if("gradient"==o[l]){var d=p(e[l]);if(d.isValid()){var m=this.extend(!0,this.defaultGradient);m.solidColor=d.toRgb(),n[l]=m}else"object"==r(e[l])?n[l]=this.extend(!0,e[l]):n[l]=e[l]}else if("button"==o[l])a[l]=!0,e[l].__singularButton&&void 0!==e[l].ts||"execute"==e[l].command?n[l]=this.extend(!0,e[l]):e[l]&&(n[l]="execute");else if("timecontrol"==o[l]){i[l]=!0;var v=!1;!e[l].command||"string"!=typeof e[l].command||"play"!=e[l].command&&"pause"!=e[l].command&&"reset"!=e[l].command&&"start"!=e[l].command?null!=e[l].UTC&&this.isNumber(e[l].UTC)&&null!=e[l].isRunning&&"boolean"==typeof e[l].isRunning&&null!=e[l].value&&this.isNumber(e[l].value)&&(v=!0):v=!0,n[l]=this.extend(!0,e[l]),v||s.push("Payload ["+l+'] must be the following objects {command:"play"}, {command:"pause"}, {command:"reset"}, {command:"start"} or {UTC:number, isRunning:boolean, value:number}.')}else"location"==o[l]?void 0===e[l].text||void 0===e[l].long||void 0===e[l].lat?s.push("Payload ["+l+'] must be an object {text:"", long:number, lat:number}.'):n[l]=this.extend(!0,e[l]):"number"==o[l]||"counter"==o[l]||"checkbox"==o[l]?"object"==r(e[l])?n[l]=this.extend(!0,e[l]):n[l]=e[l]:"object"==r(e[l])?(null!=e[l]&&s.push("Payload ["+l+"] should not be an object."),n[l]=this.extend(!0,e[l])):n[l]=e[l];for(var g in n)"object"==r(n[g])&&0==Object.keys(n[g]).length&&(s.push("Payload ["+g+"] must not be an empty object or null."),delete n[g]);return{errors:s,payload:n,timeControlCollection:i,buttonCollection:a,payLoadTypes:o}},processPayloadCommand:function(t,e,o,i,r,a,s,c,u,l){var f=Date.now();if(a[t]&&("string"==typeof e[t]&&"execute"===e[t].toLowerCase()||"execute"===e[t].command))i[t]={__singularButton:!0,ts:(new Date).valueOf()};else if(s[t]&&e[t].command){var p=e[t].command,d=o[t];if("play"===p)d.isRunning||(i[t]={UTC:f,isRunning:!0,value:d.value?d.value:0});else if("pause"===p){if(d.isRunning){var m=(new Date).valueOf(),v=0,g=m;d&&(v=d.value?d.value:0,g=d.UTC?d.UTC:g),v+=m-g,i[t]={UTC:m,isRunning:!1,value:v}}}else"reset"===p?i[t]={UTC:f,isRunning:!1,value:0}:"start"===p&&(i[t]={UTC:f,isRunning:!0,value:0})}else if((c[t]||u[t])&&e[t].command){for(var h,y=r.composition.controlNode.model,b=0,O=Object.entries(y.fields);b<O.length;b++){var S=n(O[b],2),I=(S[0],S[1]);if(I.id==t){h=I;break}}var w=Number(e[t].value);isNaN(w)&&(w=1),"increase"===e[t].command?i[t]=Number(o[t])+w:"decrease"===e[t].command&&(i[t]=Number(o[t])-w),"reset"===e[t].command&&h&&null!=h.resetValue&&(i[t]=Number(h.resetValue)),h&&"reset"!==e[t].command&&(null!=h.max&&""!=h.max&&(i[t]=Math.min(i[t],Number(h.max))),null!=h.min&&""!=h.min&&(i[t]=Math.max(i[t],Number(h.min))))}else l[t]&&"toggle"===e[t].command?i[t]=!o[t]:i[t]=e[t]},applyPayload:function(t,e){for(var o in e.compositions)if(e.compositions[o]&&e.compositions[o].dataSources&&e.compositions[o].dataSources.composition.controlNode&&e.compositions[o].dataSources.composition.controlNode.payload){var n=this.checkDataType(e.compositions[o].dataSources.composition.controlNode.model,e.compositions[o].dataSources.composition.controlNode.payload).payload;for(var i in n)t.child("compositions").child(o).child("dataSources/composition/controlNode/payload").child(i).set(n[i])}},getTopParent:function(t,e){for(var o=e;;){var n=t.child(o).child("settings").val();if(!n||!0!==n.linkTimeline)break;o=n.parentTimeline}return o},getSpecialFolders:function(){var t=[];if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])for(var e=0;e<d.length;e++)"root"!=d[e]&&t.push(d[e]);else t=d;return t},changeKeyForCompDuplicating:function(t,e,o){t.compositions&&(t.compositions[e]=t.compositions[o],delete t.compositions[o]),t.compositionStates&&t.compositionStates[o]&&(t.compositionStates[e]=t.compositionStates[o],delete t.compositionStates[o]),t.compositionProps&&t.compositionProps.timeline2Active&&t.compositionProps.timeline2Active[o]&&(t.compositionProps.timeline2Active[e]=t.compositionProps.timeline2Active[o],delete t.compositionProps.timeline2Active[o]),t.compositionProps&&t.compositionProps.scripts&&t.compositionProps.scripts[o]&&(t.compositionProps.scripts[e]=t.compositionProps.scripts[o],delete t.compositionProps.scripts[o]),t.mainComposition=e},createDataStream:function(t,e,o){var n="http:"==window.location.protocol?"ws":"wss";return function(t,e){var o,n=io(t,{transports:["websocket"]});return e("connecting",t),n.on("message",function(t){if(t!==o){var n;if(null===t)e("message",{ts:0,payload:{}});else try{n=JSON.parse(t),e("message",{ts:n.ts,payload:n.payload})}catch(t){}o=t}}),n.on("connect",function(t){e("open"),e("connect"),console.log("datastream connect")}),n.on("disconnect",function(t){e("close",t),e("disconnect",t),console.log("datastream disconnect",t)}),n.on("error",function(t){e("error",t),console.log("datastream error",t)}),n.io.on("reconnect",function(t){e("reconnect"),console.log("datastream reconnect")}),{close:function(){n.disconnect()}}}(n+="://datastream.singular.live?ds="+t,e)},displayVariantHasLayout:function(t,e){if(!t||!t.length)return!1;var o=!1;return t.forEach(function(t){var n=t.resolution;switch(String(e).toLowerCase()){case"landscape":"1280x720"!==n&&"1920x1080"!==n&&"3840x2160"!==n||(o=!0);break;case"portrait":"720x1280"!==n&&"1080x1920"!==n&&"2160x3840"!==n||(o=!0);break;case"square":"1080x1080"===n&&(o=!0);break;case"responsive":"Responsive"===n&&(o=!0)}}),o},getParentSize:function(t,e,o){function n(t,e){for(var o in t){var n=t[o];if(n.tiles&&n.tiles[e])return n.tiles[e].layout}return null}for(var i=t;null!=i.parent;)i=i.parent;var r=function(t,e){var o=[],i=null,r=!1;for(var a in t){var s=t[a];if(s.groups&&s.groups[e]){var c=n(t,i=a);o.unshift({type:"composition",id:i,layout:c}),r=!0;break}}if(!r){for(var u in t){var l=t[u];if(l.groups)for(var f in l.groups){var p=l.groups[f];if(p.items&&p.items[e]){var d=p.layout,m=n(t,u);o.unshift({type:"group",id:f,layout:d}),o.unshift({type:"composition",id:u,layout:m}),i=u,r=!0;break}}if(r)break}if(!r)return[]}for(;;){var v=!1,g=null,h=null;for(var y in t){var b=t[y];if(b.groups)for(var O in b.groups){var S=b.groups[O];if(S.items&&S.items[i]){g=y,h=O,v=!0;break}}if(v)break}if(!v)break;var I=t[g].groups[h].layout,w=n(t,g);o.unshift({type:"group",id:h,layout:I}),o.unshift({type:"composition",id:g,layout:w}),i=g}return o}(i.child("compositions").val(),t.val().id),a=1,s=1;return r.forEach(function(t){t.layout&&(a=a*t.layout.width/100,s=s*t.layout.height/100)}),{width:e*a,height:o*s}}}},13023:(t,e,o)=>{"use strict";o.d(e,{A:()=>a});var n=o(30310),i=o(9769),r=o(10611);const a={TYPE:n,messages:[],add:function(t,e){return e.title&&!e.description&&(e.description=e.title),e.description&&!e.title&&(e.title=e.description),e&&e.title&&e.description?(0!=this.messages.length&&t==this.messages[0].type&&1==i.compareObject(e,this.messages[0].data)?this.messages[0].count++:this.messages.unshift({id:r.v4(),type:t,data:e,count:1}),this.messages.length>100&&this.messages.pop(),this.onMessageChanged&&this.onMessageChanged(this.messages),this.messages.length):0},delete:function(t){for(var e=0;e<this.messages.length;e++)if(this.messages[e].id==t){this.messages.splice(e,1);break}this.onMessageChanged&&this.onMessageChanged(this.messages)},clear:function(){this.messages=[],this.onMessageChanged&&this.onMessageChanged(this.messages)},onMessageChanged:null,getCountByType:function(){for(var t=0,e=0,o=0,i=0;i<this.messages.length;i++)this.messages[i].type==n.WARNING?t+=this.messages[i].count:this.messages[i].type==n.ERROR?e+=this.messages[i].count:o+=this.messages[i].count;return{error:e,warning:t,info:o}}}},18535:()=>{},27306:(t,e,o)=>{var n={"./en-gb":56195,"./en-gb.js":56195};function i(t){var e=r(t);return o(e)}function r(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id=27306},30310:(t,e,o)=>{var n=o(25499);t.exports=n({ERROR:null,WARNING:null,INFO:null})},45659:(t,e,o)=>{o(33287);var n=[{id:0,title:"In"},{id:1,title:"Out"}],i=[{id:0,title:"Out1"},{id:1,title:"In"},{id:2,title:"Out2"}],r=[{hSpace:60,secPerTick:.1},{hSpace:40,secPerTick:.1},{hSpace:20,secPerTick:.1},{hSpace:10,secPerTick:.1},{hSpace:5,secPerTick:.1},{hSpace:5,secPerTick:.2},{hSpace:5,secPerTick:.5}];t.exports={timelinePresets:n,statePresets:i,getTimelineNameById:function(t){var e=n.filter(function(e){return parseInt(e.id)==parseInt(t)});return e.length>0?e[0].title:""},getTimelineIdByName:function(t){var e=n.filter(function(e){return e.title==t});return e.length>0?e[0].id:-1},getStateNameById:function(t){var e=i.filter(function(e){return parseInt(e.id)==parseInt(t)});return e.length>0?e[0].title:""},getStateIdByName:function(t){var e=i.filter(function(e){return e.title==t});return e.length>0?e[0].id:-1},getDefaultKeyframes:function(){return{In:{0:0,1:1},Out:{0:0,1:1}}},getDefaultEffects:function(){return{In:{effect:"none",property:"none",easing:{easing:"power1",inOut:"out"}},Out:{effect:"none",property:"none",easing:{easing:"power1",inOut:"in"}}}},getRuler:function(t){return t?r[t]:r[0]},getRulerPixelToSec:function(t,e){var o=r[0];return t&&(o=r[t]),e*o.secPerTick/o.hSpace},getRulerSecToPixel:function(t,e){var o=r[0];return t&&(o=r[t]),e*o.hSpace/o.secPerTick},getDefaultTimelines:function(){return this.timelinePresets.map(function(t){return t.title})},getDefaultStates:function(){return this.statePresets.map(function(t){return t.title})},getDefaultTransitions:function(){return{Out1:{In:"In",Out1:"rev__In",Out2:"Out"},In:{In:"In",Out1:"rev__In",Out2:"Out"},Out2:{In:"rev__Out",Out1:"rev__In",Out2:"Out"}}},getDefaultCommands:function(){return{id:0,name:"",params:{}}},getAnimationState2:function(t,e){var o=t.toLowerCase();return"in"==o?"In":"out1"==o?"Out1":"out2"==o?"Out2":"out"==o?0==e?"Out1":"Out2":void 0},getLogicLayerGroup:function(t){var e=[];for(var o in t){var n=t[o],i=e.filter(function(t){return t.name==n.name});i.length>0?i[0].comps.push(o):e.push({name:n.name,comps:[o]})}return e},computeLogicLayerCompositionStates:function(t,e,o,n,i,r){var a=this.getLogicLayerGroup(n),s=[];if("In"==o)for(var c=0;c<a.length;c++)if(-1!=a[c].comps.indexOf(e)){for(var u=0;u<a[c].comps.length;u++){var l=a[c].comps[u];if(r&&r.push(l),l!=e){var f="Out1";(void 0===i[l]||i[l]&&!0===i[l])&&(f="Out2"),t==e?s.push({timelineOwner:l,timeline:l,state:f,delay:n[l].delay,time:n[l].time}):s.push({timelineOwner:t,timeline:l,state:f,delay:n[l].delay,time:n[l].time})}}break}return s}}},57437:t=>{t.exports={opacity:100,filterBlur:0,filterBrightness:100,filterContrast:100,filterGrayscale:0,filterHueRotate:0,filterInvert:0,filterSaturate:100,filterSepia:0,filterDropShadowMode:"none",filterDropShadowX:5,filterDropShadowY:5,filterDropShadowBlur:0,filterDropShadowSpread:0,filterDropShadowColor:{r:0,g:0,b:0,a:1},filterDropShadowInset:!1,blendMode:"normal"}},80448:(t,e,o)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var i=o(87021),r=o(9769);t.exports={generateGradient:function(t,e,o,n){var i=r.extend(!0,{},r.defaultGradient,this.convertToGradient(e));if(!i||o<=0||n<=0)return{color:"black",opacity:1};if("solid"==i.type)return{color:"rgb("+i.solidColor.r+","+i.solidColor.g+","+i.solidColor.b+")",opacity:i.solidColor.a};var a=o/2;if("linear"==i.type){var s=parseFloat(i.scale)/100;s<=0&&(s=.001),(v=t.gradient("linear",function(t){for(var e=0,o=i.stops.length;e<o;e++){var n=1;void 0!==i.stops[e].opacity&&(n=i.stops[e].opacity),t.at({offset:i.stops[e].offset,color:i.stops[e].color,opacity:n})}})).from(0,0).to(o,0);var c="";c+="rotate("+i.angle+",0,0) ",0==i.keepAspect?c+="scale("+s+","+s+") ":c+="scale("+s*n/o+","+s+") ",c+="translate("+(-a+i.offset/100*o)+", 0) "}else{var u=parseFloat(i.focalAngle)*Math.PI/180,l=parseFloat(i.focalDistance)/100;l>=1&&(l=.9999);var f=Math.sin(u)*l*n,p=Math.cos(u)*l*n,d=parseFloat(i.centerX-50)/100*o,m=parseFloat(i.centerY-50)/100*n,v=t.gradient("radial",function(t){for(var e=0,o=i.stops.length;e<o;e++){var n=1;void 0!==i.stops[e].opacity&&(n=i.stops[e].opacity),t.at({offset:i.stops[e].offset,color:i.stops[e].color,opacity:n})}}),g=parseFloat(i.radius)/100;v.from(d,m),v.to(d+f*g,m+p*g),v.radius(g*n),c="",0==i.keepAspect&&(c="translate("+d+",0) ",c+="scale("+o/n+",1) ",c+="translate("+-d+",0) ")}return v.attr({gradientUnits:"userSpaceOnUse"}),v.attr({spreadMethod:i.spreadMethod}),v.attr({gradientTransform:c}),{color:v,opacity:1}},convertToColor:function(t){if(!t)return{r:255,g:255,b:255,a:1};if("object"===n(t)){if(t.solidColor&&void 0!==t.solidColor.r&&void 0!==t.solidColor.g&&void 0!==t.solidColor.b){var e=1;return void 0!==t.solidColor.a&&(e=t.solidColor.a),{r:t.solidColor.r,g:t.solidColor.g,b:t.solidColor.b,a:e}}return null!=t.r&&null!=t.g&&null!=t.b?t:t.color&&null!=t.color.r&&null!=t.color.g&&null!=t.color.b?(e=1,void 0!==t.color.a&&(e=t.color.a),{r:t.color.r,g:t.color.g,b:t.color.b,a:e}):{r:255,g:255,b:255,a:1}}var o=i(String(t));return o.isValid()?o.toRgb():{r:255,g:255,b:255,a:1}},convertToGradient:function(t){var e=r.extend(!0,{},r.defaultGradient);if(!t)return e;if("object"!==n(t))try{t=JSON.parse(t)}catch(t){}if("solid"==t.type||"linear"==t.type||"radial"==t.type)return t;var o=this.convertToColor(t);return e.solidColor.r=o.r,e.solidColor.g=o.g,e.solidColor.b=o.b,e.solidColor.a=o.a,e}}},82327:t=>{t.exports={getRandomArbitrary:function(t,e){return Math.random()*(e-t)+t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}},82465:t=>{t.exports={API_ENDPOINTS:{d:"/apiv1/datanodes/",i:"/apiv1/mediatoS3/",c:"/apiv1/compositions/",ai:"/apiv1/appinstances/",dv:"/apiv1/devices/",au:"/apiv1/audios/",j:"/apiv1/jsons/",da:"/apiv1/data/",v:"/apiv1/videos/",at:"/apptemplates/",in:"/apiv1/interactives/",wo:"/apiv1/devices/"},BROWSERITEM_FULLNAME_MAP:{d:"datanode",i:"image",c:"composition",ai:"appinstance",dv:"device",fo:"folder",au:"audio",j:"json",da:"data",v:"video",at:"apptemplate",in:"interactive",wo:"weboutput"},MARKETITEM_FULLNAME_MAP:{d:"datanode",i:"asset",c:"composition",ai:"appinstance",dv:"device",fo:"folder",au:"audio",j:"json",da:"data",v:"video",wo:"weboutput"},BROWSERITEM_NICENAME_MAP:{d:"Datanode",i:"Asset",c:"Composition",ai:"Control App",dv:"Device",fo:"Folder",au:"Audio",j:"JSON",da:"Data",v:"Video",at:"Control App",in:"Interactive Layer",wo:"Output"},BROWSERITEM_ICON_CLASS_MAP:{d:"fa-database",w:"fa-television",i:"fa-file-o",c:"fa-object-group",at:"fa-database",ai:"fa-window-restore",wi:"fa-cogs",dv:"fa-hdd-o",fo:"fa-folder-o",au:"fa-file-audio-o",j:"fa-file-code-o",da:"fa-file",v:"fa-file-video-o",in:"fa-hdd-o",wo:"fa-globe"},BROWSERITEM_DEFAULT_ICON_MAP:{d:"/images/default-datanode-icon.png",i:"/images/default-asset-icon.png",c:"/images/default-composition-icon.png",at:"/images/default-appTemplate-icon.png",ai:"/images/default-appInstance-icon.png",au:"/images/default-audio-icon.png",wi:"/images/default-widget-icon.png",dv:"/images/default-device-icon.png",fo:"/images/default-folder-icon.png",j:"/images/default-json-icon.png",da:"/images/default-data-icon.png",v:"/images/default-video-icon.png",in:"/images/default-device-icon.png",wo:"/images/default-device-icon.png"},BROWSERITEM_TABLENAME_MAP:{d:"datanodes",i:"images",c:"scenes",ai:"appinstances",dv:"devices",fo:"dashboard_folders",au:"audios",j:"json_files",da:"data_files",v:"videos",wo:"devices"},BROWSERITEM_FULLNAME_MAP_REV:{datanode:"d",image:"i",composition:"c",appinstance:"ai",device:"dv",folder:"fo",audio:"au",json:"j",data:"da",video:"v",weboutput:"wo"},TOKENTYPE_MAP:{APP_OUTPUT_TOKEN:"APP_OUTPUT_TOKEN",APP_SHARE_TOKEN:"APP_SHARE_TOKEN",COMPOSITION_TOKEN:"COMPOSITION_TOKEN",WEB_OUTPUT_TOKEN:"WEB_OUTPUT_TOKEN"},DATANODE:"d",ASSET:"i",IMAGE:"i",COMPOSITION:"c",APPINSTANCE:"ai",APPTEMPLATE:"at",WIDGET:"wi",DEVICE:"dv",FOLDER:"fo",AUDIO:"au",JSON:"j",DATA:"da",VIDEO:"v",INTERACTIVE:"in",WEBOUTPUT:"wo"}},83384:t=>{t.exports={MOUSE_UNKNOW_CLICK:0,MOUSE_LEFT_CLICK:1,MOUSE_MIDDLE_CLICK:2,MOUSE_RIGHT_CLICK:3}},88534:(t,e,o)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var n,i,r,a,s=[],c=!0,u=!1;try{if(r=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=r.call(o)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e,o){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}var u=o(15734),l="https://datastore.singular.live",f=function(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3?arguments[3]:void 0;!function(t,e,o,n){u.post("".concat(l,"/v1/").concat(t,"/partial")).set("Content-Type","application/json").send({paths:e}).end(function(t,e){t||!e.ok?n&&n(t||new Error(e&&e.text)):n&&n(null,e.body)})}(t,["compExtracts","outputs"].concat((e=o,function(t){if(Array.isArray(t))return c(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),0,function(t,e){if(t)n(t);else{var i=a(a({},"compExtracts",e.compExtracts),"outputs",e.outputs);o.forEach(function(t){i[t]=e[t]}),i.v=e.__v,n(null,i)}})};t.exports=function(t,e,o,n){return e=e.toString(),new Promise(function(a,s){var c={},p=0,d=0,m=!1,v=null,g=io("".concat(l,"?ds=").concat(e),{transports:["websocket"]});g.on("set",function(e,o){m||(c[o.v]={type:"set",msg:e},p=o.v),t.set(e)}),g.on("update",function(e,o){m||(c[o.v]={type:"update",msg:e},p=o.v),t.beginBatch(!1);for(var n=0,i=Object.entries(e);n<i.length;n++){var a=r(i[n],2),s=a[0],u=a[1],l=s.replace(new RegExp(/\./,"g"),"/");t.child(l).set(u)}var f=!0;o.userData&&o.userData.sender==g.id&&(f=!1),t.endBatch(!1,f)}),g.on("connect",function(s){console.log("Connected to datastore id "+e),g.emit("login",e,o);var h=function(e,o){if(e)console.log(e.message);else{for(t.set(o),i=o.v;i<=p;i++){var n=c[i];if(n)if("set"==n.type)t.set(n.msg);else if("update"==n.type){t.beginBatch(!1);for(var s=0,u=Object.entries(n.msg);s<u.length;s++){var l=r(u[s],2),f=l[0],h=l[1],y=f.replace(new RegExp(/\./,"g"),"/");t.child(y).set(h)}t.endBatch(!1)}}c={},m=!0}0==d&&a({disconnect:function(t){g.disconnect()},update:function(t){g.emit("update",{data:t,userData:{sender:g.id}})},setStatusCallback:function(t){v=t}}),d++,v&&v("connect")};if("appWithoutStorage"==n){var y=[];window.singularAppInstanceOutputName&&"broadcast"==window.singularAppInstanceOutputName.toLowerCase()&&y.push("broadcast"),f(e,y,null,function(t,e){h(t,e)})}else u.get("".concat(l,"/v1/").concat(e)).end(function(t,e){var o=e&&e.body&&e.body.data||{};o.v=e&&e.body&&e.body.v||0,h(t,o)})}),g.on("disconnect",function(t){console.log(e,"disconnected ".concat(t)),m=!1,v&&v("disconnect")}),g.io.on("reconnect",function(t){console.log(e,"reconnect",t)}),g.io.on("reconnect_attempt",function(t){console.log(e,"reconnect_attempt",t)}),g.io.on("reconnect_error",function(t){console.log(e,"reconnect_error",t)}),g.io.on("reconnect_failed",function(){console.log(e,"reconnect_failed")})})}}}]);