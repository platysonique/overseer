(self.webpackChunkSingular=self.webpackChunkSingular||[]).push([[878],{3808:(t,e,i)=>{"use strict";i.d(e,{A:()=>ie});var o=i(40927),n=i.n(o),s=i(31018),a=i.n(s),r=i(17604),l=i.n(r),d=i(33287),p=i.n(d),c=i(52871);const h=function(t,e,i,o,n,s){var a,r,l=i[0],d=i[1],p=(d-l)/5;s&&(p=s);var c=1;return void 0!==n.opacity&&(c=n.opacity/100),"In"==e?(r={opacity:0},a=new TweenLite(o,p,{immediateRender:!0,opacity:c,startAt:r,ease:Power0.None})):"Out"==e&&(r={opacity:c},a=new TweenLite(o,p,{immediateRender:!0,opacity:0,startAt:r,ease:Power0.None})),a.data={opacityTween:!0},a&&("In"==e?t.add(a,l):t.add(a,d-p),t.pause()),a},u=function(t,e,i,o,n,s,a,r,d,h,u){if(null==o||"none"==o)return null;var m=c.A.generateGreensockEasing(s);d&&d.perspectiveActive;var f=$(a).width(),v=$(a).height();u.tile?(f="%"==r.widthUnit?r.width*u.groupLayout.width/100:r.width,v="%"==r.heightUnit?r.height*u.groupLayout.height/100:r.height):u.group&&(f="%"==r.widthUnit?r.width*u.onAirLayout.width/100:r.width,v="%"==r.heightUnit?r.height*u.onAirLayout.height/100:r.height);var g,y=h[0],w=h[1],b=-y/2-f/2-r.left/100*f*2,I=y/2+f/2-r.left/100*f*2,S=-w/2-v/2-r.top/100*v*2,T=w/2+v/2-r.top/100*v*2,R=i[0],k=i[1]-R,A=p().getCSSTransform(r,d).transformObj;A.rotateX=parseFloat(A.rotateX),A.rotateY=parseFloat(A.rotateY),A.rotateZ=parseFloat(A.rotateZ),A.scaleX=parseFloat(A.scaleX),A.scaleY=parseFloat(A.scaleY),A.scaleZ=parseFloat(A.scaleZ),A.skewX=parseFloat(A.skewX),A.skewY=parseFloat(A.skewY),A.skewX=Math.min(Math.max(A.skewX,-89.9),89.9),A.skewY=Math.min(Math.max(A.skewY,-89.9),89.9);var E,L,x=null,C=1;void 0!==r.opacity&&(C=r.opacity/100);var O=C,M=C,D=(p().getRotateFromLayout(r),p().getScaleFromLayout(r)),N=" translateX(%dpx) translateY(%dpx) translateZ(%dpx) scaleX(%f) scaleY(%f) scaleZ(%f) rotateX(%fdeg) rotateY(%fdeg) rotateZ(%fdeg) skew(%fdeg, %fdeg) ";if("widget"==o?(O=C,M=C,E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"fade"==o?"In"==e?(O=0,M=C,E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):(O=C,M=0,E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"translate"==o||"translateNoFade"==o?"left"==n?"In"==e?(E=l().vsprintf(N,[b,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[b,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"right"==n?"In"==e?(E=l().vsprintf(N,[I,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[I,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"up"==n?"In"==e?(E=l().vsprintf(N,[0,S,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,S,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"down"==n&&("In"==e?(E=l().vsprintf(N,[0,T,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,T,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]))):"scale"==o?"x"==n?"In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,0,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,D.x,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,D.x,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,0,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"y"==n?"In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,0,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,D.y,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,D.y,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,0,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"xAndY"==n&&("In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,0,0,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,D.x,D.y,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,D.x,D.y,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,0,0,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]))):"rotate"==o&&("x+"==n?"In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX+90,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX+90,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"x-"==n?"In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX-90,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX-90,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"y+"==n?"In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY+90,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY+90,A.rotateZ,A.skewX,A.skewY])):"y-"==n&&("In"==e?(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY-90,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY])):"Out"==e&&(E=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY,A.rotateZ,A.skewX,A.skewY]),L=l().vsprintf(N,[0,0,A.translateZ,A.scaleX,A.scaleY,A.scaleZ,A.rotateX,A.rotateY-90,A.rotateZ,A.skewX,A.skewY])))),t.kill(null,a),"In"==e){var _={immediateRender:!0,transform:L,startAt:x={transform:E},ease:m};"translate"!=o&&(x.opacity=O,_.opacity=M),g=new TweenLite(a,k,_)}else"Out"==e&&(_={immediateRender:!0,transform:L,startAt:x={transform:E},ease:m},"translate"!=o&&(x.opacity=O,_.opacity=M),g=new TweenLite(a,k,_));return g.data={timeline:e,effect:o,property:n,transformFrom:E,transformTo:L,timelineId:t.data.timelineId,duration:k},g&&(t.add(g,R),t.pause()),g};var m=i(49128),f=i(50313),v=(i(14794),i(9769));const g={componentWillMount:function(){this.tweens={},this.opacityTweens={},this.callbacks={}},componentWillReceiveProps:function(t){!(this.props.tile&&!v.compareObject(this.props.tile,t.tile,["zindex","visible"])||!this.props.tile&&this.props.group&&!v.compareObject(this.props.group,t.group,["zindex","visible"]))&&v.compareObject(this.props.timeline2Active,t.timeline2Active)&&v.compareObject(this.props.onAirLayout,t.onAirLayout)&&v.compareObject(this.props.linkTimeline,t.linkTimeline)||this.setupTween(t)},componentDidUpdate:function(t){t&&t.adaptationGlobals&&!v.compareObject(this.props.adaptationGlobals,t.adaptationGlobals)&&this.setupTween(this.props)},animationCallback:function(t,e,i,o,n,s,a){if(!f.A.suppressOnAnimationEvent&&!(e.compositionEditor&&t.data&&f.A.stateCommand[t.data.timelineId])&&i){var r=e.compositionInstanceId||e.sbRef.key;if(f.A.iframeRefMap[r]){var l=f.A.iframeRefMap[r][e.tile.id];if(l){var d={event:null,timeline:o,duration:e.tile.keyframes[o][1]-e.tile.keyframes[o][0],animationEvent:"play"};if(t){for(var p=t;p.timeline&&"function"==typeof p.timeline.getChildren;)p=p.timeline;p.reversed()?("begin"==i||"stop"==i?d.event="stop":"end"!=i&&"mid_start"!=i||(d.event="start"),d.direction="backward"):("end"==i||"stop"==i?d.event="stop":"begin"!=i&&"mid_start"!=i||(d.event="start"),d.direction="forward")}"init"!=i&&"seek"!=i&&"stop"!=i&&"jump"!=i||(d.event=i),"In"==o?"forward"==d.direction?(d.oldState="Out1",d.newState="In"):(d.oldState="In",d.newState="Out1"):"forward"==d.direction?(d.oldState="In",d.newState="Out2"):(d.oldState="Out2",d.newState="In"),"jump"==d.event&&(d.oldState=a.jumpFrom,d.newState=a.jumpTo,d.animationEvent=d.event),"init"==d.event&&(d.state=n,d.newState=n,"In"==o&&("In"==n?(d.state="In",d.newState="In"):(d.state="Out1",d.newState="Out1")),"Out"==o&&("In"==n?(d.state="In",d.newState="In"):(d.state="Out2",d.newState="Out2")),e.tile.effects&&(d.easing=e.tile.effects[o].easing)),"start"!=d.event&&"stop"!=d.event&&"seek"!=d.event&&"jump"!=d.event||(d.time=s),"seek"==d.event&&(delete d.direction,delete d.oldState,delete d.newState),l.onSingularAnimation(d)}}else console.error("Tile",e.tile.id,"must not have update animation turned on.")}},setupTween:function(t){var e=this.tweenRef;if(e){for(var i=0;i<t.timelines.length;i++){var o,n,s,a=t.timelines[i],r=v.getTopParent(t.rootSbRef.child("compositions"),t.sbRef.key);if(("Out"!=a||!1!==t.timeline2Active[r])&&(t.tile?(o=t.tile.layout,n=t.settings,s=t.tile.effects,d=t.tile.keyframes,t.tile.name):(o=t.group.layout,n=t.settings,s=t.group.effects,d=t.group.keyframes,t.group.name),null!=this.tweens[a]&&(this.tweens[a].timeline.remove(this.tweens[a]),delete this.tweens[a]),null!=this.opacityTweens[a]&&(this.opacityTweens[a].timeline.remove(this.opacityTweens[a]),delete this.opacityTweens[a]),s&&s[a].effect,d&&s)){var l=t.tweenTimelines[a],d=d[a],p=s[a].effect,c=s[a].easing,g=s[a].property;l.removeCallback(this.animationCallback);var y=t.compositionInstanceId||t.sbRef.key;if(t.tile&&f.A.widgetWithAnimationCallback[y]&&f.A.widgetWithAnimationCallback[y][t.tile.id]&&"widget"!=s.In.effect&&"widget"!=s.Out.effect&&delete f.A.widgetWithAnimationCallback[y][t.tile.id],t.tile&&"widget"==s[a].effect){if(f.A.widgetWithAnimationCallback[y]||(f.A.widgetWithAnimationCallback[y]={}),f.A.widgetWithAnimationCallback[y][t.tile.id]=t.tile,l.addCallback(this.animationCallback,d[0]+1e-5,[l,t,"begin",a,void 0,0]),l.addCallback(this.animationCallback,d[1]-1e-5,[l,t,"end",a,void 0,d[1]-d[0]]),l.addCallback(this.animationCallback,d[1],[l,t,null,a]),"In"==a||"Out"==a&&1==this.props.rootSbRef.child("compositionProps/timeline2Active/"+this.props.sbRef.key).val()){for(var w=y;!0===this.props.rootSbRef.child("compositions/"+w+"/settings/linkTimeline").val();)w=this.props.rootSbRef.child("compositions/"+w+"/settings/parentTimeline").val();this.animationCallback(l,t,"init",a,f.A.compAnimationState[w][w])}l.data.animationCallbacks||(l.data.animationCallbacks={}),l.data.animationCallbacks[y]||(l.data.animationCallbacks[y]={}),l.data.animationCallbacks[y][t.tile.id]={callback:this.animationCallback,props:t,beginTime:d[0],endTime:d[1]}}1==this.props.rootSbRef.child("compositionProps/timeline2Active/"+this.props.sbRef.key).val()&&("In"==a&&"widget"==s.Out.effect&&"widget"!=s.In.effect?l.addCallback(this.animationCallback,0,[t.tweenTimelines.Out,t,"jump","Out",void 0,0,{jumpFrom:"Out2",jumpTo:"In"}]):"Out"==a&&"widget"==s.In.effect&&"widget"!=s.Out.effect&&l.addCallback(this.animationCallback,d[1]-1e-5,[t.tweenTimelines.In,t,"jump","In",void 0,0,{jumpFrom:"In",jumpTo:"Out1"}]));var b,I=t.onAirLayout.width,S=t.onAirLayout.height;if((b=u(l,a,d,p,g,c,e,o,n,[I,S],t))&&(b.data||(b.data={}),"In"==a?b.data.outEffect=s.Out.effect:b.data.inEffect=s.In.effect),this.tweens[a]=b,"translate"==p){var T=h(l,a,d,e,o,void 0);this.opacityTweens[a]=T,T&&(T.data||(T.data={}),"In"==a?T.data.outEffect=s.Out.effect:T.data.inEffect=s.In.effect)}for(var R=l;R.timeline&&"function"==typeof R.timeline.getChildren;)R=R.timeline;R.getChildren(!0,!1,!0).forEach(function(t){t.restart()})}}if(t.tweenTimelines){var k=m.A.getActiveTimeline(this.props.rtdbRef.key),A=t.tweenTimelines[k.activeTimeline];if(A){for(R=A;R.timeline&&"function"==typeof R.timeline.getChildren;)R=R.timeline;if(k.activeTimeline!=m.A.getActiveTimeline(R.data.timelineId).activeTimeline)for(R=A=t.tweenTimelines[m.A.getActiveTimeline(R.data.timelineId).activeTimeline];R.timeline&&"function"==typeof R.timeline.getChildren;)R=R.timeline;var E=0;if(m.A.getActiveTimeline(R.data.timelineId)&&(E=m.A.getActiveTimeline(R.data.timelineId).activeTimelinePosition),!1===R.data.completed?R.resume():(R.restart(),R.pause()),R.seek(R.duration()),R.seek(E),t.compositionEditor){var L=this.props.rtdbRef.key;if(f.A.compAnimationState[L]){var x=f.A.compAnimationState[L][L],C=R.duration();0==k.activeTimelinePosition&&"In"==x&&0!=C&&R.seek(C)}}}}if("live"==t.mode&&t.settings&&!0===t.settings.linkTimeline){var O=this.props.rtdbRef.key;y=this.props.compositionInstanceId||O,t.resetupCompAnimationState(y,O)}}},componentDidMount:function(){this.setupTween(this.props)}};var y=i(40961),w=i.n(y);i(9769);const b={componentWillUnmount:function(){},componentDidMount:function(){},getEventTarget:function(){return $(window)},window_mousedown:function(t){"preview"==this.props.mode&&(t.altKey||(this.mouseDownScreenX=t.screenX,this.mouseDownScreenY=t.screenY,this.totalDisX=0,this.totalDisY=0,this.shiftKey=t.shiftKey,this.shiftDirection="",this.currentCursorValue="move",this.oldFx=-1,this.oldFy=-1,$(window).on("mousemove",this.window_mousemove),$(window).on("mouseup",this.window_mouseup),this.mouseDownTileLayout={},this.state.composition.tiles[this.OnAirMouseMixinTileId]&&$.extend(!0,this.mouseDownTileLayout,this.state.composition.tiles[this.OnAirMouseMixinTileId].layout),this.mouseDownGroupLayout={},this.state.composition.groups[this.OnAirMouseMixinGroupId]&&$.extend(!0,this.mouseDownGroupLayout,this.state.composition.groups[this.OnAirMouseMixinGroupId].layout)))},window_mouseup:function(t){t.stopPropagation(),t.preventDefault(),this.shiftKey=t.shiftKey,this.shiftDirection="",$(window).off("mousemove",this.window_mousemove),$(window).off("mouseup",this.window_mouseup)},window_mousemove:function(t){t.stopPropagation(),t.preventDefault();var e=t.screenX-this.mouseDownScreenX,i=t.screenY-this.mouseDownScreenY;this.mouseDownScreenX=t.screenX,this.mouseDownScreenY=t.screenY;var o=$(w().findDOMNode(this)).find("div.root-onair")[0].getBoundingClientRect(),n=o.right-o.left,s=o.bottom-o.top;e=100*(e=100*(e=100*(e=100*e/n*2)/parseFloat(this.mouseDownTileLayout.scaleX))/parseFloat(this.mouseDownGroupLayout.width))/parseFloat(this.mouseDownGroupLayout.scaleX),i=100*(i=100*(i=100*(i=100*i/s*2)/parseFloat(this.mouseDownTileLayout.scaleY))/parseFloat(this.mouseDownGroupLayout.height))/parseFloat(this.mouseDownGroupLayout.scaleY),this.totalDisX+=e,this.totalDisY+=i;var a=this.totalDisX,r=this.totalDisY;if(t.shiftKey&&(Math.abs(this.totalDisX)>2*Math.abs(this.totalDisY)?r=0:Math.abs(this.totalDisY)>2*Math.abs(this.totalDisX)?a=0:Math.abs(this.totalDisX)>Math.abs(this.totalDisY)?r=Math.abs(this.totalDisX)*this.totalDisY/Math.abs(this.totalDisY):a=Math.abs(this.totalDisY)*this.totalDisX/Math.abs(this.totalDisX)),this.state.composition.tiles[this.OnAirMouseMixinTileId])if("move"==this.currentCursorValue){var l=this.mouseDownTileLayout.left,d=this.mouseDownTileLayout.top,p=a*(parseFloat(this.mouseDownTileLayout.scaleX)/100),c=r*(parseFloat(this.mouseDownTileLayout.scaleY)/100),h=parseFloat(l)+parseFloat(p/2),u=parseFloat(d)+parseFloat(c/2);if(this.props.uiSettings&&this.props.uiSettings.previewSnap){var m=1;this.props.uiSettings.previewSnapGridSize&&(m=this.props.uiSettings.previewSnapGridSize),h=Math.round(h/m)*m,u=Math.round(u/m)*m}this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/left").set(h),this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/top").set(u)}else if(this.currentCursorValue.indexOf("-resize")>=0){var f=this.mouseDownTileLayout.width,v=this.mouseDownTileLayout.height,g=this.mouseDownTileLayout.lockSize,y=parseFloat(f),b=parseFloat(v),I=1,S=1,T=!1,R=!1,k=this.currentCursorValue.replace("","");switch(k){case"n-resize":S=-1,R=!0;break;case"e-resize":I=1,T=!0;break;case"s-resize":S=1,R=!0;break;case"w-resize":I=-1,T=!0;break;case"ne-resize":I=1,S=-1,T=!0,R=!0;break;case"nw-resize":I=-1,S=-1,T=!0,R=!0;break;case"se-resize":I=1,S=1,T=!0,R=!0;break;case"sw-resize":I=-1,S=1,T=!0,R=!0}if(g){if(T=!0,R=!0,2==k.replace("-resize","").length){var A=function(t,e){var i="y",o=t<0?-1*t:t,n=e<0?-1*e:e;if(-1!=this.oldFx&&-1!=this.oldFy){var s=o-this.oldFx,a=n-this.oldFy;i=(s=s<0?-1*s:s)>(a=a<0?-1*a:a)?"x":"y"}return this.oldFx=t,this.oldFy=e,i}.bind(this);I=1,S=1;var E=A(a,r);switch(k){case"ne-resize":"y"==E?(k="n-resize",S=-1):"x"==E&&(k="e-resize",I=1);break;case"nw-resize":"y"==E?(k="n-resize",S=-1):"x"==E&&(k="w-resize",I=-1);break;case"se-resize":"y"==E?(k="s-resize",S=1):"x"==E&&(k="e-resize",I=1);break;case"sw-resize":"y"==E?(k="s-resize",S=1):"x"==E&&(k="w-resize",I=-1)}}switch(k){case"n-resize":I=-1,a=r;break;case"s-resize":a=r;break;case"e-resize":r=a;break;case"w-resize":S=-1,r=a}}T&&(y+=parseFloat(a)*I)<0&&(y=0),R&&(b+=parseFloat(r)*S)<0&&(b=0),this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/width").set(y),this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/height").set(b)}},moveSelectedObject:function(t,e){var i,o={};if(this.OnAirMouseMixinGroupId?(i=this.state.composition.groups[this.OnAirMouseMixinGroupId],$.extend(!0,o,this.state.composition.groups[this.OnAirMouseMixinGroupId].layout)):this.OnAirMouseMixinTileId&&(i=this.state.composition.tiles[this.OnAirMouseMixinTileId],$.extend(!0,o,this.state.composition.tiles[this.OnAirMouseMixinTileId].layout)),i){var n=parseFloat(o.left)+parseFloat(t),s=parseFloat(o.top)+parseFloat(e);if(this.props.uiSettings&&this.props.uiSettings.previewSnap){var a=1;this.props.uiSettings.previewSnapGridSize&&(a=this.props.uiSettings.previewSnapGridSize),n=Math.round(n/a)*a,s=Math.round(s/a)*a}this.OnAirMouseMixinGroupId?(this.props.sbRef.child("groups").child(this.OnAirMouseMixinGroupId).child("layout/left").set(n),this.props.sbRef.child("groups").child(this.OnAirMouseMixinGroupId).child("layout/top").set(s)):this.OnAirMouseMixinTileId&&(this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/left").set(n),this.props.sbRef.child("tiles").child(this.OnAirMouseMixinTileId).child("layout/top").set(s))}}},I={componentWillMount:function(){this.intervals=[]},setInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.intervals.push(setInterval.apply(null,arguments))}),componentWillUnmount:function(){this.intervals.map(clearInterval)},clearInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.intervals.map(clearInterval)})};var S=i(24316),T=i(88534),R=i.n(T),k=i(16918),A=i.n(k),E=i(78450),L=i.n(E),x=i(84348);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function M(t,e,i){return(e=function(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=C(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var D=i(9769),N=i(75348);const _=n().createClass({displayName:"InteractiveHighlight",getInitialState:function(){return this.canvasRef=null,this.canvasRect=null,this.overlayRef=null,this.rectangles=[],{mouseOverId:null,overlayActive:!1,overlayPositionX:0,overlayPositionY:0,overlayPositionWidth:0,overlayPositionHeight:0,overlayType:"",overlaySubComp:"",overlayElement:"",overlayEvents:null}},componentDidMount:function(){},componentWillUnmount:function(){},componentDidUpdate:function(){if(this.props.visible&&this.state.overlayActive&&this.refs.overlayRef){var t=w().findDOMNode(this.refs.overlayRef);if(!t)return;var e=t.getBoundingClientRect(),i=function(t,i){return!(t<0||i<0||t+e.width>this.canvasRect.width||i+e.height>this.canvasRect.height)}.bind(this),o=function(t){return Math.min(Math.max(t,0),this.canvasRect.width)}.bind(this),n=function(t){return Math.min(Math.max(t,0),this.canvasRect.height)}.bind(this),s=o(this.state.overlayPositionX),a=this.state.overlayPositionY-e.height;0==i(s,a)&&0==i(s=o(this.state.overlayPositionX),a=this.state.overlayPositionY+this.state.overlayPositionHeight)&&0==i(s=this.state.overlayPositionX-e.width,a=n(this.state.overlayPositionY))&&0==i(s=this.state.overlayPositionX+this.state.overlayPositionWidth,a=n(this.state.overlayPositionY))&&((s=this.state.overlayPositionX)<0?s=0:this.canvasRect&&s+e.width>this.canvasRect.width&&(s=this.canvasRect.width-e.width),(a=this.state.overlayPositionY)<0?a=0:this.canvasRect&&a+e.height>this.canvasRect.height&&(a=this.canvasRect.height-e.height)),this.refs.overlayRef.style.left=s+"px",this.refs.overlayRef.style.top=a+"px"}},getGroupName:function(t){var e=this.props.rootSbRef.parent.val();for(var i in e)if(e[i].groups)for(var o in e[i].groups)if(o==t)return e[i].groups[t].name;return""},getElementName:function(t){var e=this.props.rootSbRef.parent.val();for(var i in e)if(e[i].tiles)for(var o in e[i].tiles)if(o==t)return e[i].tiles[o].type,e[i].tiles[o].name;return""},renderCanvas:function(){var t=w().findDOMNode(this.refs.canvasRef);if(t){this.canvasRect=t.getBoundingClientRect();var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),t.width=this.canvasRect.width,t.height=this.canvasRect.height,e.lineWidth=1,e.fillStyle="rgb(150,190,255,0.6)";var i=$("#onairPreview");if(i.length>0){var o=i[0],n=Array.prototype.slice.call(o.querySelectorAll("[data-si-id]"));this.rectangles=[];var s=function(t){var e,o,n,s=t.getAttribute("data-si-id"),a=t.getAttribute("data-si-compId"),r=t.getAttribute("data-si-ownerId"),l=f.A.onAirWidgetRefMap[a][s];if(l){var d=l.props.tile;o=d.effects,n=d.layout.events,e=d.type}else{if(!(l=f.A.onAirGroupRefMap[a][s]))return;var p=l.props.group;e="group",o=p.effects,n=p.layout.events}for(var c=r,h=a;f.A.compParentTimeline[c]&&f.A.compParentTimeline[c][h]&&f.A.compParentTimeline[c][h].linked;)h=c=f.A.compParentTimeline[c][h].parentTimelineId;for(var u=t.style.opacity,m=t.parentNode;0!=u&&m!=i[0];){var v=m.style.opacity;"hidden"==m.style.visibility&&(v="0"),""!=v&&(u=v),m=m.parentNode}""==u&&(u=1);var g=!1,y=!0===this.props.rootSbRef.child("compositionProps/timeline2Active/"+a).val();if("composition"==e){var w=f.A.timelineMaxState[s];g=w&&("Out1"==w[s]||"Out2"==w[s])}if(0==g&&("none"!=o.In.effect||"none"!=o.Out.effect&&y)){var b=f.A.timelineMaxState[c];g=b&&("Out1"==b[h]||"Out2"==b[h])}if(0!=u&&0==g){var I=t.getBoundingClientRect();this.rectangles.push({dom:t,id:s,ownerId:c,events:n,type:e,x:parseInt(I.x-this.canvasRect.x),y:parseInt(I.y-this.canvasRect.y),width:parseInt(I.width),height:parseInt(I.height)})}}.bind(this);n.map(s),n.sort(function(t,e){return D.compareTwoDomNodes(t.domNode,e.domNode)});var a=null;if(this.rectangles.map(function(t){e.fillRect(t.x,t.y,t.width+1,t.height+1),t.id==this.state.mouseOverId&&(a=t)}.bind(this)),e.fillStyle="rgb(150,25,25,0.6)",this.rectangles.map(function(t,i){for(var o=i+1,n=this.rectangles.length;o<n;o++){var s=this.rectangles[o],a=Math.max(t.x,s.x),r=Math.max(t.y,s.y),l=Math.min(t.x+t.width,s.x+s.width),d=Math.min(t.y+t.height,s.y+s.height);a>=l||r>=d||e.fillRect(a,r,l-a+1,d-r+1)}}.bind(this)),a){var r,l,d,p=a;switch(p.type){case"widget":r="Widget",l=this.getElementName(p.id);break;case"group":r="Group",l=this.getGroupName(p.id);break;default:l=this.getElementName(p.id),r="Sub Comp"}(d=this.getElementName(p.ownerId))||(d="Root"),this.setState({overlayActive:!0,overlayPositionX:p.x,overlayPositionY:p.y,overlayPositionWidth:p.width,overlayPositionHeight:p.height,overlayType:r,overlaySubComp:d,overlayElement:l,overlayEvents:p.events})}}}},onMouseMove:function(t){var e=w().findDOMNode(this.refs.canvasRef);if(e){var i=e.getBoundingClientRect(),o=t.clientX-i.x,n=t.clientY-i.y,s=!1;for(var a in this.rectangles){var r=this.rectangles[a];if(o>=r.x&&o<=r.x+r.width&&n>=r.y&&n<=r.y+r.height){this.setState({mouseOverId:r.id}),s=!0;break}}0==s&&this.setState({mouseOverId:null,overlayActive:!1})}},onMouseLeave:function(t){this.setState({overlayActive:!1,mouseOverId:null})},render:function(){if(!this.props.visible)return null;var t,e=M(M({position:"absolute",zIndex:"1",color:"#FFF",backgroundColor:"rgb(39, 39, 39, 0.95)",display:"block",fontSize:"10px",pointerEvents:"none",border:"solid 1px #545454",borderRadius:"5px",padding:"5px"},"display","flex"),"alignItems","flex-start");if(0==this.state.overlayActive)e.display="none";else{e.overflow="hidden";var i=[],o=this.state.overlayEvents;if(o){var s,a=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return O(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw s}}}}(N.EVENT_SELECTION);try{for(a.s();!(s=a.n()).done;){var r=s.value;o[r.id]&&i.push(r)}}catch(t){a.e(t)}finally{a.f()}}i.length&&(t=n().createElement("div",{style:{pointerEvents:"none"}},n().createElement("ul",{style:{listStyle:"none",color:"#ffa500",margin:"0px"}},i.map(function(t,e){return n().createElement("li",{key:"line"+e},t.title)}))))}var l={color:"#cc33b0",overflow:"hidden",textOverflow:"ellipsis",display:"block",whiteSpace:"nowrap",maxWidth:"100px",pointerEvents:"none"},d=Object.assign({},l);return d.color="#33adcc",n().createElement("div",null,n().createElement("canvas",{style:{backgroundColor:"rgb(0,0,0,0)",width:"100%",height:"100%",display:"block",position:"absolute",zIndex:"1"},ref:"canvasRef",onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave}),n().createElement("div",{className:"interactive-overlay-popup",style:e,ref:"overlayRef"},n().createElement("div",{style:l},this.state.overlaySubComp),n().createElement("div",{style:d},"#",this.state.overlayElement),t))}});var P=320;const W=n().createClass({displayName:"RenderFrameNumber",getInitialState:function(){return this.canvasRef=null,null},componentDidMount:function(){var t=document.getElementById("onairBody");t&&t.appendChild(this.refs.canvasRef)},componentWillUnmount:function(){},setFrameNumber:function(t){this.renderFrame(t)},renderFrame:function(t){t++;var e=w().findDOMNode(this.refs.canvasRef);if(e){var i=e.getContext("2d");i.clearRect(0,0,P,"1"),i.lineWidth=1,i.fillStyle="rgb(0,0,0,1.0)",i.fillRect(0,0,P,"1"),i.fillStyle="rgb(255,255,255,1.0)";for(var o=0;o<32;o++)t&1<<o&&i.fillRect(10*o,0,8,"1")}},render:function(){return n().createElement("canvas",{style:{backgroundColor:"rgb(0,0,0,1.0)",width:P+"px",height:"1px",display:"block",position:"absolute",zIndex:"1"},width:P+"px",height:"1px",ref:"canvasRef"})}});var F=i(76302),V=i(89126),Y=i(9769);const X=n().createClass({displayName:"VideoPreviewForOnair",getInitialState:function(){return this.intervalHandler=null,this.referenceFrame=window,{videoType:"",red5Host:"",red5Name:"",red5Port:"",red5App:"",videoURL:"",pictureURL:"",deviceVideo:"",deviceAudio:"",mutePreviewAudio:!1}},componentDidMount:function(){try{for(;this.referenceFrame&&!this.referenceFrame.SingularPreviewSettings&&this.referenceFrame!=window.top;)this.referenceFrame=this.referenceFrame.parent}catch(t){this.referenceFrame=void 0}this.intervalHandler=setInterval(function(){var t=this.referenceFrame;void 0!==t&&t.SingularPreviewSettings&&(this.state.videoType==t.SingularPreviewSettings.videoType&&this.state.red5Host==t.SingularPreviewSettings.red5Host&&this.state.red5Name==t.SingularPreviewSettings.red5Name&&this.state.red5Port==t.SingularPreviewSettings.red5Port&&this.state.red5App==t.SingularPreviewSettings.red5App&&this.state.videoURL==t.SingularPreviewSettings.videoURL&&this.state.pictureURL==t.SingularPreviewSettings.pictureURL&&this.state.deviceVideo==t.SingularPreviewSettings.deviceVideo&&this.state.deviceAudio==t.SingularPreviewSettings.deviceAudio&&this.state.mutePreviewAudio==t.SingularPreviewSettings.mutePreviewAudio||this.setState({videoType:t.SingularPreviewSettings.videoType,red5Host:t.SingularPreviewSettings.red5Host,red5Name:t.SingularPreviewSettings.red5Name,red5Port:t.SingularPreviewSettings.red5Port,red5App:t.SingularPreviewSettings.red5App,videoURL:t.SingularPreviewSettings.videoURL,pictureURL:t.SingularPreviewSettings.pictureURL,deviceVideo:t.SingularPreviewSettings.deviceVideo,deviceAudio:t.SingularPreviewSettings.deviceAudio,mutePreviewAudio:t.SingularPreviewSettings.mutePreviewAudio}))}.bind(this),250)},componentWillUnmount:function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},shouldComponentUpdate:function(t,e){return!Y.compareObject(t,this.props)||!Y.compareObject(e,this.state)},play:function(){this.refs.videoPreview&&this.refs.videoPreview.play&&this.refs.videoPreview.play()},pause:function(){this.refs.videoPreview&&this.refs.videoPreview.pause&&this.refs.videoPreview.pause()},close:function(){this.refs.videoPreview&&this.refs.videoPreview.close&&this.refs.videoPreview.close()},render:function(){return n().createElement(V.A,{ref:"videoPreview",videoType:this.state.videoType,red5Host:this.state.red5Host,red5Name:this.state.red5Name,red5Port:this.state.red5Port,red5App:this.state.red5App,videoURL:this.state.videoURL,pictureURL:this.state.pictureURL,deviceVideo:this.state.deviceVideo,deviceAudio:this.state.deviceAudio,muted:this.state.mutePreviewAudio,zIndex:this.props.zIndex})}});var j=i(25160),B=i.n(j),G=i(87567),U=i.n(G),Z=i(24113),z=i.n(Z),H=i(51163),K=i(47500),J=i.n(K),q=i(78904),Q=i.n(q);const tt=n().createClass({displayName:"WidgetTextVer1",getInitialState:function(){return this.textElement="",this.measureText="",this.currentFontFamily="",this.currentJson=null,this.widgetWidth=0,this.widgetHeight=0,this.WidgetParentDivRef=null,null},onSingularInit:function(){},onSingularValue:function(t){if(t&&(this.updateWidgetDimensions(),this.currentJson=t,void 0!==t.font)){var e="";void 0!==t.text&&(e=t.text),this.textElement.text(e);var i=this;if(t.font.fontData.family!=this.currentFontFamily&&(this.currentFontFamily=t.font.fontData.family,t.font.fontData))if(this.textElement.css("font-family",t.font.fontData.family),this.measureText.css("font-family",t.font.fontData.family),1==x.A.LoadFont(t.font.fontData,this.props.iframeName,this.props.onWebFontActive)){this.textElement.css("visibility","hidden");var o=new(Q())(t.font.fontData.family);i=this,o.load(null,7e3).then(function(){i.textElement.css("visibility","inherit")},function(){})}else this.textElement.css("visibility","inherit");var n={};if(void 0!==t.size&&void 0!==t.sizeUnit&&("vh"==t.sizeUnit?n["font-size"]=Math.round(Number(t.size)*this.widgetHeight/100)+"px":n["font-size"]=t.size+t.sizeUnit),t.font.bold?n["font-weight"]="bold":n["font-weight"]="",t.font.italic?n["font-style"]="italic":n["font-style"]="",t.font.underline?n["text-decoration"]="underline":n["text-decoration"]="",void 0!==t.font.alignment?n["text-align"]=t.font.alignment:n["text-align"]="left",void 0!==t.color){var s=t.color;n.color="rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")"}else n.color="white";void 0!==t.letterSpacing?n.letterSpacing=t.letterSpacing+"px":n.letterSpacing="0px",void 0!==t.wordSpacing?n.wordSpacing=t.wordSpacing+"px":n.wordSpacing="0px",void 0!==t.indent?(n.textIndent=t.indent+"px",t.indent<0?n.paddingLeft=-t.indent+"px":n.paddingLeft="0px"):(n.textIndent="0px",n.paddingLeft="0px"),n.position="absolute";var a;a=void 0===t.verticalAlignment||"top"==t.verticalAlignment?0:"middle"==t.verticalAlignment?50:100,n.top=a+"%",n.transform="translateY("+-a+"%)",void 0!==t.wordSpacing?n.wordSpacing=t.wordSpacing+"px":n.wordSpacing="0px",void 0!==t.transform?n.textTransform=t.transform:n.textTransform="none";var r="normal";if(void 0!==t.lineHeight)switch(t.lineHeight){case"normal":default:r="normal";break;case"single":r=1;break;case"s1.15":r=1.15;break;case"s1.5":r=1.5;break;case"double":r=2;break;case"custom":r=parseFloat(t.lineHeightCustom)/100}switch(n.lineHeight=r,t.overflow){case"clip":default:n.overflow="hidden",n["text-overflow"]="clip",n["white-space"]="pre",n["overflow-wrap"]="normal",n["word-break"]="normal";break;case"ellipsis":n.overflow="hidden",n["text-overflow"]="ellipsis",n["white-space"]="pre",n["overflow-wrap"]="normal",n["word-break"]="normal";break;case"wrapWord":n.overflow="hidden",n["text-overflow"]="clip",n["white-space"]="pre-wrap",n["overflow-wrap"]="normal",n["word-break"]="normal";break;case"wrapLetter":n.overflow="hidden",n["text-overflow"]="clip",n["white-space"]="pre-wrap",n["overflow-wrap"]="break-all",n["word-break"]="break-all";break;case"adjustLetterSize":case"adjustLetterWidth":n.overflow="visible",n["text-overflow"]="clip",n["white-space"]="pre",n["overflow-wrap"]="normal",n["word-break"]="normal",this.calculateTextDimensions(e,n,t)}if(n.width="100%",this.textElement.css(n),t.shadowActive){var l=t.shadowDistance*Math.cos(t.shadowDirection*Math.PI/180),d=t.shadowDistance*Math.sin(t.shadowDirection*Math.PI/180),p=t.shadowBlur;s=t.shadowColor,this.textElement.css("text-shadow",l+"px "+d+"px "+p+"px rgba("+s.r+", "+s.g+", "+s.b+","+s.a+")")}else this.textElement.css("text-shadow","none")}},onSingularButton:function(){},onSingularStyles:function(){},calculateTextDimensions:function(t,e,i){this.measureText.text(t),this.measureText.css(e);var o=$(this.measureText).outerWidth(),n=($(this.measureText).outerHeight(),1*this.widgetWidth/o);n<1&&("adjustLetterWidth"==i.overflow?e.transform+=" scale("+n+", 1.0)":e.transform+=" scale("+n+", "+n+")",e["transform-origin"]="0% 50%")},componentDidMount:function(){this.textElement=$(this.textElementRef),this.textElement.css("visibility","hidden"),this.measureText=$(this.measureTextRef),this.measureText.css("visibility","hidden"),this.rebuildTextObject()},componentDidUpdate:function(){this.rebuildTextObject()},rebuildTextObject:function(){null===this.currentJson||"vh"!=this.currentJson.sizeUnit&&"adjustLetterWidth"!=this.currentJson.overflow&&"adjustLetterSize"!=this.currentJson.overflow||this.onSingularValue(this.currentJson)},updateWidgetDimensions:function(){var t=this.props.widgetLayout.width,e=this.props.widgetLayout.height;return(this.widgetWidth!=t||this.widgetHeight!=e)&&(this.widgetWidth=t,this.widgetHeight=e,!0)},render:function(){var t=this;return n().createElement("div",{id:"WidgetTextParent",style:{width:"100%",height:"100%"},ref:function(e){t.WidgetParentDivRef=e}},n().createElement("div",{id:"text"+this.props.id,ref:function(e){t.textElementRef=e}}),n().createElement("div",{id:"measureText"+this.props.id,ref:function(e){t.measureTextRef=e}}))}});var et=i(52566),it=i.n(et),ot=i(9769),nt=i(80448),st=new Map,at=document.createElement("div");at.id="MeasureTextWidget",at.style.visibility="hidden",at.style.position="absolute",document.body.appendChild(at);var rt=document.createElement("div");rt.id="MeasureTextLayout",rt.style.visibility="hidden",rt.style.position="absolute",document.body.appendChild(rt);const lt=n().createClass({displayName:"WidgetTextVer2",getInitialState:function(){return this.currentFontFamily=void 0,this.currentFontWeight=void 0,this.currentJson=null,this.widgetWidth=0,this.widgetHeight=0,this.textElementRef=null,this.textElementVisibility=null,this.automaticTextDirection=void 0,null},onSingularInit:function(t){this.automaticTextDirection=t.automaticTextDirection},setTextVisibilty:function(t){this.textElementRef&&this.textElementVisibility!=t&&(this.textElementVisibility=t,this.textElementRef.style.visibility=t,this.textElementRef.style.opacity="hidden"==t?0:100)},fontHasBeenLoaded:function(t){this.props.onWebFontActive&&t&&this.props.onWebFontActive(),this.setTextVisibilty("inherit");var e=this.currentJson;this.currentJson=null,this.onSingularValue(e)},onSingularValue:function(t){if(t&&(!this.currentJson||!ot.compareObject(this.currentJson,t))&&(this.currentJson=ot.extend(!0,t),null!=!t.font||this.currentFontFamily)){if(t.font&&(t.font.fontData.family!=this.currentFontFamily||t.font.fontData.weight!=this.currentFontWeight)){if(this.currentFontFamily=t.font.fontData.family,this.currentFontWeight=t.font.fontData.weight,1==x.A.LoadFont(t.font.fontData,this.props.iframeName,this.fontHasBeenLoaded))return void(this.textElementRef&&this.setTextVisibilty("hidden"));this.textElementRef&&this.setTextVisibilty("inherit")}if(this.textElementRef){var e=1,i="";if(void 0!==t.text&&null!==t.text&&(e=(i=t.text.toString()).split(/(?:\r\n|\r|\n)/g).length),0!==i.length&&i.trim()){this.setTextVisibilty("inherit");var o=!1,n=i.trim();0==n.indexOf("<html>")&&n.lastIndexOf("</html>")==n.length-7&&((n=n.substring(6,n.length-7)).length&&"\n"==n[0]&&(n=n.substring(1)),o=!0),o?(this.textElementRef.textContent=null,this.textElementRef.innerHTML=n):(this.textElementRef.innerHTML=null,this.textElementRef.textContent=i);var s={};s["font-family"]='"'+this.currentFontFamily+'"',this.currentFontWeight&&(s["font-weight"]=this.currentFontWeight);var a="normal";if(void 0!==t.lineHeight)switch(t.lineHeight){case"normal":default:a="normal";break;case"single":a=1;break;case"s1.15":a=1.15;break;case"s1.5":a=1.5;break;case"double":a=2;break;case"custom":var r=parseFloat(t.lineHeightCustom);a=isNaN(r)?1.15:r/100}s["line-height"]=a;var l=x.A.MeasureFontDimension(t.font.fontData,a);if(l){void 0!==t.minimumOfLines&&null!=t.maximumOfLines||(t.minimumOfLines=e,t.maximumOfLines=e);var d=0;parseInt(t.minimumOfLines)>0&&(d=parseInt(t.minimumOfLines));var p=99999999;if(parseInt(t.maximumOfLines)>0&&(p=parseInt(t.maximumOfLines)),d>p&&(p=d),d>e&&(e=d),p<e&&(e=p),t.font.bold?s["font-weight"]="bold":this.currentFontWeight?s["font-weight"]=this.currentFontWeight:s["font-weight"]="",t.font.italic?s["font-style"]="italic":s["font-style"]="",t.font.underline?s["text-decoration"]="underline":s["text-decoration"]="","auto"===this.automaticTextDirection&&"left"===t.font.alignment?s["text-align"]="start":"auto"===this.automaticTextDirection&&"right"===t.font.alignment?s["text-align"]="end":void 0!==t.font.alignment?s["text-align"]=t.font.alignment:s["text-align"]="left",void 0!==t.textDirection&&(s.direction=t.textDirection),void 0!==t.color){var c=nt.convertToColor(t.color);s.color="rgba("+c.r+", "+c.g+", "+c.b+", "+c.a+")"}else s.color="white";void 0!==t.letterSpacing?s["letter-spacing"]=t.letterSpacing+"px":s["letter-spacing"]="0px",void 0!==t.wordSpacing?s["word-spacing"]=t.wordSpacing+"px":s["word-spacing"]="0px",void 0!==t.indent?(s["text-indent"]=t.indent+"px",t.indent<0?s["padding-left"]=-t.indent+"px":s["padding-left"]="0px"):(s["text-indent"]="0px",s["padding-left"]="0px"),s.position="absolute";var h=0;h=void 0===t.verticalAlignment||"top"==t.verticalAlignment?0:"middle"==t.verticalAlignment?50:100,s.top=h+"%",t.verticalAdjustment&&(h+=Number(t.verticalAdjustment)),s.transform="translateY("+-h+"%)",void 0!==t.wordSpacing?s["word-spacing"]=t.wordSpacing+"px":s["word-spacing"]="0px",s["text-transform"]="none",s["font-variant"]="normal",void 0!==t.transform&&("small-caps"===t.transform?s["font-variant"]="small-caps":s["text-transform"]=t.transform);var u=this.props.widgetLayout.height/l.lineHeight/e,m=Math.round(100*u)+"px";s.width="",s.display="",s["text-overflow"]="",s["white-space"]="",s["overflow-wrap"]="",s["word-break"]="",s.overflow="visible",s["font-size"]=m;var f=1;if("adjustLetterSize"==t.overflow||"adjustLetterWidth"==t.overflow){var v=(l.lineHeight-l.offset)*u;s["text-overflow"]="clip",s["white-space"]="pre",s["overflow-wrap"]="normal",s["word-break"]="normal",f=this.calculateTextDimensions(i,s,t,v,o)}else if(s.width="100%","wrapWord"==t.overflow||"wrapLetter"==t.overflow){if(s["text-overflow"]="clip",s["white-space"]="pre-line","wrapWord"==t.overflow&&(s["overflow-wrap"]="normal",s["word-break"]="normal"),"wrapLetter"==t.overflow&&(s["overflow-wrap"]="break-all",s["word-break"]="break-all"),d!=p){o?(rt.textContent=null,rt.innerHTML=i):(rt.innerHTML=null,rt.textContent=i),Object.assign(rt.style,s),rt.style.width=this.props.widgetLayout.width+"px";for(var g=d;g<=p;g++){var y=this.props.widgetLayout.height/l.lineHeight/g;if(m=Math.round(100*y)+"px",this.doesTextFix(m))break}s["font-size"]=m}}else switch(t.overflow){case"clip":default:s["text-overflow"]="clip",s["white-space"]="pre",s["overflow-wrap"]="normal",s["word-break"]="normal";break;case"ellipsis":s.overflow="hidden",1==e?(s["text-overflow"]="ellipsis",s["white-space"]="pre",s["overflow-wrap"]="normal",s["word-break"]="normal"):(s.display="-webkit-box",s["-webkit-box-orient"]="vertical",s["-webkit-line-clamp"]=e.toString(),s["text-overflow"]="ellipsis",s["white-space"]="pre-wrap",s["overflow-wrap"]="normal",s["word-break"]="normal")}var w=0,b=this.props.widgetLayout.width,I=0,S=this.props.widgetLayout.height;if(void 0!==t.paddingActive&&1==t.paddingActive&&(t.paddingLeft&&(w-=this.props.widgetLayout.width*t.paddingLeft/200),t.paddingRight&&(b+=this.props.widgetLayout.width*t.paddingRight/200),t.paddingTop&&(I-=this.props.widgetLayout.height*t.paddingTop/200),t.paddingBottom&&(S+=this.props.widgetLayout.height*t.paddingBottom/200)),w/=f,b/=f,s.clip="rect("+I+"px,"+b+"px,"+S+"px,"+w+"px)",s["max-height"]="100%",t.shadowActive){var T=t.shadowDistance*Math.cos(t.shadowDirection*Math.PI/180),R=t.shadowDistance*Math.sin(t.shadowDirection*Math.PI/180),k=t.shadowBlur,A=nt.convertToColor(t.shadowColor);s["text-shadow"]=T+"px "+R+"px "+k+"px rgba("+A.r+", "+A.g+", "+A.b+","+A.a+")"}else s["text-shadow"]="none";Object.assign(this.textElementRef.style,s)}}else this.setTextVisibilty("hidden")}}},onSingularButton:function(){},onSingularStyles:function(){},calculateTextDimensions:function(t,e,i,o,n){var s=it().str(t);s=it().str(this.props.widgetLayout.width,s),s=it().str(this.props.widgetLayout.height,s),s=it().str(e["font-family"],s),s=it().str(e["font-size"],s),s=it().str(e["font-style"],s),s=it().str(e["font-weight"],s),s=it().str(e["letter-spacing"],s),s=it().str(e["line-height"],s),s=it().str(e["overflow-wrap"],s),s=it().str(e["padding-left"],s),s=it().str(e["text-decoration"],s),s=it().str(e["text-transform"],s),s=it().str(e.transform,s),s=it().str(e["white-space"],s),s=it().str(e["word-spacing"],s),s=it().str(e["word-break"],s);var a=st.get(s);if(void 0===a){n?(at.textContent=null,at.innerHTML=t):(at.innerHTML=null,at.textContent=t),Object.assign(at.style,e);var r=at.getBoundingClientRect();a={width:r.width,height:r.height},st.size<1e5&&st.set(s,a)}var l=1*this.props.widgetLayout.width/a.width;if(l<1){"adjustLetterWidth"==i.overflow?e.transform+=" scale("+l+", 1.0)":e.transform+=" scale("+l+", "+l+")",e.width=a.width+"px";var d=a.height;d>this.props.widgetLayout.height&&(d=this.props.widgetLayout.height);var p=0;return void 0===i.verticalAlignment||"top"==i.verticalAlignment?p=0:"middle"==i.verticalAlignment?p=50:"bottom"==i.verticalAlignment?p=100:"baseline"==i.verticalAlignment&&(p=o/d*100),e["transform-origin"]="0% "+p+"%",l}return e.width="100%",1},componentDidMount:function(){this.setTextVisibilty("hidden"),this.rebuildTextObject()},shouldComponentUpdate:function(t){return!ot.compareObject(t,this.props)},componentDidUpdate:function(){this.rebuildTextObject()},rebuildTextObject:function(){if(null!==this.currentJson&&("adjustLetterWidth"==this.currentJson.overflow||"adjustLetterSize"==this.currentJson.overflow||this.widgetWidth!=this.props.widgetLayout.width||this.widgetHeight!=this.props.widgetLayout.height)){var t=this.currentJson;this.currentJson=null,this.onSingularValue(t),this.widgetWidth=this.props.widgetLayout.width,this.widgetHeight=this.props.widgetLayout.height}},doesTextFix:function(t){return rt.style["font-size"]=t,rt.clientHeight<=this.props.widgetLayout.height},render:function(){var t=this;return n().createElement("div",{dir:"auto",ref:function(e){t.textElementRef=e}})}});var dt=i(9769);const pt=n().createClass({displayName:"WidgetImage",getInitialState:function(){return this.imageURL="",this.objectFit="contain",this.shift=0,this.flipX=!1,this.flipY=!1,this.imageElement=null,this.originalImageWidth=0,this.originalImageHeight=0,this.imageIsLoading=!1,null},onSingularInit:function(){var t=this;this.imageElement.addEventListener("load",function(e){H.A.Complete(t.imageURL,"ok"),t.imageIsLoading=!1,this.originalImageWidth=0,this.originalImageHeight=0;var i=this.naturalWidth,o=this.naturalHeight;if(0==i||0==o){var n=function(t){var e=parseInt(t,10);return Number.isInteger(e)?e:0},s=this.src;if(-1==s.indexOf("assets.singular.live")||-1==s.indexOf(".svg"))return;var a=s.lastIndexOf("_w");if(-1==a)return;var r=s.substr(a+2);if(!r)return;i=n(r);var l=r.indexOf("h");if(-1==l)return;o=n(r.substr(l+1))}i&&o&&t.imageElement&&(0!=dt.isIOS()||window.singularReframeActive||(t.imageElement.style.transition="opacity 0.25s"),t.imageElement.style.opacity=1,t.originalImageWidth=i,t.originalImageHeight=o,t.calculateImageLayout())}),this.imageElement.addEventListener("error",function(e){t.imageURL&&console.log("Failed to download image ",t.imageURL),H.A.Complete(t.imageURL,"error"),t.imageIsLoading=!1})},onSingularValue:function(t){if(t){if(void 0!==t.image&&t.image!=this.imageURL){1==this.imageIsLoading&&H.A.Complete(this.imageURL,"Cancel"),this.imageURL=t.image,this.imageElement.style.opacity=0,this.imageElement.style.transition="opacity 0s";var e=this.selectPreferredResolution(this.imageURL);H.A.Start(this.imageURL),this.imageIsLoading=!0,this.imageElement.src=e}var i=!1;void 0!==t.shift&&t.shift!=this.shift&&(this.shift=t.shift,i=!0),void 0!==t.objectFit&&t.objectFit!=this.objectFit&&(this.objectFit=t.objectFit,i=!0),void 0!==t.flipX&&t.flipX!=this.flipX&&(this.flipX=t.flipX,i=!0),void 0!==t.flipY&&t.flipY!=this.flipY&&(this.flipY=t.flipY,i=!0),1==i&&this.calculateImageLayout()}},calculateImageLayout:function(){if(null!=this.imageElement){var t,e,i,o,n=this.props.widgetLayout.width,s=this.props.widgetLayout.height;if("cover"!=this.objectFit&&"contain"!=this.objectFit||0==this.originalImageWidth||0==this.originalImageHeight)t=0,e=0,i=n,o=s;else{var a=this.originalImageHeight/this.originalImageWidth;this.originalImageWidth/n>=this.originalImageHeight/s?"contain"==this.objectFit?(t=(n-(i=n))/2,e=(s-(o=n*a))/2*(1+this.shift/100)):(t=(n-(i=(o=s)/a))/2*(1+this.shift/100),e=(s-o)/2):"contain"==this.objectFit?(o=s,t=(n-(i=s/a))/2*(1+this.shift/100),e=(s-o)/2):(t=(n-(i=n))/2,e=(s-(o=i*a))/2*(1+this.shift/100))}this.imageElement.style.left=t+"px",this.imageElement.style.top=e+"px",this.imageElement.style.width=i+"px",this.imageElement.style.height=o+"px";var r=1,l=1;1==this.flipX&&(r=-1),1==this.flipY&&(l=-1),this.imageElement.style.transform=1!=r||1!=l?"scale("+r+","+l+")":"none"}},selectPreferredResolution:function(t){var e=Math.round(this.props.widgetLayout.width),i=Math.round(this.props.widgetLayout.height),o=function(t){for(var e=[64,128,256,512,768,1024,1536,2048,3072,4096],i=0;i<e.length;i++)if(e[i]>t)return e[i];return 4096};return dt.addFitInToImageURL(t,o(e),o(i))},onSingularButton:function(){},onSingularStyles:function(){},shouldComponentUpdate:function(t){return!dt.compareObject(t,this.props)},componentDidUpdate:function(){this.calculateImageLayout()},render:function(){var t=this;return n().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",display:"block",overflow:"hidden"}},n().createElement("img",{style:{width:"100%",height:"100%",position:"absolute",display:"block",opacity:"0"},ref:function(e){t.imageElement=e}}))}});var ct=i(72761),ht=i.n(ct),ut=i(9769),mt=i(80448);const ft=n().createClass({displayName:"WidgetRectangle",getInitialState:function(){return this.SVGdraw=null,this.SVGpath=null,this.currentJson=null,this.drawingSurfaceRef=null,null},onSingularInit:function(){},onSingularValue:function(t){t&&(this.currentJson=ut.extend(!0,t),this.rebuildGeometry(t))},onSingularButton:function(){},onSingularStyles:function(){},componentDidMount:function(){this.SVGdraw=ht()(w().findDOMNode(this.drawingSurfaceRef)).size("100%","100%"),this.SVGpath=this.SVGdraw.path(""),this.SVGpath.attr({"fill-rule":"evenodd"}),isNaN(this.props.widgetLayout.width)||isNaN(this.props.widgetLayout.height)||this.SVGdraw.viewbox(-this.props.widgetLayout.width/2,-this.props.widgetLayout.height/2,this.props.widgetLayout.width,this.props.widgetLayout.height)},shouldComponentUpdate:function(t){return!ut.compareObject(t,this.props)},componentDidUpdate:function(){this.SVGdraw.viewbox(-this.props.widgetLayout.width/2,-this.props.widgetLayout.height/2,this.props.widgetLayout.width,this.props.widgetLayout.height),this.currentJson&&this.rebuildGeometry(this.currentJson)},rebuildGeometry:function(t){var e=function(t){var e=parseFloat(t);return isNaN(e)?0:e},i=this.props.widgetLayout.width,o=this.props.widgetLayout.height,n=t.bevelSizeUnit||"%",s=t.outlineWidthUnit||"%",a=0;void 0!==t.bevelSize&&(a=e(t.bevelSize)),"%"==n&&(a=a*i/100);var r=0;void 0!==t.outlineWidth&&(r=e(t.outlineWidth)),"%"==s&&(r=r*i/100);var l=1;void 0!==t.width&&(l=e(t.width)/100);var d=i*l,p=1;void 0!==t.height&&(p=e(t.height)/100);var c=o*p,h=0;void 0!==t.strokeWidth&&(h=e(t.strokeWidth));var u=a,m=this.generateRectangle(d-h,c-h,a,u,t.bevelStyle),f=2*r;"outline"==t.renderStyle&&r>0&&d>f&&c>f&&("flat"==t.bevelStyle?a-=r/2:"outside"==t.bevelStyle?u=a-=r:"inside"==t.bevelStyle&&(u=a+r),m+=this.generateRectangle(d-f-h,c-f-h,a,u,t.bevelStyle)),this.SVGdraw.defs().clear();var v,g=mt.generateGradient(this.SVGdraw,t.fillGradient,d,c);h?(v=mt.generateGradient(this.SVGdraw,t.strokeGradient,d,c)).width=h:v={color:"black",opacity:1,width:0},this.SVGpath.plot(m).fill(g).stroke(v);var y=0;switch(t.pivotX){case"left":y=-.5;break;case"center":y=0;break;case"right":y=.5}var w=0;switch(t.pivotY){case"top":w=-.5;break;case"center":w=0;break;case"bottom":w=.5}if(0!=y||0!=w){var b=(i-d)*y,I=(o-c)*w;this.SVGpath.translate(b,I)}else this.SVGpath.translate(0,0)},generateRectangle:function(t,e,i,o,n){if(t<=0||e<=0)return"";var s=t/2,a=e/2,r="";if(i<=0)r=["M",-s,-a,"L",s,-a,"L",s,a,"L",-s,a,"L",-s,-a,"Z"].join(" ");else if(i>s&&(i=s),i>a&&(i=a),o>s&&(o=s),o>a&&(o=a),"flat"==n)r=["M",-s+i,-a,"L",s-i,-a,"L",s,-a+i,"L",s,a-i,"L",s-i,a,"L",-s+i,a,"L",-s,a-i,"L",-s,-a+i,"L",-s+i,-a,"Z"].join(" ");else{if("outside"==n)var l=1;else l=0;r=["M",-s+i,-a,"L",s-i,-a,"A",o,o,0,0,l,s,-a+i,"L",s,a-i,"A",o,o,0,0,l,s-i,a,"L",-s+i,a,"A",o,o,0,0,l,-s,a-i,"L",-s,-a+i,"A",o,o,0,0,l,-s+i,-a,"Z"].join(" ")}return r},render:function(){var t=this;return n().createElement("svg",{style:{width:"100%",height:"100%",display:"block"},ref:function(e){t.drawingSurfaceRef=e}})}});var vt=i(9769),gt=i(80448);const yt=n().createClass({displayName:"WidgetCircle",getInitialState:function(){return this.SVGdraw=null,this.SVGpath=null,this.currentJson=null,this.drawingSurfaceRef=null,null},onSingularInit:function(){},onSingularValue:function(t){t&&(this.currentJson=vt.extend(!0,t),this.rebuildGeometry(t))},onSingularButton:function(){},onSingularStyles:function(){},componentDidMount:function(){this.SVGdraw=ht()(w().findDOMNode(this.drawingSurfaceRef)).size("100%","100%"),this.SVGpath=this.SVGdraw.path(""),this.SVGpath.attr({"fill-rule":"evenodd"}),isNaN(this.props.widgetLayout.width)||isNaN(this.props.widgetLayout.height)||this.SVGdraw.viewbox(-this.props.widgetLayout.width/2,-this.props.widgetLayout.height/2,this.props.widgetLayout.width,this.props.widgetLayout.height)},shouldComponentUpdate:function(t){return!vt.compareObject(t,this.props)},componentDidUpdate:function(){this.SVGdraw.viewbox(-this.props.widgetLayout.width/2,-this.props.widgetLayout.height/2,this.props.widgetLayout.width,this.props.widgetLayout.height),this.currentJson&&this.rebuildGeometry(this.currentJson)},rebuildGeometry:function(t){var e=function(t){var e=parseFloat(t);return isNaN(e)?0:e},i=this.props.widgetLayout.width,o=this.props.widgetLayout.height;1==t.keepAspect&&(i<o?o=i:o<i&&(i=o));var n=1;void 0!==t.radius&&(n=e(t.radius)/100),i*=n,o*=n;var s=0;void 0!==t.holeSize&&(s=e(t.holeSize)/100);var a=0;void 0!==t.startAngle&&(a=e(t.startAngle));var r=0;void 0!==t.startAngle&&(r=e(t.endAngle));var l=0;void 0!==t.strokeWidth&&(l=e(t.strokeWidth));var d=this.generateArc(a,r,i-l,o-l,s);this.SVGdraw.defs().clear();var p,c=gt.generateGradient(this.SVGdraw,t.fillGradient,i,o);l?(p=gt.generateGradient(this.SVGdraw,t.strokeGradient,i,o)).width=l:p={color:"black",opacity:1,width:0},this.SVGpath.plot(d).fill(c).stroke(p)},polarToCartesian:function(t,e,i){var o=(i-90)*Math.PI/180;return{x:t*Math.cos(o),y:e*Math.sin(o)}},generateArc:function(t,e,i,o,n){if(t==e||n>=1)return"";t>=360&&(t%=360),e>=360&&(e%=360);var s=i/2,a=o/2;t>=e&&(e+=360);var r=e-t<=180?0:1,l=t<e?0:1,d="L";e-t>=360&&(d="M",e=t+359.99);var p=this.polarToCartesian(s,a,e),c=this.polarToCartesian(s,a,t),h="";if(0==n)h=["M",0,0,d,p.x,p.y,"A",s,a,0,r,l,c.x,c.y,"Z"].join(" ");else{var u=s*n,m=a*n,f=this.polarToCartesian(u,m,e),v=this.polarToCartesian(u,m,t);h=["M",f.x,f.y,d,p.x,p.y,"A",s,a,0,r,l,c.x,c.y,d,v.x,v.y,"A",u,m,0,r,0==l?1:0,f.x,f.y,"Z"].join(" ")}return h},render:function(){var t=this;return n().createElement("svg",{style:{width:"100%",height:"100%",display:"block"},ref:function(e){t.drawingSurfaceRef=e}})}});var wt=i(9769);const bt=n().createClass({displayName:"WidgetGradient",getInitialState:function(){return null},shouldComponentUpdate:function(t){return!wt.compareObject(t,this.props)},onSingularInit:function(){},onSingularValue:function(t){if(t&&void 0!==t.css_string){var e=w().findDOMNode(this.drawingSurfaceRef);e&&(e.setAttribute("style",t.css_string),e.style.width="100%",e.style.height="100%")}},onSingularButton:function(t){if(t)switch(t.id){case"ColorZilla":window.open("http://www.colorzilla.com/gradient-editor/");break;case"CSSmatic":window.open("http://www.cssmatic.com/gradient-generator");break;case"Angrytools":window.open("http://angrytools.com/gradient/")}},onSingularStyles:function(){},componentDidMount:function(){},render:function(){var t=this;return n().createElement("div",{ref:function(e){t.drawingSurfaceRef=e}})}}),It=n().createClass({displayName:"WidgetVideoClip",getInitialState:function(){return this.videoDomRef=null,this.videoFile="",this.objectFit=void 0,this.shift=void 0,this.opacity=void 0,this.volume=void 0,this.autoplay=void 0,this.loop=void 0,this.videoElement=null,this.originalVideoWidth=0,this.originalVideoHeight=0,this.videoShouldPlay=!1,null},shouldComponentUpdate:function(t,e){return t.widgetLayout.width!=this.props.widgetLayout.width||t.widgetLayout.height!=this.props.widgetLayout.height},onSingularInit:function(){if(this.videoElement=w().findDOMNode(this.videoDomRef),this.videoElement){var t=this;this.videoElement.addEventListener("loadedmetadata",function(){t.originalVideoWidth=this.videoWidth,t.originalVideoHeight=this.videoHeight,t.resizevideo(),t.props.sendCustomMessage&&t.props.sendCustomMessage({event:"loadedmetadata",videoWidth:this.videoWidth,videoHeight:this.videoHeight,duration:this.duration})}),t.props.sendCustomMessage&&(this.videoElement.addEventListener("error",function(){t.props.sendCustomMessage({event:"error",code:this.error.code,message:this.error.message})}),this.videoElement.addEventListener("canplay",function(){t.props.sendCustomMessage({event:"canplay"})}),this.videoElement.addEventListener("playing",function(){t.props.sendCustomMessage({event:"playing",currentTime:this.currentTime})}),this.videoElement.addEventListener("pause",function(){t.props.sendCustomMessage({event:"pause",currentTime:this.currentTime})}),this.videoElement.addEventListener("ended",function(){t.props.sendCustomMessage({event:"ended",currentTime:this.currentTime})}))}},onSingularValue:function(t){if(t&&this.videoElement){void 0!==t.opacity&&t.opacity!=this.opacity&&(this.opacity=t.opacity,this.videoElement.style.opacity=this.opacity/100),void 0!==t.volume&&t.volume!=this.volume&&(this.volume=t.volume,this.videoElement.volume=this.volume/100),void 0!==t.autoplay&&t.autoplay!=this.autoplay&&(this.autoplay=t.autoplay,this.videoElement.autoplay=this.autoplay,this.autoplay&&(this.videoElement.play(),this.videoShouldPlay=!0)),void 0!==t.loop&&t.loop!=this.loop&&(this.loop=t.loop,this.videoElement.loop=this.loop),void 0!==t.videoFile&&t.videoFile!=this.videoFile&&(this.videoFile=t.videoFile,this.setVideoSource(this.videoFile));var e=!1;void 0!==t.shift&&t.shift!=this.shift&&(this.shift=t.shift,e=!0),void 0!==t.objectFit&&t.objectFit!=this.objectFit&&(this.objectFit=t.objectFit,e=!0),1==e&&this.resizevideo()}},onSingularButton:function(t){if(null!=this.videoElement&&void 0!==t)switch(t.id){case"start":this.videoElement.pause(),this.videoElement.currentTime=0,this.videoElement.play(),this.videoShouldPlay=!0;break;case"play":this.videoElement.play(),this.videoShouldPlay=!0;break;case"pause":this.videoElement.pause(),this.videoShouldPlay=!1;break;case"seek0":this.videoElement.pause(),this.videoElement.currentTime=0,this.videoShouldPlay=!1}},onSingularStateChanged:function(t){t&&t.animation&&("In"==t.animation?this.videoShouldPlay&&this.videoElement.play():this.videoElement.pause())},resizevideo:function(){if(this.videoElement){var t,e,i,o,n=this.props.widgetLayout.width,s=this.props.widgetLayout.height;if("cover"!=this.objectFit&&"contain"!=this.objectFit||0==this.originalVideoWidth||0==this.originalVideoHeight)t=0,e=0,i=n,o=s;else{var a=this.originalVideoHeight/this.originalVideoWidth;this.originalVideoWidth/n>=this.originalVideoHeight/s?"contain"==this.objectFit?(t=(n-(i=n))/2,e=(s-(o=n*a))/2*(1+this.shift/100)):(t=(n-(i=(o=s)/a))/2*(1+this.shift/100),e=(s-o)/2):"contain"==this.objectFit?(o=s,t=(n-(i=s/a))/2*(1+this.shift/100),e=(s-o)/2):(t=(n-(i=n))/2,e=(s-(o=i*a))/2*(1+this.shift/100))}this.videoElement.style.left=t+"px",this.videoElement.style.top=e+"px",this.videoElement.style.width=i+"px",this.videoElement.style.height=o+"px"}},onSingularStyles:function(){},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){this.videoElement=w().findDOMNode(this.videoDomRef),this.resizevideo()},render:function(){var t=this;return n().createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"absolute"}},n().createElement("video",{id:"video",muted:!0,style:{position:"absolute",display:"block",objectFit:"fill"},preload:"auto",ref:function(e){t.videoDomRef=e}}))},setVideoSource:function(t){var e=t.trim();if(!(""!=this.videoElement.canPlayType("video/webm")&&e.endsWith(".webm")||""!=this.videoElement.canPlayType("video/mp4")&&e.endsWith(".mp4")))return""!=this.videoElement.canPlayType("video/mp4")?(1==e.endsWith(".webm")&&(e=e.replace(/webm/g,"mp4")),void this.assignVideoSource(e)):""!=this.videoElement.canPlayType("video/webm")?(1==e.endsWith(".mp4")&&(e=e.replace(/mp4/g,"webm")),void this.assignVideoSource(e)):void this.assignVideoSource(e);this.assignVideoSource(e)},assignVideoSource:function(t){this.videoElement&&(this.videoElement.src=t,this.videoElement.load(),this.autoplay&&(this.videoElement.play(),this.videoShouldPlay=!0))}}),St=n().createClass({displayName:"WidgetVideoClipWithAudio",getInitialState:function(){return this.videoDomRef=null,this.videoFile="",this.objectFit=void 0,this.shift=void 0,this.opacity=void 0,this.volume=void 0,this.autoplay=void 0,this.loop=void 0,this.videoElement=null,this.originalVideoWidth=0,this.originalVideoHeight=0,this.videoShouldPlay=!1,null},shouldComponentUpdate:function(t,e){return t.widgetLayout.width!=this.props.widgetLayout.width||t.widgetLayout.height!=this.props.widgetLayout.height},onSingularInit:function(){if(this.videoElement=w().findDOMNode(this.videoDomRef),this.videoElement){var t=this;this.videoElement.addEventListener("loadedmetadata",function(){t.originalVideoWidth=this.videoWidth,t.originalVideoHeight=this.videoHeight,t.resizevideo(),t.props.sendCustomMessage&&t.props.sendCustomMessage({event:"loadedmetadata",videoWidth:this.videoWidth,videoHeight:this.videoHeight,duration:this.duration})}),t.props.sendCustomMessage&&(this.videoElement.addEventListener("error",function(){t.props.sendCustomMessage({event:"error",code:this.error.code,message:this.error.message})}),this.videoElement.addEventListener("canplay",function(){t.props.sendCustomMessage({event:"canplay"})}),this.videoElement.addEventListener("playing",function(){t.props.sendCustomMessage({event:"playing",currentTime:this.currentTime})}),this.videoElement.addEventListener("pause",function(){t.props.sendCustomMessage({event:"pause",currentTime:this.currentTime})}),this.videoElement.addEventListener("ended",function(){t.props.sendCustomMessage({event:"ended",currentTime:this.currentTime})}))}},onSingularValue:function(t){if(t&&this.videoElement){void 0!==t.opacity&&t.opacity!=this.opacity&&(this.opacity=t.opacity,this.videoElement.style.opacity=this.opacity/100),void 0!==t.volume&&t.volume!=this.volume&&(this.volume=t.volume,this.videoElement.volume=this.volume/100),void 0!==t.autoplay&&t.autoplay!=this.autoplay&&(this.autoplay=t.autoplay,this.videoElement.autoplay=this.autoplay,this.autoplay&&(this.videoElement.play(),this.videoShouldPlay=!0)),void 0!==t.loop&&t.loop!=this.loop&&(this.loop=t.loop,this.videoElement.loop=this.loop),void 0!==t.videoFile&&t.videoFile!=this.videoFile&&(this.videoFile=t.videoFile,this.setVideoSource(this.videoFile));var e=!1;void 0!==t.shift&&t.shift!=this.shift&&(this.shift=t.shift,e=!0),void 0!==t.objectFit&&t.objectFit!=this.objectFit&&(this.objectFit=t.objectFit,e=!0),1==e&&this.resizevideo()}},onSingularButton:function(t){if(null!=this.videoElement&&void 0!==t)switch(t.id){case"start":this.videoElement.pause(),this.videoElement.currentTime=0,this.videoElement.play(),this.videoShouldPlay=!0;break;case"play":this.videoElement.play(),this.videoShouldPlay=!0;break;case"pause":this.videoElement.pause(),this.videoShouldPlay=!1;break;case"seek0":this.videoElement.pause(),this.videoElement.currentTime=0,this.videoShouldPlay=!1}},onSingularStateChanged:function(t){t&&t.animation&&("In"==t.animation?this.videoShouldPlay&&this.videoElement.play():this.videoElement.pause())},resizevideo:function(){if(this.videoElement){var t,e,i,o,n=this.props.widgetLayout.width,s=this.props.widgetLayout.height;if("cover"!=this.objectFit&&"contain"!=this.objectFit||0==this.originalVideoWidth||0==this.originalVideoHeight)t=0,e=0,i=n,o=s;else{var a=this.originalVideoHeight/this.originalVideoWidth;this.originalVideoWidth/n>=this.originalVideoHeight/s?"contain"==this.objectFit?(t=(n-(i=n))/2,e=(s-(o=n*a))/2*(1+this.shift/100)):(t=(n-(i=(o=s)/a))/2*(1+this.shift/100),e=(s-o)/2):"contain"==this.objectFit?(o=s,t=(n-(i=s/a))/2*(1+this.shift/100),e=(s-o)/2):(t=(n-(i=n))/2,e=(s-(o=i*a))/2*(1+this.shift/100))}this.videoElement.style.left=t+"px",this.videoElement.style.top=e+"px",this.videoElement.style.width=i+"px",this.videoElement.style.height=o+"px"}},onSingularStyles:function(){},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){this.videoElement=w().findDOMNode(this.videoDomRef),this.resizevideo()},render:function(){var t=this;return n().createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"absolute"}},n().createElement("video",{id:"video",style:{position:"absolute",display:"block",objectFit:"fill"},preload:"auto",ref:function(e){t.videoDomRef=e}}))},setVideoSource:function(t){var e=t.trim();if(!(""!=this.videoElement.canPlayType("video/webm")&&e.endsWith(".webm")||""!=this.videoElement.canPlayType("video/mp4")&&e.endsWith(".mp4")))return""!=this.videoElement.canPlayType("video/mp4")?(1==e.endsWith(".webm")&&(e=e.replace(/webm/g,"mp4")),void this.assignVideoSource(e)):""!=this.videoElement.canPlayType("video/webm")?(1==e.endsWith(".mp4")&&(e=e.replace(/mp4/g,"webm")),void this.assignVideoSource(e)):void this.assignVideoSource(e);this.assignVideoSource(e)},assignVideoSource:function(t){this.videoElement&&(this.videoElement.src=t,this.videoElement.load(),this.autoplay&&(this.videoElement.play(),this.videoShouldPlay=!0))}});var Tt=i(80448);const Rt=n().createClass({displayName:"WidgetSimpleTicker",getInitialState:function(){return this.shouldAnimationRun=!0,this.tickerMessages=[],this.tickerLoopActive=!0,this.tickerSpeed=10,this.tickerMessagePadding=10,this.tickerHeight=100,this.tickerText="",this.tickerFontSize=null,this.tickerLetterSpacing=0,this.tickerWordSpacing=0,this.separatorActive=!1,this.separatorImage=null,this.separatorHeight=0,this.separatorVerticalOffset=0,this.separatorPreloadImage=new Image,this.runRightToLeft=!0,this.fontIsReady=!1,this.tickerDomElementPool=[],this.tickerDomElements=null,this.tickerDomElementsRef=null,this.currentFontFamily="",this.currentFontWeight=void 0,this.currentJson=null,this.widgetWidth=0,this.widgetHeight=0,this.measureFontDimensions=null,this.measureFontDiv="",this.measureFontSpan="",this.measureFontDivRef=null,this.measureFontSpanRef=null,null},onSingularInit:function(){},onSingularValue:function(t){if(t){this.currentJson=t;var e=!1;if(void 0!==t.font){void 0!==t.height&&(this.tickerHeight!=parseFloat(t.height)&&(e=!0),this.tickerHeight=parseFloat(t.height));var i={};if(t.font.fontData.family!=this.currentFontFamily||t.font.fontData.weight!=this.currentFontWeight){if(this.currentFontFamily=t.font.fontData.family,this.currentFontWeight=t.font.fontData.weight,this.fontIsReady=!1,this.tickerDomElements.css("font-family",'"'+this.currentFontFamily+'"'),this.currentFontWeight&&this.tickerDomElements.css("font-weight",this.currentFontWeight),1==x.A.LoadFont(t.font.fontData,this.props.iframeName,this.fontHasBeenLoaded))return void this.tickerDomElements.css("visibility","hidden");this.tickerDomElements.css("visibility","inherit"),this.fontIsReady=!0}var o=x.A.MeasureFontDimension(t.font.fontData,"normal"),n=null;if(o&&o.lineHeight){var s=this.props.widgetLayout.height*this.tickerHeight/100/o.lineHeight;n=Math.round(100*s)+"px"}else n=null;if(this.tickerFontSize!=n&&(this.tickerFontSize=n,e=!0),i["font-size"]=this.tickerFontSize,t.font.bold?i["font-weight"]="bold":this.currentFontWeight?i["font-weight"]=this.currentFontWeight:i["font-weight"]="",t.font.italic?i["font-style"]="italic":i["font-style"]="",t.font.underline?i["text-decoration"]="underline":i["text-decoration"]="",void 0!==t.color){var a=Tt.convertToColor(t.color);i.color="rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")"}else i.color="white";if(void 0!==t.letterSpacing?(i.letterSpacing=t.letterSpacing+"px",this.tickerLetterSpacing!=t.letterSpacing&&(this.tickerLetterSpacing=t.letterSpacing,e=!0)):i.letterSpacing="0px",void 0!==t.wordSpacing?(i.wordSpacing=t.wordSpacing+"px",this.tickerWordSpacing!=t.wordSpacing&&(this.tickerWordSpacing=t.wordSpacing,e=!0)):i.wordSpacing="0px",i["max-height"]="100%",t.shadowActive){var r=t.shadowDistance*Math.cos(t.shadowDirection*Math.PI/180),l=t.shadowDistance*Math.sin(t.shadowDirection*Math.PI/180),d=t.shadowBlur,p=Tt.convertToColor(t.shadowColor);i["text-shadow"]=r+"px "+l+"px "+d+"px rgba("+p.r+", "+p.g+", "+p.b+","+p.a+")"}else i["text-shadow"]="none";if(i.width="100%",i.height="100%",i["line-height"]="normal",i.display="block",i.position="absolute",i.overflow="hidden",i["text-overflow"]="clip",i["white-space"]="pre",this.tickerDomElements.css(i),void 0!==t.text){if(t.text!=this.tickerText){this.tickerText=t.text;var c=this.tickerMessages.length;this.tickerMessages=t.text.split("\n").filter(function(t){return""!=t}),this.currentMessage=-1,0==c&&0!=this.tickerMessages.length&&(e=!0)}}else this.tickerMessages=[];void 0!==t.speed&&(this.tickerSpeed!=parseFloat(t.speed)&&(e=!0),this.tickerSpeed=parseFloat(t.speed)),void 0!==t.messagePadding&&(this.tickerMessagePadding!=parseFloat(t.messagePadding)&&(e=!0),this.tickerMessagePadding=parseFloat(t.messagePadding)),void 0!==t.direction&&("RightToLeft"==t.direction&&0==this.runRightToLeft&&(this.runRightToLeft=!0,e=!0),"LeftToRight"==t.direction&&1==this.runRightToLeft&&(this.runRightToLeft=!1,e=!0)),void 0!==t.separatorActive&&(1==t.separatorActive&&0==this.separatorActive&&(this.separatorActive=!0,e=!0),0==t.separatorActive&&1==this.separatorActive&&(this.separatorActive=!1,e=!0)),void 0!==t.separatorImage&&this.separatorImage!=t.separatorImage&&(this.separatorPreloadImage.src=t.separatorImage,this.separatorImage=t.separatorImage,e=!0),void 0!==t.separatorHeight&&this.separatorHeight!=parseFloat(t.separatorHeight)&&(this.separatorHeight=parseFloat(t.separatorHeight),e=!0),void 0!==t.separatorVerticalOffset&&this.separatorVerticalOffset!=parseFloat(t.separatorVerticalOffset)&&(this.separatorVerticalOffset=parseFloat(t.separatorVerticalOffset),e=!0),1==e&&this.restartAnimation()}}},onSingularStateChanged:function(t){t&&t.animation&&("In"==t.animation?this.resumeAnimation():this.pauseAnimation())},fontHasBeenLoaded:function(t){this.props.onWebFontActive&&t&&this.props.onWebFontActive(),this.tickerDomElements.css("visibility","inherit"),this.fontIsReady=!0,this.onSingularValue(this.currentJson)},stopAnimation:function(){this.tickerDomElementPool.forEach(function(t){this.poolElementFinished(t)}.bind(this)),this.currentMessage=-1},restartAnimation:function(){this.stopAnimation(),0!=this.fontIsReady&&null!=this.tickerFontSize&&this.addNextMessageToTicker(!0)},pauseAnimation:function(){this.shouldAnimationRun=!1,this.tickerDomElementPool.forEach(function(t,e){t.active&&t.timeline.pause()}),this.props.sendCustomMessage&&this.props.sendCustomMessage({event:"tickerPause"})},resumeAnimation:function(){this.shouldAnimationRun=!0,this.tickerDomElementPool.forEach(function(t,e){t.active&&t.timeline.resume()}),this.props.sendCustomMessage&&this.props.sendCustomMessage({event:"tickerResume"})},addNextMessageToTicker:function(t){if(0!=this.tickerMessages.length){if(this.currentMessage++,this.tickerLoopActive)this.currentMessage%=this.tickerMessages.length;else if(this.currentMessage>=this.tickerMessages.length)return;for(var e=null,i=0,o=this.tickerDomElementPool.length;i<o;i++)if(0==this.tickerDomElementPool[i].active){e=this.tickerDomElementPool[i];break}null==e&&(e=this.addPoolElement()),this.initializePoolElement(e,this.tickerMessages[this.currentMessage],t)}},addPoolElement:function(){var t=$("<span></span>").css({position:"absolute","text-decoration":"inherit",visibility:"hidden"});t.appendTo(this.tickerDomElements);var e={ID:this.tickerDomElementPool.length,cssRule:null,domElement:t,width:0,active:!1,timeline:new TimelineMax};return this.tickerDomElementPool.push(e),e},initializePoolElement:function(t,e,i){var o=this.tickerSpeed*this.props.widgetLayout.width/100;if(!(o<=0)){var n,s=this.tickerMessagePadding*this.props.widgetLayout.width/100,a='<span style="text-decoration: inherit; vertical-align: top; display: inline-block; position: relative; top: '+(1-this.tickerHeight/100)*this.props.widgetLayout.height/2+'px;" >'+e+"</span>";if(1==this.separatorActive&&this.separatorImage&&(0===(n=(n=this.separatorImage).trim()).indexOf("http://")||0===n.indexOf("https://")||0===n.indexOf("data:image/")||0===n.indexOf("//"))){if(!i){var r=this.props.widgetLayout.height*this.separatorHeight/100,l=s/2,d=(this.props.widgetLayout.height-r)/2+this.separatorVerticalOffset,p='<img src="'+this.separatorImage+'" height="'+r+'px" style="vertical-align: top; position: relative; display: inline-block; padding-left: '+l+"px; padding-right: "+l+"px; top: "+d+'px;align="middle" />';this.runRightToLeft?a=p+a:a+=p}s=0}if(t.domElement.html(a),t.width=t.domElement.outerWidth(!0),t.width||s||(console.log("WidgetSimpleTicker: detected zero width element. Using 100px as default.",this.currentJson,t.width,e),t.width=100),1==this.runRightToLeft)var c=this.props.widgetLayout.width,h=-t.width;else c=-t.width,h=this.props.widgetLayout.width;t.active=!0;var u=(this.props.widgetLayout.width+t.width)/o,m=(t.width+s)/o;t.timeline.to(t.domElement,u,{x:h+"px",visibility:"inherit",startAt:{x:c+"px",visibility:"hidden"},ease:"linear",onComplete:function(){u>m&&this.poolElementFinished(t)}.bind(this)}),t.timeline.add(function(){this.addNextMessageToTicker(),u<=m&&this.poolElementFinished(t)}.bind(this),m),this.props.sendCustomMessage&&this.props.sendCustomMessage({event:"messageStart",messageIndex:this.currentMessage,messageTotal:this.tickerMessages.length,width:t.width,text:e,duration:u}),this.shouldAnimationRun?t.timeline.play():(t.timeline.seek(0),t.timeline.pause())}},poolElementFinished:function(t){1==t.active&&(t.active=!1,t.timeline.clear(),t.timeline.seek(0),t.timeline.pause(),t.domElement.css("visibility","hidden"))},onSingularButton:function(){},onSingularStyles:function(){},componentWillUnmount:function(){this.stopAnimation()},componentDidMount:function(){this.tickerDomElements=$(this.tickerDomElementsRef),this.tickerDomElements.css("visibility","hidden"),this.rebuildTextObject()},componentDidUpdate:function(){this.rebuildTextObject()},rebuildTextObject:function(){this.widgetWidth==this.props.widgetLayout.width&&this.widgetHeight==this.props.widgetLayout.height||(this.widgetWidth=this.props.widgetLayout.width,this.widgetHeight=this.props.widgetLayout.height,null!==this.currentJson&&(this.onSingularValue(this.currentJson),this.restartAnimation()))},render:function(){var t=this;return n().createElement("div",{id:"SimpleTickerParent",style:{width:"100%",height:"100%"}},n().createElement("div",{id:"tickerDomElements",ref:function(e){t.tickerDomElementsRef=e}}))}}),kt=n().createClass({displayName:"WidgetVideoAnimation",getInitialState:function(){return this.videoInRef=null,this.videoOutRef=null,this.videoLoopRef=null,this.videoIn="",this.videoOut="",this.state="Out1",this.videoLoop="",this.loopActive=null,this.fadeDuration=0,this.objectFit=void 0,this.shift=void 0,this.videoInElement=null,this.videoOutElement=null,this.videoLoopElement=null,null},shouldComponentUpdate:function(t,e){return t.widgetLayout.width!=this.props.widgetLayout.width||t.widgetLayout.height!=this.props.widgetLayout.height},onSingularInit:function(){var t=this,e=function(e,i){i.addEventListener("loadedmetadata",function(){t.resizeVideo(i,this.videoWidth,this.videoHeight),t.props.sendCustomMessage&&t.props.sendCustomMessage({event:"loadedmetadata",type:e,videoWidth:this.videoWidth,videoHeight:this.videoHeight,duration:this.duration})})};if(this.videoInElement=w().findDOMNode(this.videoInRef),e("in",this.videoInElement),this.videoInElement.addEventListener("ended",function(){t.loopActive&&t.playLoop()}),this.videoOutElement=w().findDOMNode(this.videoOutRef),e("out",this.videoOutElement),this.videoOutElement.addEventListener("ended",function(){t.hideVideoElement(t.videoOutElement)}),this.videoLoopElement=w().findDOMNode(this.videoLoopRef),e("loop",this.videoLoopElement),t.props.sendCustomMessage){var i=function(e,i){i.addEventListener("error",function(){t.props.sendCustomMessage({event:"error",type:e,code:this.error.code,message:this.error.message})}),i.addEventListener("canplay",function(){t.props.sendCustomMessage({event:"canplay",type:e})}),i.addEventListener("playing",function(){t.props.sendCustomMessage({event:"playing",type:e,currentTime:this.currentTime})}),i.addEventListener("pause",function(){t.props.sendCustomMessage({event:"pause",type:e,currentTime:this.currentTime})}),i.addEventListener("ended",function(){t.props.sendCustomMessage({event:"ended",type:e,currentTime:this.currentTime})})};i("in",this.videoInElement),i("out",this.videoOutElement),i("loop",this.videoLoopElement)}},onSingularValue:function(t){if(t){void 0!==t.videoIn&&t.videoIn!=this.videoIn&&(this.videoIn=t.videoIn,this.videoInElement&&(this.videoInElement.src=this.videoIn,"In"==this.state?this.videoInElement.currentTime=9999999:this.videoInElement.currentTime=0)),void 0!==t.videoOut&&t.videoOut!=this.videoOut&&(this.videoOut=t.videoOut,this.videoOutElement&&(this.videoOutElement.src=this.videoOut,"In"==this.state?this.videoOutElement.currentTime=0:this.videoOutElement.currentTime=9999999)),void 0!==t.loopActive&&t.loopActive!=this.loopActive&&(this.loopActive=t.loopActive),void 0!==t.videoLoop&&t.videoLoop!=this.videoLoop&&(this.videoLoop=t.videoLoop,this.videoLoopElement&&(this.videoLoopElement.src=this.videoLoop,this.videoOutElement.currentTime=0,"In"==this.state&&this.videoOutElement.play())),void 0!==t.fadeDuration&&t.fadeDuration!=this.fadeDuration&&(this.fadeDuration=parseFloat(t.fadeDuration));var e=!1;void 0!==t.shift&&t.shift!=this.shift&&(this.shift=t.shift,e=!0),void 0!==t.objectFit&&t.objectFit!=this.objectFit&&(this.objectFit=t.objectFit,e=!0),1==e&&this.handleResizeWidget()}},onSingularStateChanged:function(t){t&&t.animation&&(this.state=t.animation)},handleResizeWidget:function(){this.videoInElement&&this.resizeVideo(this.videoInElement,this.videoInElement.videoWidth,this.videoInElement.videoHeight),this.videoOutElement&&this.resizeVideo(this.videoOutElement,this.videoOutElement.videoWidth,this.videoOutElement.videoHeight),this.videoLoopElement&&this.resizeVideo(this.videoLoopElement,this.videoLoopElement.videoWidth,this.videoLoopElement.videoHeight)},hideVideoElement:function(t){t.style.opacity=1e-5},showVideoElement:function(t){t.style.opacity=1},playIn:function(){var t=this;this.videoInElement.play(),this.showVideoElement(this.videoInElement),this.hideVideoElement(this.videoOutElement),setTimeout(function(){t.videoOutElement.currentTime=0,t.videoOutElement.pause()},100),this.hideVideoElement(this.videoLoopElement),setTimeout(function(){t.videoLoopElement.currentTime=0,t.videoLoopElement.pause()},100)},playOut:function(){var t=this;if(this.loopActive&&this.fadeDuration){var e;this.videoOutElement.currentTime=0,this.showVideoElement(this.videoOutElement),this.videoOutElement.style.opacity=0;var i=function(o){void 0===e&&(e=o);var n=(o-e)/1e3;if(n>t.fadeDuration)t.videoOutElement.play(),t.videoOutElement.style.opacity=1,t.videoLoopElement.style.opacity=1,t.hideVideoElement(t.videoInElement),t.showVideoElement(t.videoOutElement),t.hideVideoElement(t.videoLoopElement);else{var s=n/t.fadeDuration;t.videoOutElement.style.opacity=s,t.videoLoopElement.style.opacity=1-s,requestAnimationFrame(i)}};requestAnimationFrame(i)}else this.videoOutElement.play(),this.showVideoElement(this.videoOutElement),this.hideVideoElement(this.videoInElement),setTimeout(function(){t.videoInElement.currentTime=0,t.videoInElement.pause()},100),this.hideVideoElement(this.videoLoopElement)},playLoop:function(){var t=this;if(this.loopActive&&this.fadeDuration){var e;this.videoLoopElement.currentTime=0,this.showVideoElement(this.videoLoopElement),this.videoLoopElement.style.opacity=1e-5;var i=function(o){void 0===e&&(e=o);var n=(o-e)/1e3;if(n>t.fadeDuration)t.videoLoopElement.play(),t.videoLoopElement.style.opacity=1,t.videoInElement.style.opacity=1,t.hideVideoElement(t.videoInElement),t.hideVideoElement(t.videoOutElement),t.showVideoElement(t.videoLoopElement);else{var s=n/t.fadeDuration;t.videoLoopElement.style.opacity=s,t.videoInElement.style.opacity=1-s,requestAnimationFrame(i)}};requestAnimationFrame(i)}else this.videoLoopElement.currentTime=0,this.videoLoopElement.play(),this.showVideoElement(this.videoLoopElement),this.hideVideoElement(this.videoInElement),this.hideVideoElement(this.videoOutElement)},seekIn:function(t){this.videoInElement.pause(),this.videoInElement.currentTime=t,this.showVideoElement(this.videoInElement),this.hideVideoElement(this.videoLoopElement),this.hideVideoElement(this.videoOutElement)},seekOut:function(t){this.videoOutElement.pause(),this.videoOutElement.currentTime=t,this.hideVideoElement(this.videoInElement),this.hideVideoElement(this.videoLoopElement),this.showVideoElement(this.videoOutElement)},seekLoop:function(t){this.videoLoopElement.pause(),this.videoLoopElement.currentTime=t,this.hideVideoElement(this.videoInElement),this.showVideoElement(this.videoLoopElement),this.hideVideoElement(this.videoOutElement)},onSingularAnimation:function(t){var e=t.newState;switch(t.event){case"start":"In"==t.timeline?"forward"==t.direction?this.playIn():this.playOut():"forward"==t.direction?this.playOut():this.playIn();break;case"stop":break;case"jump":"In"==e?this.loopActive?this.playLoop():this.seekOut(0):this.seekIn(0);break;case"seek":"In"==t.timeline?this.seekIn(t.time):this.seekOut(t.time);break;case"init":"In"==t.state?(this.state="In",this.loopActive?this.playLoop():this.seekOut(0)):this.seekIn(0)}},resizeVideo:function(t,e,i){if(t){var o,n,s,a,r=this.props.widgetLayout.width,l=this.props.widgetLayout.height;if("cover"!=this.objectFit&&"contain"!=this.objectFit||0==e||0==i)o=0,n=0,s=r,a=l;else{var d=i/e;e/r>=i/l?"contain"==this.objectFit?(o=(r-(s=r))/2,n=(l-(a=r*d))/2*(1+this.shift/100)):(o=(r-(s=(a=l)/d))/2*(1+this.shift/100),n=(l-a)/2):"contain"==this.objectFit?(a=l,o=(r-(s=l/d))/2*(1+this.shift/100),n=(l-a)/2):(o=(r-(s=r))/2,n=(l-(a=s*d))/2*(1+this.shift/100))}t.style.left=o+"px",t.style.top=n+"px",t.style.width=s+"px",t.style.height=a+"px"}},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){this.handleResizeWidget()},render:function(){var t=this,e={width:"100%",height:"100%",position:"absolute",display:"block",objectFit:"fill"};return n().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",display:"block",overflow:"hidden"}},n().createElement("video",{id:"videoIn",muted:!0,style:e,preload:"auto",ref:function(e){t.videoInRef=e}}),n().createElement("video",{id:"videoOut",muted:!0,style:e,preload:"auto",ref:function(e){t.videoOutRef=e}}),n().createElement("video",{id:"videoLoop",muted:!0,loop:!0,style:e,preload:"auto",ref:function(e){t.videoLoopRef=e}}))}}),At=n().createClass({displayName:"WidgetVideoBackground",getInitialState:function(){return this.videoDomRef=null,this.videoFile="",this.objectFit=void 0,this.shift=void 0,this.videoElement=null,this.originalVideoWidth=0,this.originalVideoHeight=0,null},shouldComponentUpdate:function(t,e){return t.widgetLayout.width!=this.props.widgetLayout.width||t.widgetLayout.height!=this.props.widgetLayout.height},onSingularInit:function(){if(this.videoElement=w().findDOMNode(this.videoDomRef),this.videoElement){var t=this;this.videoElement.addEventListener("loadedmetadata",function(){t.originalVideoWidth=this.videoWidth,t.originalVideoHeight=this.videoHeight,t.resizevideo()})}},onSingularValue:function(t){if(t&&this.videoElement){void 0!==t.videoFile&&t.videoFile!=this.videoFile&&(this.videoFile=t.videoFile,this.videoElement.src=this.videoFile,this.videoElement.play());var e=!1;void 0!==t.shift&&t.shift!=this.shift&&(this.shift=t.shift,e=!0),void 0!==t.objectFit&&t.objectFit!=this.objectFit&&(this.objectFit=t.objectFit,e=!0),1==e&&this.resizevideo()}},onSingularStateChanged:function(t){t&&t.animation&&("In"==t.animation?this.videoElement.play():this.videoElement.pause())},resizevideo:function(){if(this.videoElement){var t,e,i,o,n=this.props.widgetLayout.width,s=this.props.widgetLayout.height;if("cover"!=this.objectFit&&"contain"!=this.objectFit||0==this.originalVideoWidth||0==this.originalVideoHeight)t=0,e=0,i=n,o=s;else{var a=this.originalVideoHeight/this.originalVideoWidth;this.originalVideoWidth/n>=this.originalVideoHeight/s?"contain"==this.objectFit?(t=(n-(i=n))/2,e=(s-(o=n*a))/2*(1+this.shift/100)):(t=(n-(i=(o=s)/a))/2*(1+this.shift/100),e=(s-o)/2):"contain"==this.objectFit?(o=s,t=(n-(i=s/a))/2*(1+this.shift/100),e=(s-o)/2):(t=(n-(i=n))/2,e=(s-(o=i*a))/2*(1+this.shift/100))}this.videoElement.style.left=t+"px",this.videoElement.style.top=e+"px",this.videoElement.style.width=i+"px",this.videoElement.style.height=o+"px"}},onSingularStyles:function(){},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){this.videoElement=w().findDOMNode(this.videoDomRef),this.resizevideo()},render:function(){var t=this;return n().createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"absolute"}},n().createElement("video",{key:"video",id:"video",muted:!0,loop:!0,autoplay:!0,style:{position:"absolute",display:"block",objectFit:"fill"},preload:"auto",ref:function(e){t.videoDomRef=e}}))}});var Et=i(24800);function Lt(t,e,i){return(e=function(t){var e=function(t){if("object"!=Ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=Ct(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)({}).hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},xt.apply(null,arguments)}function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Ot(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return Mt(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Mt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw s}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}var Dt=i(45659),Nt=i(9769),_t=Math.random(),Pt={},Wt={},Ft={},Vt={},Yt={},Xt={},jt={},Bt={},Gt={},Ut={},Zt=function(t,e,i,o){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t.compositionInstanceId||t.sbRef.key;if(e[s]||(e[s]={}),n){var a={};$.extend(!0,a,o),e[s][i]=a}else e[s][i]=o},zt=function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=t.compositionInstanceId||t.sbRef.key;if(e[n]){if(o){var s={};return $.extend(!0,s,e[n][i]),s}return e[n][i]}return null},Ht=function(t,e){return f.A.iframeRefMap[t]&&f.A.iframeRefMap[t][e]?f.A.iframeRefMap[t][e]:null},$t=function(t,e){return f.A.onAirWidgetRefMap[t]&&f.A.onAirWidgetRefMap[t][e]?f.A.onAirWidgetRefMap[t][e]:null},Kt=function(t,e,i,o){var n=zt(t,i,e);if(n&&n.__controlNodes)for(var s in n.__controlNodes)o[s]=n[s]},Jt=n().createClass({displayName:"StaticIframe",isReactWidget:!1,reactWidgetRef:null,getInitialState:function(){return{iFrame:null,pendingMessages:[]}},componentWillMount:function(){this.isButtonInitializing=!0,this.buttonLastActivatedTimestamp={},1032!=this.props.tile.widget&&642!=this.props.tile.widget&&1022!=this.props.tile.widget&&1216!=this.props.tile.widget&&1052!=this.props.tile.widget&&3934!=this.props.tile.widget&&3936!=this.props.tile.widget&&812!=this.props.tile.widget&&4307!=this.props.tile.widget&&12!=this.props.tile.widget||(this.isReactWidget=!0),this.initHasBeenCalled=!1},componentWillUnmount:function(){this.reactWidgetRef=null,this.initHasBeenCalled=!1},shouldComponentUpdate:function(t,e){return this.isReactWidget||"composition"==this.props.tile.type?!Nt.compareObject(this.props,t)||!Nt.compareObject(this.state,e):this.props.showBoundingBox!=t.showBoundingBox||this.props.tile.version!=t.tile.version||this.props.tile.name!=t.tile.name||!Nt.compareObject(t.widgetLayout,this.props.widgetLayout)||!Nt.compareObject(t.tile.layout,this.props.tile.layout)||t.forceRender!=this.props.forceRender},componentDidMount:function(){if(this.props.tile.type&&"composition"==this.props.tile.type);else{var t=this.props.compositionInstanceId||this.props.sbRef.key;this.isReactWidget?(this.initHasBeenCalled=!0,this.reactWidgetRef.onSingularInit({OffsetToServerTime:L().ServerDate.getOffset(),adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection}),this._callOnSingularValue()):(this.state.iFrame=this.refs.iframeWidget,f.A.iframeInstances[t]||(f.A.iframeInstances[t]={}),f.A.iframeInstances[t][this.props.tile.id]=this.state.iFrame,H.A.Start(this.props.tile.id),this.state.iFrame.onerror=function(){H.A.Complete(this.props.tile.id,"error")},this.state.iFrame.onload=function(){var t=this;H.A.Complete(this.props.tile.id,"ok"),this.initHasBeenCalled=!0,this.state.iFrame.contentWindow.postMessage({onInit:{tileId:this.props.tile.id,tileName:this.props.tile.name,compositionId:this.props.sbRef.key,instanceId:this.props.compositionInstanceId,widgetId:this.props.tile.widget,widgetVersion:this.props.tile.version,params:{OffsetToServerTime:L().ServerDate.getOffset(),adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection}},_singular_onInit:{tileId:this.props.tile.id,tileName:this.props.tile.name,compositionId:this.props.sbRef.key,instanceId:this.props.compositionInstanceId,widgetId:this.props.tile.widget,widgetVersion:this.props.tile.version,params:{OffsetToServerTime:L().ServerDate.getOffset(),adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection}}},"*"),this._callOnSingularValue(),this.state.pendingMessages.forEach(function(e){t.state.iFrame.contentWindow.postMessage(e,"*")}),this.state.pendingMessages=[]}.bind(this))}},componentWillReceiveProps:function(t){},_callOnSingularValue:function(){var t=this.props.sbRef.val(),e=this.props.tile.id;if(t&&t.dataLinks&&t.dataLinks[e]&&!zt(this.props,Wt,this.props.tile.id,!1)){var i=zt(this.props,Yt,this.props.tile.id);if(i){var o=zt(this.props,Pt,this.props.tile.id);o&&(Nt.extendControlNode(o,i),this.onSingularValue(o))}}else{var n=zt(this.props,Pt,this.props.tile.id);n?this.onSingularValue(n):t.data&&t.data[e]&&this.onSingularValue(t.data[e])}},onSingularValue:function(t){var e=!1;return this.state.iFrame&&this.state.iFrame.contentWindow&&t&&this.initHasBeenCalled&&(this.state.iFrame.contentWindow.postMessage({onValue:t,_singular_onValue:t},"*"),e=!0),this.isReactWidget&&this.reactWidgetRef&&this.initHasBeenCalled&&(this.reactWidgetRef.onSingularValue(t),e=!0),e},onSingularButton:function(t){t&&t.ts&&(this.buttonLastActivatedTimestamp[t.id]&&this.buttonLastActivatedTimestamp[t.id]>=t.ts||(this.buttonLastActivatedTimestamp[t.id]=t.ts,t&&(this.isReactWidget?this.reactWidgetRef&&this.reactWidgetRef.onSingularButton(t):this.state.iFrame.contentWindow.postMessage({onButtonClicked:t.id,_singular_onButtonClicked:t.id},"*"))))},onSingularStyles:function(t){t&&this.state.iFrame.contentWindow.postMessage({onStyles:styles,_singular_onStyles:styles},"*")},onSingularEditComp:function(t){this.state.iFrame.contentWindow.postMessage({onEditComp:t,_singular_onEditComp:t},"*")},onSingularElementStyle:function(t){var e=t.val();if(e){var i=this.extractStyleCss(e.properties,e.inheritedProperties);this.state.iFrame.contentWindow.postMessage({onElementStyle:i,_singular_onElementStyle:i},"*")}},onSingularAnimation:function(t){this.initHasBeenCalled?this.isReactWidget?this.reactWidgetRef&&this.reactWidgetRef.onSingularAnimation&&this.reactWidgetRef.onSingularAnimation(t):this.state.iFrame.contentWindow&&this.state.iFrame.contentWindow.postMessage({onAnimation:t,_singular_onAnimation:t},"*"):this.state.pendingMessages.push({onAnimation:t,_singular_onAnimation:t})},onSingularAdaptationGlobalsChanged:function(t){this.initHasBeenCalled?this.isReactWidget?this.reactWidgetRef&&this.reactWidgetRef.onAdaptationGlobalsChanged&&this.reactWidgetRef.onAdaptationGlobalsChanged(t):this.state.iFrame.contentWindow&&this.state.iFrame.contentWindow.postMessage({_singular_onAdaptationGlobalsChanged:t},"*"):this.state.pendingMessages.push({_singular_onAdaptationGlobalsChanged:t})},onSingularStateChanged:function(t){this.initHasBeenCalled?this.isReactWidget?this.reactWidgetRef&&this.reactWidgetRef.onSingularStateChanged&&this.reactWidgetRef.onSingularStateChanged(t):this.state.iFrame.contentWindow&&this.state.iFrame.contentWindow.postMessage({_singular_onStateChanged:t},"*"):this.state.pendingMessages.push({_singular_onStateChanged:t})},onWidgetSelect:function(t){this.props.onWidgetSelect&&this.props.onWidgetSelect(t)},extractStyleCss:function(t,e){var i={};$.extend(!0,i,e,t);var o={};for(var n in i)o[n]="font-size"==n?i[n]+"em":"color"==n||"background-color"==n?"rgba("+i[n].r+","+i[n].g+","+i[n].b+","+i[n].a+")":i[n];return o},setOnAirRef:function(t,e){this.props.onAirRefCollection&&(this.props.onAirRefCollection[e]=t)},render:function(){var t=this;if(this.props.tile.type&&"composition"==this.props.tile.type){var e=this.props.rtdbRef.parent.child(this.props.tile.id),i=this.props.sbRef.parent.child(this.props.tile.id);return n().createElement(ee,{subComposition:!0,compositionEditor:this.props.compositionEditor,compositionInstanceId:this.props.compositionInstanceId,parentTileId:this.props.parentTileId,parentCompId:this.props.parentCompId,rtdbRef:e,rootRtdbRef:this.props.rootRtdbRef,sbRef:i,rootSbRef:this.props.rootSbRef,sbRefMode:this.props.sbRefMode,mainComposition:this.props.mainComposition,onWidgetSelect:this.props.onWidgetSelect,editingCompId:this.props.editingCompId,onUpdate:this.props.onUpdate,showBoundingBox:this.props.showBoundingBox,adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection,timeline2Active:this.props.timeline2Active,linkTimeline:this.props.linkTimeline,ref:function(i){t.setOnAirRef(i,e.key)},width:this.props.widgetLayout.width,height:this.props.widgetLayout.height,mode:this.props.mode,customSize:this.props.customSize,forceRender:this.props.forceRender,rootTimelines:this.props.rootTimelines,onStateChanged:this.props.onStateChanged,onTileProperties:this.props.onTileProperties,parentTimelineId:this.props.parentTimelineId,onTimelinePosition:this.props.onTimelinePosition,onAirRefCollection:this.props.onAirRefCollection})}if(!this.isReactWidget){var o="";if(this.props.tile.widget&&this.props.tile.version){var s="";if(window.location.search){var a=new URLSearchParams(window.location.search);a&&(s="1"==(s=a.get("enablecoep"))?"?enablecoep=1":"")}o="/widgets/"+this.props.tile.widget+"/serve/"+this.props.tile.version+"/output.html"+s,this.forceRandomNumber&&(o+="?r="+this.forceRandomNumber)}else-1!=(o=this.props.tile.outputUrl||"/widgets/"+this.props.tile.widget+"/output.html").indexOf("//widgets.singular.live")?(o="/widgets/"+this.props.tile.widget+"/serve/"+(this.props.tile.version?this.props.tile.version+"/":"")+"output.html",this.forceRandomNumber&&(o+="?r="+this.forceRandomNumber)):o+="?forceDownload="+_t;var r={border:"0px",overflow:"hidden",left:"0px",top:"0px",width:"0px",height:"0px",maxWidth:this.props.widgetLayout.width+"px",maxHeight:this.props.widgetLayout.height+"px",minWidth:this.props.widgetLayout.width+"px",minHeight:this.props.widgetLayout.height+"px",display:"block"};if(1==this.props.hidden?r.visibility="hidden":r.visibility="inherit",this.props.compositionInstanceId&&(r.borderWidth="0px"),!0===this.props.showBoundingBox)r.pointerEvents="auto";else if(Nt.isInteractivityEnabled(this.props.tile.layout)?r.pointerEvents="none":1==this.props.tile.supportInteractivity?r.pointerEvents="auto":r.pointerEvents="none",1==this.props.tile.supportInteractivity){var l=this.props.sbRef.key,d=this.props.compositionInstanceId||this.props.sbRef.key;f.A.isCompStateOut(d,l)&&(r.pointerEvents="none")}var p=this.props.tile.id;this.props.compositionInstanceId&&(p+="_"+this.props.compositionInstanceId);var c=null;return"preview"==this.props.mode&&!0===this.props.showBoundingBox&&(c=n().createElement("div",{style:{width:"100%",height:"100%",position:"absolute"},className:"click-panel",onMouseDown:this.onWidgetSelect})),n().createElement("div",{style:{width:"100%",height:"100%"}},c,n().createElement("iframe",{title:"Widget "+p,name:p,ref:"iframeWidget",scrolling:"no",src:o,style:r}))}var h=this.props.tile.id;this.props.compositionInstanceId&&(h+="-"+this.props.compositionInstanceId);var u=function(t){window.singularMessage&&window.singularMessage({event:"custom",params:{type:"widget",name:this.props.tile.name,id:this.props.tile.id,widgetId:this.props.tile.widget,compId:this.props.sbRef.key,data:t}})}.bind(this),m=this.props.tile.version;switch(this.props.tile.widget){case 1032:return m?n().createElement(lt,{key:h,id:"WidgetTextVer2-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,onWebFontActive:this.props.onWebFontActive,iframeName:this.props.iframeName,version:m}):n().createElement(tt,{key:h,id:"WidgetTextVer1-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,onWebFontActive:this.props.onWebFontActive,iframeName:this.props.iframeName,version:m});case 1216:return n().createElement(Rt,{key:h,id:"WidgetSimpleTicker-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,onWebFontActive:this.props.onWebFontActive,iframeName:this.props.iframeName,version:m,sendCustomMessage:u});case 3934:return n().createElement(kt,{key:h,id:"WidgetVideoAnimation-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m,sendCustomMessage:u});case 3936:return n().createElement(At,{key:h,id:"WidgetVideoBackground-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m});case 642:return n().createElement(pt,{key:h,id:"WidgetImage-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m});case 1022:return n().createElement(ft,{key:h,id:"WidgetRectangle-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m});case 1052:return n().createElement(yt,{key:h,id:"WidgetCircle-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m});case 12:return n().createElement(bt,{key:h,id:"WidgetGradient-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m});case 812:return n().createElement(It,{key:h,id:"WidgetVideoClip-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m,sendCustomMessage:u});case 4307:return n().createElement(St,{key:h,id:"WidgetVideoClipWithAudio-"+h,ref:function(e){t.reactWidgetRef=e},widgetLayout:this.props.widgetLayout,version:m,sendCustomMessage:u});default:return n().createElement("div",{id:"WidgetInvalidID"})}}}),qt={componentWillMount:function(){this.fbBindNodes=[],this.lastFbBindNodes=[],this.manageDataSources=this.__manageDataSources,this.lastEachItems=[],this.objId,this.props.tile?this.objId=this.props.tile.id:this.props.group&&(this.objId=this.props.group.id)},componentDidUpdate:function(){this.manageDataSources()},__manageDataSources:function(){var t=this;if(this.props.tile){var e=this.props.compositionInstanceId||this.props.sbRef.key,i=$t(e,this.objId),o=Ht(e,this.objId);if(!i&&!o)return void setTimeout(function(){this.__manageDataSources()}.bind(this),100)}if(this.props.dataLinks&&this.props.dataLinks[this.objId]||this.props.nodeRefs&&this.props.nodeRefs[this.objId]){var n=[];if(this.props.dataLinks&&this.props.dataLinks[this.objId]){var s=this.props.dataLinks[this.objId];for(var a in s)n.push({key:a,data:s[a],linkFrom:"dataLink",objId:this.objId})}if(this.props.nodeRefs&&this.props.nodeRefs[this.objId]){var r=this.props.nodeRefs[this.objId];for(var l in r)n.push({key:l,data:r[l],linkFrom:"nodeRef",objId:this.objId})}if(Nt.compareObject(this.lastEachItems,n))return;$.extend(!0,this.lastEachItems,n),this.lastFbBindNodes=[],$.extend(!0,this.lastFbBindNodes,this.fbBindNodes),this.fbBindNodes=[],J().eachSeries(n,function(e,i){t.getDataSource(e.key,e.data,e.linkFrom,e.objId,i)},function(e){e||t.unbindUnusedDataSource()})}else this.lastFbBindNodes=[],$.extend(!0,this.lastFbBindNodes,this.fbBindNodes),this.fbBindNodes=[],this.unbindUnusedDataSource()},unbindUnusedDataSource:function(){if(this.lastFbBindNodes.length){var t,e=Ot(this.lastFbBindNodes);try{for(e.s();!(t=e.n()).done;){var i,o=t.value,n=!1,s=Ot(this.fbBindNodes);try{for(s.s();!(i=s.n()).done;){var a=i.value;if("dataNode"==a.field.type){if(a.dataSourceRef.toString()==o.dataSourceRef.toString()&&o.objId==a.objId){n=!0;break}}else if(a.dataSourceRef.parent.toString()==o.dataSourceRef.parent.toString()&&o.objId==a.objId){n=!0;break}}}catch(t){s.e(t)}finally{s.f()}n||this.__unbindDataSource(o)}}catch(t){e.e(t)}finally{e.f()}}},__unbindDataSource:function(t){if("nodeRef"==t.linkFrom){var e=t.field.targetLocation;if(e){var i,o,n,s=[],a=Ot(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;"<selfCompId>"!=r&&"<objId>"!=r&&("tiles"==r?o=Vt:"groups"==r?o=Ft:"layout"==r?o&&(i=zt(this.props,o,this.objId)):i&&s.push(r))}}catch(t){a.e(t)}finally{a.f()}i&&1==s.length&&i.__controlNodes&&i.__controlNodes[s[0]]&&(delete i.__controlNodes[s[0]],Zt(this.props,o,this.objId,i))}}var l=this.__getControlNodeHashKey(t).simpleHash;delete Bt[l],delete Gt[l],t.dataSourceRef.off("value",t.bindNode)},getDataSource:function(t,e,i,o,n){if("dataLink"==i){var s,a=e.index,r=e.key,l=e.locationId,d=e.type;if("root"==l)if("appinstance"==window.onairMode||"device"==window.onairMode){if(!this.props.mainComposition)return void console.log("cannot find mainComposition from datasource",a,r,d);s=this.props.sbRefMode?this.props.rootSbRef.child("compositions").child(this.props.mainComposition):this.props.rootRtdbRef.child("compositions").child(this.props.mainComposition)}else s=this.props.sbRefMode?this.props.rootSbRef.child("compositions").child(this.props.rootSbRef.key):this.props.rootRtdbRef.child("compositions").child(this.props.rootRtdbRef.key);else s="self"==l?this.props.sbRefMode?this.props.sbRef:this.props.rtdbRef:this.props.sbRefMode?this.props.rootSbRef.child("compositions").child(l):this.props.rootRtdbRef.child("compositions").child(l);if("controlNode"==d)this.linkControlNode(t,e,i,s.child("dataSources").child("composition").child("controlNode"),r,o,n);else if("widgetNode"==d)this.linkControlNode(t,e,i,s.child("dataSources").child("composition").child("widgetNode"),r,o,n);else{var p=s.child("dataSources").child("composition").child("dataNodes").child(a);this.linkDataNode(t,e,i,d,r,p,o,n)}}else if("nodeRef"==i){if(!e.sourceLocation)return;var c,h=e.sourceIndex,u=e.sourceKey,m=e.sourceType;c=this.props.sbRefMode?this.props.rootSbRef.child("compositions"):this.props.rootRtdbRef.child("compositions");var f,v=Ot(e.sourceLocation);try{for(v.s();!(f=v.n()).done;){var g=f.value,y=void 0;if("<selfCompId>"==g)y=this.props.sbRefMode?this.props.sbRef.key:this.props.rtdbRef.key;else if("<rootCompId>"==g)if("appinstance"==window.onairMode||"device"==window.onairMode){if(!this.props.mainComposition)return void console.log("cannot find mainComposition from datasource",h,u,m);y=this.props.mainComposition}else y=this.props.sbRefMode?this.props.rootSbRef.key:this.props.rootRtdbRef.key;else y=g;c=c.child(y)}}catch(t){v.e(t)}finally{v.f()}if("controlNode"==m)this.linkControlNode(t,e,i,c.child("controlNode"),u,o,n);else if("widgetNode"==m)this.linkControlNode(t,e,i,c.child("widgetNode"),u,o,n);else{var w=c.child("dataNodes").child(h);this.linkDataNode(t,e,i,m,u,w,o,n)}}},linkDataNode:function(t,e,i,o,n,s,a,r){var l=null;s.on("value",function(s){var d=s.val();if(d&&0!==Object.keys(d).length){if(l){if(l.dataNode==d.dataNode)return;this.__unbindDataSource(l);for(var p=[],c=0;c<this.lastFbBindNodes.length;c++){var h=this.lastFbBindNodes[c];h.dataSourceRef.parent.toString()==l.dataSourceRef.parent.toString()&&h.objId==a&&p.push(c)}if(p.length)for(var u in p)this.lastFbBindNodes.splice(p[u],1);p=[];for(var m=0;m<this.fbBindNodes.length;m++){var f=this.fbBindNodes[m];f.dataSourceRef.parent.toString()==l.dataSourceRef.parent.toString()&&f.objId==a&&p.push(m)}if(p.length)for(var v in p)this.fbBindNodes.splice(p[v],1)}var g=new(A());if("dataNode"==o){var y=this.props.rootRtdbRef.root.child("users").child(d.userId).child("dataNodes").child(d.dataNode);d.datastore&&void 0===this.props.rootRtdbRef.val?new(R())(g,d.datastore):g=y}this.linkControlNode(t,e,i,g,n,a,null,function(t,e){l||r(),(l=e).dataNode=d.dataNode})}}.bind(this))},__getControlNodeHashKey:function(t){var e,i,o;return"nodeRef"==t.linkFrom?(e=t.key+t.field.sourceKeyId+t.objId,i="sourceType","<selfCompId>"==(o=t.field.sourceLocation[0])?o="self":"<rootCompId>"==o&&(o="root")):(e=t.key+t.field.location+t.field.locationId+t.objId,i="type",o=t.field.locationId),"dataNode"==t.field.type||"dataNode"==t.field.sourceType?e+=t.payloadKey:"nodeRef"==t.linkFrom?e+=t.field.sourceKeyId:e+=t.field.keyId,this.props&&this.props.compositionInstanceId&&(e+="-"+this.props.compositionInstanceId),{simpleHash:e,typeKey:i,locationId:o}},linkControlNode:function(t,e,i,o,n,s,a,r){var l=this,d=o.child("payload").child(n),p=this.__getControlNodeHashKey({key:t,field:e,objId:s,linkFrom:i,payloadKey:n}),c=p.simpleHash,h=p.typeKey,u=p.locationId;if(Bt[c]){var m=Bt[c];return m.dataSourceRef.parent.once("value",function(t){this.updateDataTarget(m.inputBindNode,t)}.bind(this)),this.fbBindNodes.push(m),void(a?a(null):r&&r(null,m))}var f=o.child("model").child("fields"),v=!1;f.on("value",function(o){if(Gt[c]){if(Gt[c][e[h]][u]&&"object"===Ct(Gt[c][e[h]][u])&&!Array.isArray(Gt[c][e[h]][u]))return Gt[c][e[h]][u]=o.val(),Gt[c][e[h]][u]||(Gt[c][e[h]][u]=[]),void(v||(a?a(null):r&&r(null,f)))}else Gt[c]={dataNode:{},controlNode:{},widgetNode:{}};var p,m,f;Gt[c][e[h]][u]=o.val(),Gt[c][e[h]][u]||(Gt[c][e[h]][u]=[]),"dataNode"==e[h]?0==(p=l.lastFbBindNodes.filter(function(t){return t.dataSourceRef.toString()==d.toString()&&t.objId==s})).length&&(p=l.fbBindNodes.filter(function(t){return t.dataSourceRef.toString()==d.toString()&&t.objId==s})):0==(p=l.lastFbBindNodes.filter(function(t){return t.dataSourceRef.parent.toString()==d.parent.toString()&&t.objId==s})).length&&(p=l.fbBindNodes.filter(function(t){return t.dataSourceRef.parent.toString()==d.parent.toString()&&t.objId==s})),p.length?(f=m=p[0],!window.onairMode&&Bt[c]||m.dataSourceRef.parent.once("value",function(t){this.updateDataTarget(m.inputBindNode,t)}.bind(l))):(function(t,e){e.parent.on("value",t)}(m=l.updateDataTarget.bind(l,{payloadKey:n,key:t,locationId:u,controlType:e[h],simpleHash:c}),d),f={dataSourceRef:d,key:t,bindNode:m,inputBindNode:{payloadKey:n,key:t,locationId:u,controlType:e[h],simpleHash:c},linkFrom:i,field:e,objId:s,payloadKey:n}),l.fbBindNodes.push(f),Bt[c]=f,v||(a?a(null):r&&r(null,f),v=!0)})},updateDataTarget:function(t,e){if(e.exists()){var i=e.val(),o=t.controlType,n={},s=0,a=[],r=[];this.props.dataLinks&&this.props.dataLinks[this.objId]&&(a=this.props.dataLinks[this.objId]),this.props.nodeRefs&&this.props.nodeRefs[this.objId]&&(r=this.props.nodeRefs[this.objId]);var l=Gt[t.simpleHash];if(!l)return;for(var d in l[o][t.locationId]){var p=l[o][t.locationId][d],c=d;if("dataNode"!=o||t.payloadKey==p.id){var h=i[p.id];for(var u in r){var m=r[u];m.sourceType!=o||m.sourceKeyId!=c&&m.sourceKey!=p.id||this.props.onUpdateDataTargetNodeRef(this.objId,m.targetLocation,u,Nt.convertNodeValue(p,h))}var f=[];for(var v in a){var g=a[v];g.type==o&&g.locationId==t.locationId&&(g.keyId==c||g.key==p.id)&&f.push(v)}for(var y in f){var w=f[y];if(h&&h.__singularButton){if(0!==h.ts){var b={id:w,ts:h.ts},I=this.props.compositionInstanceId||this.props.sbRef.key,S=Ht(I,this.objId);S&&S.onSingularButton(b)}}else n[w]=Nt.convertNodeValue(p,h);s++}}}s&&this.props.onUpdateDataTarget(this.objId,n)}},componentWillUnmount:function(){this.props.tile&&"widget"==this.props.tile.type&&x.A.ReleaseIframe(this.props.tile.id),this.lastFbBindNodes=[],$.extend(!0,this.lastFbBindNodes,this.fbBindNodes),this.fbBindNodes=[],this.unbindUnusedDataSource()}},Qt=n().createClass({displayName:"OnairWidget",mixins:[I,g,c.A,qt],activeDom:null,inactiveDom:null,lastData:null,currentData:null,updateAnimationActive:!1,behaviorAnimationRef:null,updateAnimation1Ref:null,updateAnimation2Ref:null,iframe1Ref:null,iframe2Ref:null,width:0,height:0,getInitialState:function(){return{}},componentWillMount:function(){},componentDidMount:function(){this.componentDidUpdate()},shouldComponentUpdate:function(t,e){var i=this.calculateElementSize();return!(Nt.compareObject(t.tile.controlStyle,this.props.tile.controlStyle)&&Nt.compareObject(t.dataLinks,this.props.dataLinks)&&Nt.compareObject(t.nodeRefs,this.props.nodeRefs)&&Nt.compareObject(t.settings,this.props.settings)&&Nt.compareObject(t.tile.layout,this.props.tile.layout)&&Nt.compareObject(t.tile.name,this.props.tile.name)&&Nt.compareObject(t.tile.version,this.props.tile.version)&&Nt.compareObject(t.groupLayout,this.props.groupLayout)&&Nt.compareObject(t.adaptationGlobals,this.props.adaptationGlobals)&&Nt.compareObject(t.automaticTextDirection,this.props.automaticTextDirection)&&Nt.compareObject(t.timeline2Active,this.props.timeline2Active)&&Nt.compareObject(t.linkTimeline,this.props.linkTimeline)&&t.showBoundingBox==this.props.showBoundingBox&&t.editingCompId==this.props.editingCompId&&this.width==i.width&&this.height==i.height&&t.forceRender==this.props.forceRender)},componentDidUpdate:function(){var t=this.calculateElementSize();this.width=t.width,this.height=t.height,this.props,void 0!==this.props.tile&&void 0!==this.props.tile.layout&&void 0!==this.props.tile.layout.behavior&&(!this.behaviorAnimationRef&&this.behaviorTweens&&this.behaviorTweens.length?this.destroyBehavior():this.behaviorAnimationRef&&!this.behaviorTweens&&this.setupBehavior(this.props.tile.layout.behavior))},componentWillUnmount:function(){f.A.cleanupTileData(this.props.compositionInstanceId||this.props.sbRef.key,this.props.tile.id)},calculateElementSize:function(){var t={width:0,height:0};return this.props.tile&&this.props.tile.layout&&("%"==this.props.tile.layout.widthUnit?t.width=Math.max(0,this.props.tile.layout.width*this.props.groupLayout.width/100):t.width=Math.max(0,this.props.tile.layout.width),"%"==this.props.tile.layout.heightUnit?t.height=Math.max(0,this.props.tile.layout.height*this.props.groupLayout.height/100):t.height=Math.max(0,this.props.tile.layout.height)),t},updateStyle:function(t){if(this.props.tile.controlStyle){var e=this.props.styles?this.props.styles.filter(function(t){return t.id==this.props.tile.controlStyle}.bind(this)):[];if(e.length){var i=e[0],o={};$.extend(!0,o,i.inheritedProperties,i.properties);var n,s=Ot(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;o[a]&&delete o[a]}}catch(t){s.e(t)}finally{s.f()}0===Object.keys(o).length&&JSON.stringify(o)===JSON.stringify({})||this.props.onUpdateDataTarget(this.props.tile.id,o)}}},onDataChange:function(t){if(this.props.tile.layout.updateAnimation.alwaysExecute||!Nt.compareObject(t,this.lastData)){var e=null==this.lastData,i=this.updateAnimation1Ref,o=this.updateAnimation2Ref;if(!o)return"DOMNOTFOUND";if(this.updateAnimationInProgress)if(performance.now()-this.updateAnimationInProgress>10){var n={};$.extend(!0,n,t),this.currentData=n}else Nt.compareObject(t,this.lastData)||(null==this.activeDom||this.activeDom==o?this.iframe2Ref.onSingularValue(t):this.iframe1Ref.onSingularValue(t));else{var s={};$.extend(!0,s,t),this.lastData=s;var a=this.props.sbRef.key,r=this.props.compositionInstanceId||this.props.sbRef.key,l=!1;parseFloat(this.props.tile.layout.updateAnimation.offset)<.02&&parseFloat(this.props.tile.layout.updateAnimation.in.duration)<.02&&parseFloat(this.props.tile.layout.updateAnimation.out.duration)<.02&&(l=!0);var d="none"!=this.props.tile.effects.In.effect;!0===this.props.rootSbRef.child("compositionProps/timeline2Active/"+a).val()&&"none"!=this.props.tile.effects.Out.effect&&(d=!0),l||e||window.singularReframeActive||f.A.isCompStateOut(r,a)&&d?null==this.activeDom||this.activeDom==o?this.iframe2Ref.onSingularValue(t):this.iframe1Ref.onSingularValue(t):(null==this.activeDom||this.activeDom==o?(this.activeDom=i,this.inactiveDom=o,this.iframe1Ref.onSingularValue(t)):(this.activeDom=o,this.inactiveDom=i,this.iframe2Ref.onSingularValue(t)),this.applyUpdateAnimation(this.activeDom,this.inactiveDom,this.props.tile.layout.updateAnimation))}}},applyUpdateAnimation:function(t,e,i){var o=parseFloat(i.offset),n=parseFloat(i.in.duration),s=parseFloat(i.out.duration);void 0===this.outTimeline?this.outTimeline=new TimelineMax:this.outTimeline.clear(),void 0===this.inTimeline?this.inTimeline=new TimelineMax:this.inTimeline.clear();var a=0,r=0;o>0?a=o:r=-o;var l=!1;a+n>r+s&&(l=!0);var d=.99999999;(Nt.isIOS()||Nt.isAndroid()||Nt.isFlowLib()||Nt.isFlow())&&(d=1);var p={"z-index":1,opacity:1,x:"0%",y:"0%",rotateX:0,rotateY:0,scaleX:d,scaleY:d,startAt:{opacity:1,x:"0%",y:"0%",rotateX:0,rotateY:0,scaleX:d,scaleY:d},delay:r,overwrite:"all",ease:this.generateGreensockEasing(i.out.easing)};switch(i.out.effect){case"none":break;case"fade":p.opacity=0;break;case"translate":switch(i.out.property){case"left":p.x="-100%";break;case"right":p.x="100%";break;case"up":p.y="-100%";break;case"down":p.y="100%"}break;case"rotate":switch(i.out.property){case"x-":p.rotationX="-90.0";break;case"x+":p.rotationX="+90.0";break;case"y-":p.rotationY="-90.0";break;case"y+":p.rotationY="90.0"}break;case"scale":switch(i.out.property){case"xAndY":p.scaleX="0.0",p.scaleY="0.0";break;case"x":p.scaleX="0.0";break;case"y":p.scaleY="0.0"}}this.outTimeline.to(e,s,p),this.outTimeline.to(e,0,{visibility:"hidden",immediateRender:!1}),0==l&&this.outTimeline.to(e,0,{onComplete:this.onUpdateAnimationComplete});var c={"z-index":0,opacity:1,x:"0%",y:"0%",rotationX:0,rotationY:0,scaleX:d,scaleY:d,visibility:"inherit",startAt:{opacity:1,x:"0%",y:"0%",rotationX:0,rotationY:0,scaleX:d,scaleY:d,visibility:"hidden"},delay:a,overwrite:"all",ease:this.generateGreensockEasing(i.in.easing)};switch(this.inTimeline.to(t,0,{visibility:"hidden",immediateRender:!1}),i.in.effect){case"none":break;case"fade":c.startAt.opacity=0;break;case"translate":switch(i.in.property){case"left":c.startAt.x="-100%";break;case"right":c.startAt.x="100%";break;case"up":c.startAt.y="-100%";break;case"down":c.startAt.y="100%"}break;case"rotate":switch(i.in.property){case"x-":c.startAt.rotationX="-90.0";break;case"x+":c.startAt.rotationX="+90.0";break;case"y-":c.startAt.rotationY="-90.0";break;case"y+":c.startAt.rotationY="90.0"}break;case"scale":switch(i.in.property){case"xAndY":c.startAt.scaleX="0.0",c.startAt.scaleY="0.0";break;case"x":c.startAt.scaleX="0.0";break;case"y":c.startAt.scaleY="0.0"}}this.inTimeline.to(t,n,c),1==l&&this.inTimeline.to(t,0,{onComplete:this.onUpdateAnimationComplete}),this.inTimeline.play(0),this.outTimeline.play(0),this.updateAnimationInProgress=performance.now()},onUpdateAnimationComplete:function(){this.updateAnimationInProgress=void 0,null!=this.currentData&&(this.onDataChange(this.currentData),this.currentData=null)},onWidgetSelect:function(t){this.props.onWidgetSelect&&this.props.showBoundingBox&&this.props.onWidgetSelect(t,this.props.group.id,this.props.tile.id)},render:function(){var t=this;if(!this.props.tile)return!1;var e=this.calculateElementSize();this.props.onTileProperties&&this.props.onTileProperties(this.props.tile.id,e);var i=this.props.tile.layout;if(0==B().executeAdaptation(this.props.adaptationGlobals,i.adaptations))return null;var o=!1;void 0!==i.updateAnimation&&1==i.updateAnimation.active&&(o=i.updateAnimation.active),o||(this.lastData=null);var s,a,r=!1;!o||"translate"!=i.updateAnimation.in.effect&&"translate"!=i.updateAnimation.out.effect||(r=!0);var l={position:"absolute",left:"0px",top:"0px",height:"100%",width:"100%"};i.behavior&&i.behavior.find(function(t){return"scale"==t.property||"scaleX"==t.property||"scaleY"==t.property})&&(Nt.isIOS()||Nt.isAndroid()||Nt.isFlowLib()||Nt.isFlow()||(l.willChange="transform"));var d={position:"absolute",left:"0px",top:"0px",height:"100%",width:"100%"};p().layoutToStyleTransform(i,this.props.settings,"widget",d,e),p().layoutGetBlendModeStyle(i,this.props.settings,"widget",d),p().layoutToStyleEffect(i,this.props.settings,"widget",l),p().layoutGetMaskStyle(i,this.props.settings,"widget",l);var c,h=null;if(1==r?(p().layoutGetBlur(i,this.props.settings,"widget",d),p().layoutGetShadow(i,this.props.settings,"widget",d),h={position:"absolute",width:"100%",height:"100%",clip:"rect(0, auto, auto, 0)"}):(p().layoutGetBlur(i,this.props.settings,"widget",l),p().layoutGetShadow(i,this.props.settings,"widget",l),h={position:"absolute",width:"100%",height:"100%"}),d.pointerEvents="auto",Nt.isInteractivityEnabled(i)||!0===this.props.showBoundingBox||(d.pointerEvents="none"),Nt.isInteractivityEnabled(i)&&!0!==this.props.showBoundingBox){var u=this.props.sbRef.key,m=this.props.compositionInstanceId||this.props.sbRef.key;f.A.isCompStateOut(m,u)&&(d.pointerEvents="none")}if(this.iframe1Ref=null,this.iframe2Ref=null,"widget"==this.props.tile.type&&1==o){Nt.isIOS()||Nt.isAndroid()||Nt.isFlowLib()||Nt.isFlow()||(l.willChange="transform");var v=$.extend({},l);v.visibility="hidden",s=n().createElement("div",{id:"iFrame1",style:v,ref:function(e){t.updateAnimation1Ref=e}},n().createElement(Jt,{key:this.props.tile.id+"-1",updateAnimationKey:"-1",mainComposition:this.props.mainComposition,ref:function(e){t.iframe1Ref=e},rtdbRef:this.props.rtdbRef,rootSbRef:this.props.rootSbRef,rootRtdbRef:this.props.rootRtdbRef,sbRef:this.props.sbRef,sbRefMode:this.props.sbRefMode,editingCompId:this.props.editingCompId,tile:this.props.tile,mode:this.props.mode,forceRender:this.props.forceRender,showBoundingBox:this.props.showBoundingBox,iframeName:this.props.iframeName,onUpdate:this.props.onUpdate,widgetLayout:e,adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection,timeline2Active:this.props.timeline2Active,linkTimeline:this.props.linkTimeline,compositionInstanceId:this.props.compositionInstanceId,parentTileId:this.props.parentTileId,parentCompId:this.props.parentCompId,subComposition:this.props.subComposition,compositionEditor:this.props.compositionEditor,rootTimelines:this.props.rootTimelines,onStateChanged:this.props.onStateChanged,onTileProperties:this.props.onTileProperties,parentTimelineId:this.props.parentTimelineId,onTimelinePosition:this.props.onTimelinePosition,onAirRefCollection:this.props.onAirRefCollection,onWebFontActive:this.props.onWebFontActive})),a=n().createElement("div",{id:"iFrame2",style:l,ref:function(e){t.updateAnimation2Ref=e}},n().createElement(Jt,{key:this.props.tile.id+"-2",updateAnimationKey:"-2",mainComposition:this.props.mainComposition,ref:function(e){t.iframe2Ref=e},rtdbRef:this.props.rtdbRef,rootRtdbRef:this.props.rootRtdbRef,rootSbRef:this.props.rootSbRef,sbRef:this.props.sbRef,sbRefMode:this.props.sbRefMode,editingCompId:this.props.editingCompId,tile:this.props.tile,mode:this.props.mode,forceRender:this.props.forceRender,showBoundingBox:this.props.showBoundingBox,iframeName:this.props.iframeName,onUpdate:this.props.onUpdate,widgetLayout:e,adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection,timeline2Active:this.props.timeline2Active,linkTimeline:this.props.linkTimeline,compositionInstanceId:this.props.compositionInstanceId,parentTileId:this.props.parentTileId,parentCompId:this.props.parentCompId,subComposition:this.props.subComposition,compositionEditor:this.props.compositionEditor,rootTimelines:this.props.rootTimelines,onStateChanged:this.props.onStateChanged,onTileProperties:this.props.onTileProperties,parentTimelineId:this.props.parentTimelineId,onTimelinePosition:this.props.onTimelinePosition,onAirRefCollection:void 0,onWebFontActive:this.props.onWebFontActive}))}else s=n().createElement("div",{id:"behaviorAnimation1",style:l,ref:function(e){t.behaviorAnimationRef=e}},n().createElement(Jt,{key:this.props.tile.id,mainComposition:this.props.mainComposition,ref:function(e){!function(t,e,i){if(i){var o=t.sbRef.key;t.compositionInstanceId&&(o=t.compositionInstanceId),f.A.iframeRefMap[o]||(f.A.iframeRefMap[o]={}),f.A.iframeRefMap[o][e]=i}}(t.props,t.props.tile.id,e)},rtdbRef:this.props.rtdbRef,rootRtdbRef:this.props.rootRtdbRef,rootSbRef:this.props.rootSbRef,sbRef:this.props.sbRef,sbRefMode:this.props.sbRefMode,editingCompId:this.props.editingCompId,tile:this.props.tile,mode:this.props.mode,forceRender:this.props.forceRender,showBoundingBox:this.props.showBoundingBox,iframeName:this.props.iframeName,onUpdate:this.props.onUpdate,widgetLayout:e,adaptationGlobals:this.props.adaptationGlobals,automaticTextDirection:this.props.automaticTextDirection,timeline2Active:this.props.timeline2Active,linkTimeline:this.props.linkTimeline,compositionInstanceId:this.props.compositionInstanceId,parentTileId:this.props.parentTileId,parentCompId:this.props.parentCompId,subComposition:this.props.subComposition,compositionEditor:this.props.compositionEditor,rootTimelines:this.props.rootTimelines,onStateChanged:this.props.onStateChanged,onTileProperties:this.props.onTileProperties,parentTimelineId:this.props.parentTimelineId,onWidgetSelect:this.props.onWidgetSelect,onTimelinePosition:this.props.onTimelinePosition,onAirRefCollection:this.props.onAirRefCollection,onWebFontActive:this.props.onWebFontActive}));if(!this.props.compositionInstanceId&&"preview"==this.props.mode){var g=this.props.sbRef.parent.child(this.props.editingCompId).val();g&&g.tiles&&g.tiles[this.props.tile.id]&&(c=this.onWidgetSelect)}var y={};Nt.isInteractivityEnabled(i)&&(y={"data-si-id":this.props.tile.id,"data-si-compId":this.props.sbRef.key,"data-si-ownerId":this.props.compositionInstanceId||this.props.sbRef.key},Nt.getInteractivityEvents(i).forEach(function(t){"mouseenter"!=t&&"mouseleave"!=t||(t="mousemove"),y["data-si-e-"+t]=!0}),i.events&&i.events.cursor&&(d.cursor=i.events.cursor));var w="widget";return this.props.tile&&"composition"==this.props.tile.type&&(w="subcomp"),null!=a?n().createElement("div",xt({key:"widget","data-singular-type":w,"data-singular-name":this.props.tile.name,id:"onair"+this.props.tile.id,ref:function(e){t.tweenRef=e},style:d,onMouseDown:c},y),n().createElement("div",{id:"behaviorAnimation2",key:"behaviorAnimation",ref:function(e){t.behaviorAnimationRef=e},style:h},a,s)):n().createElement("div",xt({key:"widget","data-singular-type":w,"data-singular-name":this.props.tile.name,id:"onair"+this.props.tile.id,ref:function(e){t.tweenRef=e},style:d,onMouseDown:c},y),s)}}),te=n().createClass({displayName:"OnairGroup",mixins:[a(),g,qt],componentDidMount:function(){this.props,this.componentDidUpdate()},componentDidUpdate:function(){this.props},componentWillUnmount:function(){f.A.cleanupGroupData(this.props.compositionInstanceId||this.props.sbRef.key,this.props.group.id)},onGroupSelect:function(t){this.props.onGroupSelect&&this.props.showBoundingBox&&this.props.onGroupSelect(t,this.props.group.id)},render:function(){var t=this,e={},i=this.props.group.layout;if(0==B().executeAdaptation(this.props.adaptationGlobals,i.adaptations))return null;this.props.compositionInstanceId&&(i=zt(this.props,Ft,this.props.group.id,!0)),"%"==i.widthUnit?e.width=i.width*this.props.onAirLayout.width/100:e.width=i.width,"%"==i.heightUnit?e.height=i.height*this.props.onAirLayout.height/100:e.height=i.height;var o,s,a=function(t,i){var o=this,s=t.tile.layout;this.props.compositionInstanceId&&(s=zt(this.props,Vt,t.tile.id,!0));var a=p().getDefaultLayout(0),r={};$.extend(!0,r,a,s),t.tile.layout=r;var l=t.tile.id+":"+(this.props.compositionInstanceId?this.props.compositionInstanceId:"");return n().createElement(Qt,xt({key:l,tile:t.tile,groupId:t.groupId,ref:function(e){!function(t,e,i){if(i){var o=t.sbRef.key;t.compositionInstanceId&&(o=t.compositionInstanceId),f.A.onAirWidgetRefMap[o]||(f.A.onAirWidgetRefMap[o]={}),f.A.onAirWidgetRefMap[o][e]=i}}(o.props,t.tile.id,e)},groupLayout:e},this.props))}.bind(this),r=[];for(var l in this.props.group.items){var d=this.props.group.items[l],c=this.props.tiles.filter(function(t){if(d.id==t.id)return t});c.length&&r.push({tile:c[0],priority:d.priority,groupId:this.props.group.id})}if(!this.props.compositionInstanceId&&"preview"==this.props.mode){var h=this.props.sbRef.parent.child(this.props.editingCompId).val();h&&h.groups&&h.groups[this.props.group.id]&&(o=this.onGroupSelect)}if((s=p().layoutToStyle(i,this.props.settings,"group",s,e)).pointerEvents="none",Nt.isInteractivityEnabled(i)&&!1===this.props.showBoundingBox){var u=this.props.sbRef.key,m=this.props.compositionInstanceId||this.props.sbRef.key;!1===f.A.isCompStateOut(m,u)&&(s.pointerEvents="auto")}var v=Nt.isInteractivityEnabled(i),g={"data-si-id":this.props.group.id,"data-si-compId":this.props.sbRef.key,"data-si-ownerId":this.props.compositionInstanceId||this.props.sbRef.key};return Nt.getInteractivityEvents(i).forEach(function(t){"mouseenter"!=t&&"mouseleave"!=t||(t="mousemove"),g["data-si-e-"+t]=!0}),i.events&&i.events.cursor&&(s.cursor=i.events.cursor),n().createElement("div",xt({id:"onair"+this.props.group.id,"data-singular-type":"group","data-singular-name":this.props.group.name,style:s,onMouseDown:o,ref:function(e){t.tweenRef=e}},v?g:{}),r.map(a))}}),ee=n().createClass({displayName:"Onair",mixins:[a(),{},S.A,b],timelinePosition:-1,getInitialState:function(){this.setupCompInstanceAnimationState=!1,this.renderWindowRootElement=null,this.interactiveHighlightInterval=null;var t={};$.extend(!0,t,U().DEFAULT_GLOBALS,this.props.rootSbRef.child("adaptationGlobals").val(),this.props.windowAdaptationGlobals);var e=this.props.width,i=this.props.height,o=1;if(!this.props.subComposition){var n=this.getRenderTargetDom();n?(e=n.width(),i=n.height()):(e=1920,i=1080);var s=this.calculateRenderWindowStyle(e,i);e=s.width,i=s.height,o=s.scale}return{renderWindowStyle:{width:e,height:i,scale:o,forceRender:Math.random()},composition:{},interactiveHighlightEnabled:!1,adaptationGlobals:t}},shouldComponentUpdate:function(t,e){return!0},componentDidUpdate:function(){var t=this;if(this.props.onUpdate&&this.props.onUpdate(),!this.setupCompInstanceAnimationState){this.setupCompInstanceAnimationState=!0,this.readCompositionStates();var e=function(){var i=t.calculateOnairLayout(),o=t.calculateAdaptationGlobals(i.width,i.height),n=function(t){return 0==B().executeAdaptation(o,t.layout.adaptations)||!0!==t.layout.visible},s=!0,a=!1,r=t.props.rootSbRef.child("compositions").val();for(var l in r){if(a)break;var d=!1;for(var p in r)if(p!=l)if(r[p].tiles&&r[p].tiles[l]&&n(r[p].tiles[l]))d=!0;else if(!d)for(var c in r[p].groups)r[p].groups[c].items&&r[p].groups[c].items[l]&&n(r[p].groups[c])?d=!0:!r[p].groups[c].items||r[p].groups[c].items[l]||(d=!0);if(!d)for(var h in r[l].groups){if(a)break;if(!n(r[l].groups[h]))for(var u in r[l].groups[h].items){var m=r[l].tiles[u];if(!n(m)&&"widget"==m.type)if(0==m.layout.updateAnimation.active){if(!Ht(l,u)){a=!0,s=!1;break}}else if(!$t(l,u)){a=!0,s=!1;break}}}}if(s){var f=t.calculateOnairLayout();t._adaptationGlobals=t.calculateAdaptationGlobals(f.width,f.height),t.props.onCompositionReady&&(t.props.onCompositionReady(t),console.log("%ccomp is ready","background:green")),t.props.compositionInstanceId||t.props.subComposition||t.props.compositionEditor||setTimeout(function(e){Et.A.setup(t)},100)}else setTimeout(e.bind(t),100)};e()}},componentWillMount:function(){var t=this;this.props.compositionInstanceId||this.props.subComposition||this.props.compositionEditor||(f.A.reset(),Pt={},Wt={},Ft={},Vt={},Yt={},Xt={},jt={},Bt={},Gt={},Ut={});var e=this.getTimelineId(),i=this.props.sbRef.key;this.props.compositionInstanceId&&(i=this.props.compositionInstanceId);var o=this.props.sbRef.parent.parent.child("compositionStates").child(i),n="In";if(o.exists()&&(n=o.val()),f.A.compAnimationState[i]||(f.A.compAnimationState[i]={}),f.A.compAnimationState[i][e]=n,f.A.compAnimationTargetState[i]||(f.A.compAnimationTargetState[i]={}),f.A.compAnimationTargetState[i][e]=n,f.A.timelineMaxState[i]||(f.A.timelineMaxState[i]={}),f.A.timelineMaxState[i][e]=n,f.A.compParentTimeline[i]||(f.A.compParentTimeline[i]={}),f.A.compParentTimeline[i][e]={parentTimelineId:void 0,linked:!1},this.props.rootTimelines[i]||(this.props.rootTimelines[i]={}),this.props.rootTimelines[i][e]||(this.props.rootTimelines[i][e]={},Dt.getDefaultTimelines().forEach(function(o){t.props.rootTimelines[i][e][o]=new TimelineMax(Lt(Lt(Lt(Lt(Lt({onStart:t.onTimelineStart.bind(t,o,e,t.props.compositionInstanceId),onUpdateParams:["{self}"],onUpdate:t.onTimelineUpdate.bind(t,o,e,t.props.compositionInstanceId)},"onUpdateParams",["{self}"]),"onComplete",t.onTimelineComplete.bind(t,o,e,t.props.compositionInstanceId)),"onCompleteParams",["{self}"]),"onReverseComplete",t.onTimelineReverseComplete.bind(t,o,e,t.props.compositionInstanceId)),"onReverseCompleteParams",["{self}"])),t.props.rootTimelines[i][e][o].data={timelineId:e,timelineEvent:t.timelineEvent,compositionInstanceId:t.props.compositionInstanceId},t.props.rootTimelines[i][e][o].pause()})),this.props.compositionInstanceId){var s=this.props.sbRef.val();for(var a in s.data)Zt(this.props,Pt,a,s.data[a]),this.callDebounceUpdateInstanceTileValue(a);for(var r in s.tiles)Zt(this.props,Vt,r,s.tiles[r].layout);for(var l in s.groups)Zt(this.props,Ft,l,s.groups[l].layout)}else this.sBindAsObject(this.props.sbRef,"composition"),this.props.sbRef.child("data").on("child_added",function(e){t.props.sbRef.child("data/"+e.key).on("value",function(e,i,o){if("editor-only"!=o){var n=e.val(),s=e.key;if(n&&!$.isEmptyObject(n)){var a=t.props.sbRef.val();window.onairMode&&"compositionPreview"==window.onairMode&&a&&a.dataLinks&&a.dataLinks[s]?i&&Zt(t.props,Pt,s,n):Zt(t.props,Pt,s,n),a&&a.dataLinks&&a.dataLinks[s]&&i||t.callDebounceUpdateInstanceTileValue(s)}}})}),this.props.sbRef.child("buttons").off("child_added"),this.props.sbRef.child("buttons").on("child_added",function(e){t.props.sbRef.child("buttons/"+e.key).off("value"),t.props.sbRef.child("buttons/"+e.key).on("value",function(e){var i=e.val(),o=Ht(t.props.sbRef.key,e.key);o&&o.onSingularButton(i)})});this.props.compositionInstanceId||this.props.subComposition||(window.singularSetInteractiveHighlight=function(t){this.setInteractiveHighlight(t)}.bind(this))},componentDidMount:function(){var t=this;if(!this.props.compositionInstanceId&&!this.props.subComposition&&window.singularMessage){this.renderWindowRootElement.addEventListener("mousedown",this.processMousedown),this.renderWindowRootElement.addEventListener("mouseup",this.processMouseup),this.renderWindowRootElement.addEventListener("dblclick",this.processDblClick),this.renderWindowRootElement.addEventListener("mousemove",this.processMousemove),this.renderWindowRootElement.addEventListener("mouseleave",this.processMouseleave),document.body.addEventListener("keydown",this.processKeydown),document.body.addEventListener("keyup",this.processKeyup),window.addEventListener("focus",this.processFocus,!0),window.addEventListener("blur",this.processBlur,!0);var e=new Hammer(this.renderWindowRootElement);e.get("tap").set({enable:!1}),e.get("doubletap").set({enable:!1}),e.get("press").set({enable:!1}),e.get("pan").set({enable:!1}),e.get("swipe").set({direction:Hammer.DIRECTION_ALL}),e.on("swipe",function(e){t.processSwipe(e)}),this.resizeRenderWindow(),$("#onairPreview").on("splitPaneChange",function(){this.resizeRenderWindow()}.bind(this)),$(window).resize(function(){this.resizeRenderWindow()}.bind(this))}if(this.setupLinkTimeline(),this.readCompositionStates(),this.props.compositionInstanceId){var i=this;!function(t){var e={In:!1,Out:!1},o=0,n=0,s=[];for(var a in t.groups)s.push(t.groups[a]),"none"!=t.groups[a].effects.In.effect&&(e.In|=!0,o=Math.max(o,t.groups[a].keyframes.In[1])),"none"!=t.groups[a].effects.Out.effect&&(e.Out|=!0,n=Math.max(n,t.groups[a].keyframes.Out[1]));var r=[];for(var l in t.tiles)r.push(t.tiles[l]),"none"!=t.tiles[l].effects.In.effect&&(e.In|=!0,o=Math.max(o,t.tiles[l].keyframes.In[1])),"none"!=t.tiles[l].effects.Out.effect&&(e.Out|=!0,n=Math.max(n,t.tiles[l].keyframes.Out[1]));for(var d in t.data)Zt(i.props,Pt,d,t.data[d]);for(var p in t.tiles)Zt(i.props,Vt,p,t.tiles[p].layout);for(var c in t.groups)Zt(i.props,Ft,c,t.groups[c].layout);var h={groups:s,tiles:r,settings:t.settings,dataSources:t.dataSources,dataLinks:t.dataLinks,nodeRefs:t.nodeRefs,data:t.data};i.setState({composition:h},function(){i.props.handle&&i.props.handle.setupBinding({mainCompTimelineId:i.props.sbRef.key,compDuration:{In:o,Out:n},timeline2Active:!0===i.props.rootSbRef.child("compositionProps/timeline2Active/"+i.props.sbRef.key).val()})})}(this.props.sbRef.val()),this.setState({rootLayout:p().getDefaultLayout(0)})}else{for(var o in this.state.composition.tiles){var n={};$.extend(!0,n,this.state.composition.tiles[o].layout),Kt(this.props,o,Vt,n),Zt(this.props,Vt,o,n)}for(var s in this.state.composition.groups)Kt(this.props,s,Ft,this.state.composition.groups[s].layout),Zt(this.props,Ft,s,this.state.composition.groups[s].layout);for(var a in this.state.composition.nodeRefs){var r=this.state.composition.nodeRefs[a],l=function(){var e=r[d];if(e&&e.targetLocation&&e.targetLocation.length&&"dataNode"==e.targetLocation[e.targetLocation.length-1]){var i;i=t.props.sbRefMode?t.props.rootSbRef.child("compositions"):t.props.rootRtdbRef.child("compositions");var o,n=Ot(e.sourceLocation);try{for(n.s();!(o=n.n()).done;){var s,a=o.value;s="<selfCompId>"==a?t.props.sbRefMode?t.props.sbRef.key:t.props.rtdbRef.key:"<rootCompId>"==a?t.props.sbRefMode?t.props.rootSbRef.key:t.props.rootRtdbRef.key:a,i=i.child(s)}}catch(t){n.e(t)}finally{n.f()}"controlNode"==e.sourceType&&(i=i.child("controlNode").child("payload").child(e.sourceKey)).on("value",function(t){var i=t.val();if(i){var o,n=this.props.rootSbRef.child("compositions"),s=Ot(e.targetLocation);try{for(s.s();!(o=s.n()).done;){var a=o.value;"<selfCompId>"==a?n=n.child(this.props.rtdbRef.key):"<rootCompId>"==a?n=n.child(this.props.rootRtdbRef.key):"dataNode"!=a&&(n=n.child(a))}}catch(t){s.e(t)}finally{s.f()}n.update(i)}}.bind(t))}};for(var d in r)l()}}},componentWillUnmount:function(){Et.A.uninstallScript(this.props.sbRef.key);var t,e,i=this.props.compositionInstanceId||this.props.sbRef.key;this.props.rootTimelines[i]&&delete this.props.rootTimelines[i],e=(t=this.props).sbRef.key,t.compositionInstanceId&&(e=t.compositionInstanceId),f.A.destroyIframe(e);try{this.renderWindowRootElement.removeEventListener("mousedown",this.processMousedown),this.renderWindowRootElement.removeEventListener("mouseup",this.processMouseup),this.renderWindowRootElement.removeEventListener("mousemove",this.processMousemove),this.renderWindowRootElement.removeEventListener("mouseleave",this.processMouseleave),this.renderWindowRootElement.removeEventListener("dblclick",this.processDblClick),document.body.removeEventListener("keydown",this.processKeydown),document.body.removeEventListener("keyup",this.processKeyup),window.removeEventListener("focus",this.processFocus),window.removeEventListener("blur",this.processBlur)}catch(t){}},setInteractiveHighlight:function(t){t&&this.interactiveHighlightInterval||!t&&!this.interactiveHighlightInterval||(t?this.interactiveHighlightInterval=setInterval(function(){this.interactiveHighlightRef&&this.interactiveHighlightRef.renderCanvas()}.bind(this),100):(clearInterval(this.interactiveHighlightInterval),this.interactiveHighlightInterval=null,this.interactiveHighlightRef=null),this.setState({interactiveHighlightEnabled:t}))},getGroupArray:function(){var t=[];if(this.state.composition)for(var e in this.state.composition.groups)Kt(this.props,e,Ft,this.state.composition.groups[e].layout),t.push(this.state.composition.groups[e]);return t},getTileArray:function(){var t=[];if(this.state.composition)for(var e in this.state.composition.tiles)Kt(this.props,e,Vt,this.state.composition.tiles[e].layout),t.push(this.state.composition.tiles[e]);return t},setupLinkTimeline:function(){var t=this,e=function(t,e,i,o,n,s,a){if(f.A.suppressOnAnimationEvent=!0,n){t.add(e,0),i.add(o,0);var r=a.compositionInstanceId||a.sbRef.key,l=a.compositionInstanceId||t.data.timelineId,d="Out1";f.A.timelineMaxState&&f.A.timelineMaxState[r]&&(d=f.A.timelineMaxState[l][t.data.timelineId],f.A.timelineMaxState[r][e.data.timelineId]=d,f.A.compAnimationState[r][e.data.timelineId]=d,f.A.compAnimationTargetState[r][e.data.timelineId]=d)}else t.remove(e),i.remove(o);var p=function(){t.getChildren(!0,!1,!0).forEach(function(t){t.restart()});var e=t.time();t.restart(),t.pause(),t.seek(e)},c=function(){i.getChildren(!0,!1,!0).forEach(function(t){t.restart()});var t=i.time();i.restart(),i.pause(),i.seek(t)};"In"==s?(c(),p()):(p(),c()),f.A.suppressOnAnimationEvent=!1};if(this.props.compositionInstanceId){var i=this.props.sbRef.child("settings").child("linkTimeline");if(this.props.parentTimelineId){var o=this.props.rootTimelines[this.props.compositionInstanceId][this.props.parentTimelineId].In,n=this.props.rootTimelines[this.props.compositionInstanceId][this.getTimelineId()].In,s=this.props.rootTimelines[this.props.compositionInstanceId][this.props.parentTimelineId].Out,a=this.props.rootTimelines[this.props.compositionInstanceId][this.getTimelineId()].Out,r={};$.extend(!0,r,this.state.composition.settings),r.parentTimeline=this.props.parentTimelineId,this.setState({settings:r}),f.A.compParentTimeline[this.props.compositionInstanceId][this.getTimelineId()]={parentTimelineId:this.props.parentTimelineId,linked:i.val()},e(o,n,s,a,i.val(),this.state.activeTimeline,this.props)}}else this.props.sbRef.child("settings").child("linkTimeline").on("value",function(i){if(t.props.parentTimelineId){var o=t.props.rootTimelines[t.props.parentTimelineId][t.props.parentTimelineId].In,n=t.props.rootTimelines[t.getTimelineId()][t.getTimelineId()].In,s=t.props.rootTimelines[t.props.parentTimelineId][t.props.parentTimelineId].Out,a=t.props.rootTimelines[t.getTimelineId()][t.getTimelineId()].Out;i.exists()&&t.props.sbRef.child("settings").child("parentTimeline").set(t.props.parentTimelineId,!1,!0),f.A.compParentTimeline[t.getTimelineId()][t.getTimelineId()]={parentTimelineId:t.props.parentTimelineId,linked:i.val()},e(o,n,s,a,i.val(),t.state.activeTimeline,t.props)}})},readCompositionStates:function(){if(this.props.compositionInstanceId)t=this.props.sbRef.key,e=this.props.compositionInstanceId,i="In",f.A.compAnimationState[e][t]=i,f.A.compAnimationTargetState[e][t]=i,f.A.timelineMaxState[e][t]=i,this.setupCompAnimationState(this.getTweenTimelines(),i);else{var t=this.props.sbRef.key,e=this.props.compositionInstanceId||t,i=f.A.compAnimationState[e][t];this.setupCompAnimationState(this.getTweenTimelines(),i)}},setupCompAnimationState:function(t,e){var i=this.props.sbRef.key,o=this.props.compositionInstanceId||i,n=Nt.getTopParent(this.props.rootSbRef.child("compositions"),o);if("In"==this.props.rootSbRef.child("compositionStates").child(n).val()?this._sendStateChangeToCompElements("In",o):this._sendStateChangeToCompElements("Out",o),!0!==f.A.compParentTimeline[o][i].linked)if("Out1"==e)t.Out.seek(t.Out.duration()),t.Out.play(),t.Out.data.completed=!0,t.Out.data.forward=!0,t.In.data.completed=!0,t.In.data.forward=!1,m.A.setActiveTimeline(this.getTimelineId(),"In",0);else if("In"==e){t.Out.data.completed=!0,t.Out.data.forward=!1,t.In.seek(t.In.duration()),t.In.play(),t.In.data.completed=!0,t.In.data.forward=!0;var s=t.In.duration();0==s&&(s=.5),m.A.setActiveTimeline(this.getTimelineId(),"In",s)}else if("Out2"==e){t.Out.seek(t.Out.duration()),t.Out.play(),t.Out.data.completed=!0,t.Out.data.forward=!0,t.In.data.completed=!0,t.In.data.forward=!1;var a=t.Out.duration();0==a&&(a=.5),m.A.setActiveTimeline(this.getTimelineId(),"Out",a)}},resetupCompAnimationState:function(t,e){var i="In";f.A.compAnimationState[t]&&f.A.compAnimationState[t][e]&&(i=f.A.compAnimationState[t][e]),this.setupCompAnimationState(this.getTweenTimelines(),i)},resetupAllCompAnimationState:function(){for(var t in f.A.compAnimationState)for(var e in f.A.compAnimationState[t]){var i=f.A.compAnimationState[t][e],o=this.props.rootTimelines[t][e];this.setupCompAnimationState(o,i)}},getTimelineId:function(){return this.props.sbRef.key},getTweenTimelines:function(){var t=this.props.sbRef.key,e=t;return this.props.compositionInstanceId&&(e=this.props.compositionInstanceId),this.props.rootTimelines[e][t]},onTimelineStart:function(t,e,i,o){if("In"==t){var n=this.props.compositionInstanceId||e;this._sendStateChangeToCompElements("In",n)}},onTimelineUpdate:function(t,e,i,o){"preview"!=this.props.mode||i||(this.props.onTimelinePosition&&this.props.onTimelinePosition(this.props.sbRef.key,t,o.time()),m.A.setActiveTimeline(e,t,o.time()))},_sendStateChangeToCompElements:function(t,e){for(var i in f.A.onAirWidgetRefMap[e])(o=f.A.onAirWidgetRefMap[e][i])&&("In"==t?o.behaviorResume():o.behaviorPause());if(f.A.iframeRefMap[e])for(var i in f.A.iframeRefMap[e]){var o;(o=f.A.iframeRefMap[e][i])&&o.onSingularStateChanged({animation:t})}},_updatePointerEvents:function(t,e){if(!0!==this.props.showBoundingBox){for(var i in f.A.onAirWidgetRefMap[e])(o=f.A.onAirWidgetRefMap[e][i])&&o.tweenRef&&Nt.isInteractivityEnabled(o.props.tile.layout)&&(o.tweenRef.style.pointerEvents="In"==t?"auto":"none");for(var i in f.A.onAirGroupRefMap[e])(o=f.A.onAirGroupRefMap[e][i])&&o.tweenRef&&Nt.isInteractivityEnabled(o.props.group.layout)&&(o.tweenRef.style.pointerEvents="In"==t?"auto":"none");if(f.A.iframeRefMap[e])for(var i in f.A.iframeRefMap[e]){var o;(o=f.A.iframeRefMap[e][i])&&o.refs.iframeWidget&&1===o.props.tile.supportInteractivity&&(o.refs.iframeWidget.style.pointerEvents="In"==t?"auto":"none")}}},onTimelineComplete:function(t,e,i,o){var n,s=this.props.compositionInstanceId||e;"Out"==t&&this._sendStateChangeToCompElements("Out",s),"In"==t?n="In":"Out"==t&&(n="Out2"),f.A.compAnimationState[s][e]=n,f.A.timelineMaxState[s][e]=n;var a=!0===this.props.rootSbRef.child("compositionProps/timeline2Active").child(e).val();("In"==t||"Out"==t&&a)&&(this.props.onStateChanged&&!this.props.compositionInstanceId&&this.props.onStateChanged(e,n),Et.A.handle_onStateChanged(e,n)),o.data.completed=!0,o.data.forward=!0,m.A.setActiveTimeline(e,t,o.time()),this._updatePointerEvents(n,s),!i&&this.timelineEvent(o,e,{event:"stop",duration:o.duration(),currentTime:o.time(),direction:"forward",timeline:t})},onTimelineReverseComplete:function(t,e,i,o){var n,s=this.props.compositionInstanceId||e;"In"==t&&this._sendStateChangeToCompElements("Out",s),"In"==t?n="Out1":"Out"==t&&(n="In"),f.A.compAnimationState[s][e]=n,f.A.timelineMaxState[s][e]=n,this.props.onStateChanged&&!this.props.compositionInstanceId&&this.props.onStateChanged(e,n),Et.A.handle_onStateChanged(e,n),o.data.completed=!0,o.data.forward=!1,m.A.setActiveTimeline(e,t,o.time()),this._updatePointerEvents(n,s),!i&&this.timelineEvent(o,e,{event:"stop",duration:o.duration(),currentTime:o.time(),direction:"backward",timeline:t})},setTimelinePosition:function(t,e,i){var o=this.getTweenTimelines();for(var n in"Out"==e?(o.In.seek(o.In.duration()),o.In.pause()):"In"==e&&(o.Out.seek(0),o.Out.pause()),i=Math.min(i,o[e].duration()),o[e].seek(i),o[e].pause(),f.A.widgetWithAnimationCallback)for(var s in f.A.widgetWithAnimationCallback[n]){var a=f.A.widgetWithAnimationCallback[n][s],r=o[e].time()-a.keyframes[e][0],l=a.keyframes[e][1]-a.keyframes[e][0],d=t==n;if(!d){for(var p=this.props.sbRef.parent.child(n).child("settings").child("linkTimeline").val(),c=this.props.sbRef.parent.child(n).child("settings").child("parentTimeline").val();c!=t&&p&&!$.isEmptyObject(c);)p=this.props.sbRef.parent.child(c).child("settings").child("linkTimeline").val(),c=this.props.sbRef.parent.child(c).child("settings").child("parentTimeline").val();d=c==t&&p}if(n==o[e].data.timelineId||d){var h=Ht(n,s);if(h){var u={event:"seek",timeline:e,duration:l,time:r};h.onSingularAnimation(u)}}}m.A.setActiveTimeline(this.getTimelineId(),e,i)},addPerspectiveStyle:function(t){var e=this.state.composition.settings;if(null==e||void 0===e.perspectiveActive||0==e.perspectiveActive)return t;var i={};return $.extend(!0,i,t),i.width=t.width,i.height=t.height,i.perspective=e.perspective+"px",i.perspectiveOrigin=e.perspectiveOriginX+"% "+e.perspectiveOriginY+"%",i},onUpdateDataTargetNodeRef:function(t,e,i,o){var n,s,a,r=[],l=Ot(e);try{for(l.s();!(a=l.n()).done;){var d=a.value;"<selfCompId>"!=d&&"<objId>"!=d&&("tiles"==d?s=Vt:"groups"==d?s=Ft:"layout"==d?s&&((n=zt(this.props,s,t))||(n={})):n&&r.push(d))}}catch(t){l.e(t)}finally{l.f()}var p=r.length;if(n&&p)if(this.props.compositionInstanceId){var c=zt(this.props,Xt,t);if(c&&void 0!==c[i]&&(o=c[i]),1==p){if(n[r[0]]==o)return;n[r[0]]=o,Zt(this.props,s,t,n);var h={};$.extend(!0,h,this.state.renderWindowStyle),h.forceRender=Math.random(),this.setState({renderWindowStyle:h})}}else{if(1==p){if(n[r[0]]==o)return;n[r[0]]=o,n.__controlNodes||(n.__controlNodes={}),n.__controlNodes[r[0]]=!0}Zt(this.props,s,t,n);var u,m=this.props.sbRef.parent,f=Ot(e);try{for(f.s();!(u=f.n()).done;){var v,g=u.value;v="<selfCompId>"==g?this.props.sbRefMode?this.props.sbRef.key:this.props.rtdbRef.key:"<objId>"==g?t:g,m=m.child(v)}}catch(t){f.e(t)}finally{f.f()}m.update(o,!1,!1,"editor-only",!0)}else console.log("Target location not found",e)},onUpdateDataTarget:function(t,e){var i={},o=zt(this.props,Pt,t);if(o)if(i=o,this.props.compositionInstanceId){var n=zt(this.props,Yt,t);n?(e&&Nt.extendControlNode(e,n),Nt.extendControlNode(i,e)):Nt.extendControlNode(i,e),Zt(this.props,Pt,t,i),this.updateInstanceTileValue(this.props.compositionInstanceId,t,i)}else{if(zt(this.props,Wt,t,!1)){var s=!1;for(var a in e)if(!Nt.compareObject(i,e[a])){s=!0;break}if(!s){var r=this.props.sbRef.child("tiles").child(t).val();if(!(r&&r.layout&&r.layout.updateAnimation&&r.layout.updateAnimation.active&&r.layout.updateAnimation.alwaysExecute))return}}else Zt(this.props,Wt,t,!0,!1);Nt.extendControlNode(i,e),Zt(this.props,Pt,t,i),this.callDebounceUpdateInstanceTileValue(t),window.onairMode||this.props.sbRef.child("data").child(t).set(i,!1,!0,"editor-only")}},callDebounceUpdateInstanceTileValue:function(t){var e=this,i=this.props.sbRef.child("tiles").child(t).val();if(!i||$.isEmptyObject(i))return Ut[t]||(Ut[t]=0),void(++Ut[t]<10&&setTimeout(function(){e.callDebounceUpdateInstanceTileValue(t)},100));if("widget"==i.type){var o=this.props.compositionInstanceId||this.props.sbRef.key,n=zt(this.props,Pt,t);n&&(o=this.props.compositionInstanceId||this.props.sbRef.key,this.updateInstanceTileValue(o,t,n)),Ut[t]=0}},updateInstanceTileValue:function(t,e,i){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&jt[t]&&jt[t][e])return!0;var o=!1,n=$t(t,e);if(n&&"DOMNOTFOUND"!=n.onDataChange(i)&&(o=!0),!o){var s=Ht(t,e);s&&(o=s.onSingularValue(i))}return o},getRenderTargetDom:function(){return"preview"==this.props.mode?$("#onairPreview"):$("#onairLive")},getIFrameRef:function(t,e,i){if(i){for(var o in f.A.iframeRefMap)if(f.A.iframeRefMap[o][e]&&f.A.iframeRefMap[o][e].state.iFrame.contentWindow)return f.A.iframeRefMap[o][e];return null}return f.A.iframeRefMap[t]&&f.A.iframeRefMap[t][e]?f.A.iframeRefMap[t][e]:null},calculateRenderWindowStyle:function(t,e){var i,o,n,s=this.getDisplayVariant();if(s&&!this.props.standaloneOnAir){var a=1920,r=1080,l=z().VARIANT_RESOLUTIONS.find(function(t){return t.id===s.resolution});l&&(a=l.width||t,r=l.height||e),t>a&&e>r?(n=1,a/t>r/e?o=(i=t)*r/a:i=(o=e)*a/r):(n=t/e>a/r?e/r:t/a,i=a,o=r)}else!0===this.props.customSize?(i=this.props.width,o=this.props.height):(i=t,o=e),this.props.noScaleUp&&o<e&&i<t||(n=t/e>i/o?e/o:t/i);return{width:i,height:o,scale:n}},resizeRenderWindow:function(){if(!this.props.subComposition){var t=this.getRenderTargetDom(),e=0,i=0;if(t&&(e=t.width(),i=t.height()),0!=e&&0!=i){var o=this.calculateRenderWindowStyle(e,i);this.setState({renderWindowStyle:{width:o.width,height:o.height,scale:o.scale,forceRender:Math.random()}})}else setTimeout(this.resizeRenderWindow,100)}},__findTileAndField:function(t,e){var i,o;this.sbRefMode?(i=this.props.sbRef.parent.child(t).child("dataLinks").val(),o=this.props.sbRef.parent.child(t).child("nodeRefs").val()):(i=this.props.rtdbRef.parent.child(t).child("dataLinks").val(),o=this.props.rtdbRef.parent.child(t).child("nodeRefs").val());var n=[];for(var s in i)for(var a in i[s])i[s][a].key&&i[s][a].key==e&&(n[s]||(n[s]=[]),n[s].push({field:a}));for(var r in o)for(var l in o[r])o[r][l].sourceKey&&o[r][l].sourceKey==e&&(n[r]||(n[r]=[]),n[r].push({field:l}));return n},setControlNodeOffline:function(t,e,i,o){var n;"function"!=typeof(n=this.props.sbrefMode?this.props.sbRef:this.props.rtdbRef).val&&(n=this.props.sbRef);var s=n.parent.child(t).child("dataSources").child("composition").child("controlNode").child("payload"),a=n.parent.child(t).child("dataSources").child("composition").child("controlNode").child("model").child("fields");a=a.val()?a.val():[];var r={},l=0;for(var d in e){var p=s.child(d),c=e[d],h=!1;"object"===Ct(p.val())&&$.isEmptyObject(p.val())||(h=!0),h&&(r[d]=c,l++)}l>0&&s.update(r,!1,!1,o,!1,!0),Et.A.handle_setControlNodeOffline(t,e,i)},getWidgetPayload:function(t,e){return Pt[t]?Pt[t][e]:{}},setWidgetPayload:function(t,e,i){var o=i;Pt[t]&&Pt[t][e]&&(o=Pt[t][e],Nt.extendControlNode(o,i)),this.updateInstanceTileValue(t,e,o)},__getTileSbaseLocation:function(t,e){return this.props.rootSbRef.child("compositions").child(t).child("tiles").child(e).child("layout")},getTileLayout:function(t,e){return this.__getTileSbaseLocation(t,e).val()},setTileLayout:function(t,e,i){var o=this.__getTileSbaseLocation(t,e),n=o.val();if(!$.isEmptyObject(n)){for(var s in i)n[s]=i[s];o.update(n)}},__getGroupSbaseLocation:function(t,e){return this.props.rootSbRef.child("compositions").child(t).child("groups").child(e).child("layout")},getGroupLayout:function(t,e){return this.__getGroupSbaseLocation(t,e).val()},setGroupLayout:function(t,e,i){var o=this.__getGroupSbaseLocation(t,e),n=o.val();if(!$.isEmptyObject(n)){for(var s in i)n[s]=i[s];o.update(n)}},processWidgetClick:function(t,e,i){var o=Ht(t,e);o&&o.onSingularButton({id:i,ts:Date.now()})},seekUpdateAnimation:function(t,e,i,o){return this.setControlNodeOffline(t,i),!0},__setNodeRef:function(t,e,i){var o={},n={};for(var s in i)if(this.state.composition.dataSources&&this.state.composition.dataSources.composition&&this.state.composition.dataSources.composition[t]&&this.state.composition.dataSources.composition[t].payload&&void 0!==this.state.composition.dataSources.composition[t].payload[s]){var a=this.state.composition.dataSources.composition[t].model.fields;for(var r in a||(a=[]),this.state.composition.dataLinks)for(var l in this.state.composition.dataLinks[r])if(this.state.composition.dataLinks[r][l].key&&this.state.composition.dataLinks[r][l].key==s){o[r]||(o[r]=[]),o[r].push({field:l,data:Nt.convertNodeValue(Nt.getNode(a,s),i[s])});break}for(var d in this.state.composition.nodeRefs)for(var p in this.state.composition.nodeRefs[d])if(this.state.composition.nodeRefs[d][p].sourceKey&&this.state.composition.nodeRefs[d][p].sourceKey==s){n[d]||(n[d]=[]),n[d].push({field:p,data:Nt.convertNodeValue(Nt.getNode(a,s),i[s]),nodeRef:this.state.composition.nodeRefs[d][p]});break}}for(var c in o){var h=zt(this.props,Pt,c);if(h){var u=h,m={};for(var f in o[c]){var v=o[c][f];u[v.field]=v.data,m[v.field]=v.data}Zt(this.props,Pt,c,u),Zt(this.props,Yt,c,m),this.updateInstanceTileValue(e,c,u)}}for(var g in n){var y=zt(this.props,Xt,g);for(var w in y||(y=[]),n[g]){var b=n[g][w];y[b.field]=b.data}for(var I in Zt(this.props,Xt,g,y),n[g]){var S=n[g][I];this.onUpdateDataTargetNodeRef(g,S.nodeRef.targetLocation,S.field,S.data)}}},setControlNode:function(t,e){this.__setNodeRef("controlNode",t,e)},setWidgetNode:function(t,e){this.__setNodeRef("widgetNode",t,e)},onResize:function(t,e){this.setState({compositionInstanceWidth:t,compositionInstanceHeight:e})},onWebFontActive:function(){},setupAnimation:function(){for(var t in f.A.onAirWidgetRefMap)for(var e in f.A.onAirWidgetRefMap[t]){var i=f.A.onAirWidgetRefMap[t][e];i.setupTween(i.props)}for(var o in f.A.onAirGroupRefMap)for(var n in f.A.onAirGroupRefMap[o]){var s=f.A.onAirGroupRefMap[o][n];s.setupTween(s.props)}},onWidgetSelect:function(t,e,i){this.OnAirMouseMixinGroupId=e,this.OnAirMouseMixinTileId=i,this.window_mousedown(t),this.props.onWidgetSelect(t,e,i)},onGroupSelect:function(t,e){},timelineEvent:function(t,e,i){"In"==i.timeline?"forward"==i.direction?i.targetState="In":i.targetState="Out1":"forward"==i.direction?i.targetState="Out2":i.targetState="In";var o={compositionId:e,message:i};window.parent.postMessage({event:"_singular_composition_timeline_event",params:o},"*"),Et.A.handle_timelineEvent(o)},updateAdaptationGlobals:function(t){var e=this,i={},o={};$.extend(!0,i,this.state.adaptationGlobals,t),$.extend(!0,o,this.state.renderWindowStyle),o.forceRender=Math.random(),this.setState({adaptationGlobals:i,renderWindowStyle:o},function(){var i={};for(var o in t)t[o]!=e.state.adaptationGlobals[o]&&(i[o]=t[o]);for(var n in f.A.iframeRefMap)for(var s in f.A.iframeRefMap[n])f.A.iframeRefMap[n][s].onSingularAdaptationGlobalsChanged(e.state.adaptationGlobals,i)})},getDisplayVariant:function(){var t=this;if("[disable_display_variant]"!=this.props.displayVariant){var e,i=this.props.rootSbRef.child("displayVariants").val();return this.props.displayVariant&&i.variants&&(e=i.variants.filter(function(e){return e.name==t.props.displayVariant})[0]),!window.singularLogDisplayVariantNotFound&&!e&&""!=this.props.displayVariant&&void 0!==this.props.displayVariant&&i.variants&&i.variants.length>0&&(console.log("Display variant ".concat(this.props.displayVariant," not found. Switching to default display variant")),window.singularLogDisplayVariantNotFound=1),!e&&""==this.props.displayVariant&&i.variants&&i.variants.length>0&&(e=i.variants.filter(function(t){return t.name==i.active})[0]),e}},calculateOnairLayout:function(){var t={width:this.props.width,height:this.props.height};return this.props.subComposition||(("preview"!=this.props.mode&&this.state.renderWindowStyle.width||0==this.props.customSize)&&(t={width:this.state.renderWindowStyle.width,height:this.state.renderWindowStyle.height}),this.getDisplayVariant()&&(t={width:this.state.renderWindowStyle.width,height:this.state.renderWindowStyle.height})),this.props.compositionInstanceId&&this.state.compositionInstanceWidth&&(t={width:this.state.compositionInstanceWidth,height:this.state.compositionInstanceHeight}),t},calculateAdaptationGlobals:function(t,e){var i,o=this.getDisplayVariant();if(o)if(this.props.compositionInstanceId||this.props.subComposition)i=this.props.adaptationGlobals;else{var n=1920,s=1080,a=z().VARIANT_RESOLUTIONS.find(function(t){return t.id===o.resolution});a&&(n=a.width,s=a.height),i=B().addDefaultValues(i),$.extend(!0,i,o.globals),i=B().initializeGlobals(i,n,s),this.props.windowAdaptationGlobals&&$.extend(!0,i,this.props.windowAdaptationGlobals)}else i=this.props.compositionInstanceId||this.props.subComposition?this.props.adaptationGlobals:this.props.windowAdaptationGlobals?B().initializeGlobals(this.state.adaptationGlobals,t,e):B().initializeGlobals(this.props.adaptationGlobals,t,e);return i},render:function(){var t=this;if($.isEmptyObject(this.state.composition))return!1;var e=this.getGroupArray(),i=this.getTileArray(),o=this.calculateOnairLayout(),s=this.calculateAdaptationGlobals(o.width,o.height),a=this.props.rootSbRef.child("compositionProps/timeline2Active").val(),r=this.props.automaticTextDirection;this.props.compositionInstanceId||this.props.subComposition||this.state.composition.settings&&(r=this.state.composition.settings.automaticTextDirection);var d,c,h,u,m,v,g,y,w=function(t,e){var l=this;return n().createElement(te,{ref:function(e){return function(t,e,i){if(i){var o=t.sbRef.key;t.compositionInstanceId&&(o=t.compositionInstanceId),f.A.onAirGroupRefMap[o]||(f.A.onAirGroupRefMap[o]={}),f.A.onAirGroupRefMap[o][e]=i}}(l.props,t.id,e)},key:t.id,group:t,tiles:i,selection:this.state.selection,rtdbRef:this.props.rtdbRef,rootRtdbRef:this.props.rootRtdbRef,sbRef:this.props.sbRef,rootSbRef:this.props.rootSbRef,sbRefMode:this.props.sbRefMode,iframeName:this.props.iframeName,editingCompId:this.props.editingCompId,mode:this.props.mode,showBoundingBox:this.props.showBoundingBox,settings:this.state.composition.settings,onAirLayout:o,forceRender:this.state.renderWindowStyle.forceRender?this.state.renderWindowStyle.forceRender:this.props.forceRender,styles:this.state.composition.styles,dataLinks:this.state.composition.dataLinks,nodeRefs:this.state.composition.nodeRefs,onUpdateDataTarget:this.onUpdateDataTarget,onUpdateDataTargetNodeRef:this.onUpdateDataTargetNodeRef,timelines:Dt.getDefaultTimelines(),tweenTimelines:this.getTweenTimelines(),timeline2Active:a,linkTimeline:this.state.composition.settings&&this.state.composition.settings.linkTimeline,rootTimelines:this.props.rootTimelines,parentTimelineId:this.getTimelineId(),compositionInstanceId:this.props.compositionInstanceId,parentTileId:this.props.parentTileId,parentCompId:this.props.parentCompId,subComposition:this.props.subComposition,compositionEditor:this.props.compositionEditor,onTimelinePosition:this.props.onTimelinePosition,onAirRefCollection:this.props.onAirRefCollection,onWidgetSelect:this.onWidgetSelect,onUpdate:this.props.onUpdate,onStateChanged:this.props.onStateChanged,onTileProperties:this.props.onTileProperties,onGroupSelect:this.onGroupSelect,mainComposition:this.props.mainComposition,adaptationGlobals:s,automaticTextDirection:r,onWebFontActive:this.onWebFontActive,resetupCompAnimationState:this.resetupCompAnimationState})}.bind(this),b="onair-renderer";if(this.props.subComposition&&(b+=" sub-composition"),this.props.compositionInstanceId&&(b+=" composition-instance"),c=this.props.compositionInstanceId?this.state.rootLayout:p().getDefaultLayout(0),d=p().layoutToStyle(c,this.props.settings,"composition",d,o),!this.props.compositionInstanceId&&!this.props.subComposition&&this.state.renderWindowStyle.width&&this.state.renderWindowStyle.height){d.width=this.state.renderWindowStyle.width,d.height=this.state.renderWindowStyle.height;var I=1;this.state.renderWindowStyle.scale&&(I=this.state.renderWindowStyle.scale);var S=this.getRenderTargetDom(),T=S.width(),R=S.height();null!=T&&null!=T||(T=0),null!=R&&null!=R||(R=0),d.overflow="hidden",this.props.canvasMode?(d.transform=l().vsprintf("scale(%f, %f) translate(%dpx, %dpx)",[1,1,0,0]),d.left=0,d.top=0,d.width=this.props.width,d.height=this.props.height):(d.transform=l().vsprintf("scale(%f, %f) translate(%dpx, %dpx)",[I,I,0,0]),d.left=-(this.state.renderWindowStyle.width/2-T/2),d.top=-(this.state.renderWindowStyle.height/2-R/2))}(d=this.addPerspectiveStyle(d),!1!==this.props.visible?(d.visibility="inherit",d.zIndex=0):(d.visibility="hidden",d.zIndex=-1),!window.singularScene.bgcolor||this.props.compositionInstanceId||this.props.subComposition||(d.backgroundColor=window.singularScene.bgcolor,d.transformStyle="inherit"),this.props.compositionInstanceId||this.props.subComposition||!this.props.backgroundColor||(d.backgroundColor=this.props.backgroundColor),this.props.compositionInstanceId||this.props.subComposition)||(b+=" root-onair",(0==this.props.showWatermark||2==this.props.showWatermark)&&(this.state.composition&&this.state.composition.settings&&(g=this.state.composition.settings.watermarkX,y=this.state.composition.settings.watermarkY),h=n().createElement(F.A,{x:g,y,movingWatermark:2==this.props.showWatermark})),this.props.appPreview&&(u=n().createElement(X,{zIndex:"-9999"})),1==this.state.interactiveHighlightEnabled&&(m=n().createElement(_,{visible:!0,rootSbRef:this.props.sbRef,ref:function(e){return t.interactiveHighlightRef=e}})),window.singularReframeActive&&(v=n().createElement(W,{ref:function(e){return t.renderFrameNumberRef=e}})));return n().createElement("div",{style:{width:"100%",height:"100%"}},n().createElement("div",{className:b,style:d,ref:function(e){return t.renderWindowRootElement=e}},h,u,e.map(w)),m,v)},setFrameNumber:function(t){t<0?console.error("setFrameNumber is invalid "+t):this.renderFrameNumberRef?this.renderFrameNumberRef.setFrameNumber(t):console.error("renderFrameNumberRef is invalid")},getElementsByPoint:function(t,e,i){if(this.renderWindowRootElement){var o=[];"keydown"!=i&&"keyup"!=i&&"blur"!=i&&"focus"!=i&&(o=this.renderWindowRootElement.querySelectorAll("[data-si-e-"+i+"]"));for(var n=[],s=0;s<o.length;s++){var a=o[s].getBoundingClientRect();if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom){if("hidden"==o[s].style.visibility)continue;var r=o[s].getAttribute("data-si-id"),l=o[s].getAttribute("data-si-compId"),d=o[s].getAttribute("data-si-ownerId"),p=void 0,c=void 0,h=void 0,u=void 0,m=f.A.onAirWidgetRefMap[l][r];if(m){var v=m.props.tile;h=v.effects,p=v.type,c=v.name,u=v.layout.events}else{if(!(m=f.A.onAirGroupRefMap[l][r]))continue;var g=m.props.group;p="group",c=g.name,h=g.effects,u=g.layout.events}for(var y=d,w=l;f.A.compParentTimeline[y]&&f.A.compParentTimeline[y][w]&&f.A.compParentTimeline[y][w].linked;)w=y=f.A.compParentTimeline[y][w].parentTimelineId;for(var b=o[s].style.opacity,I=o[s].parentNode;0!=b&&I!=this.renderWindowRootElement;){var S=I.style.opacity;"hidden"==I.style.visibility&&(S="0"),""!=S&&(b=S),I=I.parentNode}""==b&&(b=1);var T=!1,R=!0===this.props.rootSbRef.child("compositionProps/timeline2Active/"+l).val();if("composition"==p){var k=f.A.timelineMaxState[r];T=k&&("Out1"==k[r]||"Out2"==k[r])}if(0==T&&("none"!=h.In.effect||"none"!=h.Out.effect&&R)){var A=f.A.timelineMaxState[y];T=A&&("Out1"==A[w]||"Out2"==A[w])}if(0!=b&&0==T){var E;E="mousemove"==i?{mouseenter:u.mouseenter,mouseleave:u.mouseleave}:u[i],n.push({params:{type:p,name:c,id:r,compId:l,element:o[s]},eventProperty:E})}}}return n.sort(function(t,e){return Nt.compareTwoDomNodes(t.params.element,e.params.element)}),n.length>0?(delete n[0].params.element,n[0].type=i,n[0]):0==n.length?{type:i,params:{type:"background",element:this.renderWindowRootElement}}:void 0}},copyMouseEvent:function(t,e){var i={},o=function(t){i[t]=e[t]};switch(t){case"mouseup":case"mousedown":case"mouseenter":case"mouseleave":case"dblclick":o("button"),o("shiftKey"),o("altKey"),o("ctrlKey"),o("metaKey"),o("screenX"),o("screenY"),o("clientX"),o("clientY"),o("offsetX"),o("offsetY"),o("layerX"),o("layerY"),o("movementX"),o("movementY"),o("pageX"),o("pageY"),o("x"),o("y");break;case"keydown":case"keyup":o("shiftKey"),o("altKey"),o("ctrlKey"),o("metaKey"),o("key"),o("code"),o("repeat"),o("charCode"),o("keyCode"),o("which");break;case"swiperight":case"swipeleft":case"swipeup":case"swipedown":i.centerX=e.center.x,i.centerY=e.center.y,o("angle"),o("deltaTime"),o("deltaX"),o("deltaY"),o("distance"),o("overallVelocity"),o("overallVelocityX"),o("overallVelocityY"),o("pointerType"),o("rotation"),o("scale"),o("velocity"),o("velocityX"),o("velocityY")}return i},processAction:function(t,e){t&&(t.params&&"background"==t.params.type?window.singularMessage({type:t.type,params:{event:this.copyMouseEvent(t.type,e),type:"background",compId:"all"}}):(t.eventProperty&&t.eventProperty.controlActive&&t.eventProperty.controlComp&&window.singularMessage({compId:t.eventProperty.controlComp,state:t.eventProperty.controlMode,type:"processAction"}),t.eventProperty&&t.eventProperty.messageActive&&(t.params.event=this.copyMouseEvent(t.type,e),t.params.info=t.eventProperty.messageInfo,delete t.eventProperty,window.singularMessage(t))))},processMouseup:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"mouseup"),t)},processDblClick:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"dblclick"),t)},processSwipe:function(t){if(!this.props.showBoundingBox)switch(t.direction){case Hammer.DIRECTION_RIGHT:this.processAction(this.getElementsByPoint(t.center.x,t.center.y,"swiperight"),t);break;case Hammer.DIRECTION_LEFT:this.processAction(this.getElementsByPoint(t.center.x,t.center.y,"swipeleft"),t);break;case Hammer.DIRECTION_UP:this.processAction(this.getElementsByPoint(t.center.x,t.center.y,"swipeup"),t);break;case Hammer.DIRECTION_DOWN:this.processAction(this.getElementsByPoint(t.center.x,t.center.y,"swipedown"),t)}},processKeydown:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"keydown"),t)},processKeyup:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"keyup"),t)},processFocus:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"focus"),t)},processBlur:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"blur"),t)},processMousedown:function(t){this.props.showBoundingBox||this.processAction(this.getElementsByPoint(t.pageX,t.pageY,"mousedown"),t)},processMouseleave:function(t){this.props.showBoundingBox||f.A.mouseoverElement&&(this.mouseleave(f.A.mouseoverElement,f.A.mouseoverElement.eventProperty.mouseleave,t),f.A.mouseoverElement=null)},mouseenter:function(t,e,i){e&&e.active&&(t.type="mouseenter",t.eventProperty=e,this.processAction(t,i))},mouseleave:function(t,e,i){e&&e.active&&(t.type="mouseleave",t.eventProperty=e,this.processAction(t,i))},processMousemove:function(t){if(!this.props.showBoundingBox){var e,i,o=function(t){return t&&t.params&&"background"!=t.params.type},n=this.getElementsByPoint(t.pageX,t.pageY,"mousemove");o(n)&&!f.A.mouseoverElement?(f.A.mouseoverElement={},$.extend(!0,f.A.mouseoverElement,n),this.mouseenter(n,n.eventProperty.mouseenter,t)):o(n)&&f.A.mouseoverElement&&(e=n,i=f.A.mouseoverElement,(e.params.name!=i.params.name||e.params.id!=i.params.id)&&(this.mouseleave(f.A.mouseoverElement,f.A.mouseoverElement.eventProperty.mouseleave,t),f.A.mouseoverElement={},$.extend(!0,f.A.mouseoverElement,n),this.mouseenter(n,n.eventProperty.mouseenter,t))),!o(n)&&f.A.mouseoverElement&&(this.mouseleave(f.A.mouseoverElement,f.A.mouseoverElement.eventProperty.mouseleave,t),f.A.mouseoverElement=void 0)}}});const ie=ee},14794:(t,e,i)=>{"use strict";i.d(e,{A:()=>q});var o=i(40961),n=i.n(o),s=i(40927),a=i.n(s),r=i(50313),l=i(49128),d=i(15734),p=i.n(d),c=i(56027),h=i(25897),u=i(3808);function m(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return f(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw s}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var g,y,w,b,I,S,T,R=i(45659),k=i(10611),A=i(9769),E=i(18898),L={},x={},C={commands:[],controlNodes:[],firstVideoSegment:null,syncTimeline:null,config:{graphicsDelay:0,syncGraphics:!1}},O=R.getDefaultCommands(),M=(R.getDefaultTransitions(),!0),D=!1,N={},_={},P={load:{count:0,total:0},command:{count:0,total:0},controlnode:{count:0,total:0},datanode:{count:0,total:0},total:{count:0,total:0}};window.record=function(t,e,i){var o=JSON.stringify(e).length+i.length+50,n=P[t];n.count++,n.total+=o,n.average=n.total/n.count,P.total.count++,P.total.total+=o,P.total.average=P.total.total/P.total.count,window.singularDebugFirebaseTraffic&&console.table(P)};var W,F,V,Y=function(t,e,i){var o=function(t){if(t.data&&t.data.timelineEvent&&!t.data.compositionInstanceId&&t.data.timelineEvent(t,t.data.timelineId,e),t.data&&t.data.animationCallbacks)for(var i in t.data.animationCallbacks)for(var o in t.data.animationCallbacks[i]){var n=t.data.animationCallbacks[i][o];"start"==e.event&&t.time()>n.beginTime&&t.time()<n.endTime?n.callback(t,n.props,"mid_start",e.timeline,void 0,t.time()-n.beginTime):"seek"!=e.event&&"stop"!=e.event&&"jump"!=e.event||n.callback(t,n.props,e.event,e.timeline,void 0,t.time()-n.beginTime,{jumpTo:e.jumpTo,jumpFrom:e.jumpFrom})}};e.currentTime=t.time(),e.duration=t.duration(),o(t),t.getChildren(!0,!1,!0).forEach(function(t){o(t)})},X=function(t,e,i){var o,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(V&&n&&null!==(o=V.compositions)&&void 0!==o&&null!==(o=o[e])&&void 0!==o&&null!==(o=o.settings)&&void 0!==o&&o.linkTimeline&&n.ignoreLinkTimeline)&&(D||"In"!=i||void 0===r.A.compAnimationTargetState[t]||"In"!=r.A.compAnimationTargetState[t][e])){var s=!0;!0===n.suppressTimelineEvent&&(s=!1),"Toggle"==i&&(i="In"==r.A.compAnimationTargetState[t][e]?"Out":"In");var a=!0;void 0!==T[e]&&!1===T[e]&&(a=!1),"In"==(i=R.getAnimationState2(i,a))?i="In":"Out1"!=i&&"Out2"!=i||(i=a?"Out":"rev__In");var l,d,p=function(t,e,i,o,n){if(i){var a=i.indexOf("rev__");if(-1!=a&&(i=i.substr(5)),!L[t])return;var l=L[t][e];if(l){l.In.timeScale(n.scale||1),l.Out.timeScale(n.scale||1);var d=!0;if("In"==i){var p="In"!=r.A.compAnimationTargetState[t][e];-1==a||0==a&&!p?0==l.Out.data.completed?(l.Out.reverse(),s&&Y(l.Out,{event:"start",direction:"backward",timeline:"Out"}),d=!1,r.A.compAnimationTargetState[t][e]="In"):l.Out.getChildren(!0,!0,!1).forEach(function(t){t.data&&"none"==t.data.inEffect&&(t.seek(0),t.restart())}):(d=!1,n.forcePlay&&(d=!0))}else(p="In"!=r.A.compAnimationTargetState[t][e])?(d=!1,n.forceFromEditor&&(d=!0),n.forcePlay&&(d=!0)):0==l.In.data.completed&&(l.In.reverse(),s&&Y(l.In,{event:"start",direction:"backward",timeline:"In"}),d=!1,r.A.compAnimationTargetState[t][e]="Out");if(d){var c=void 0;void 0!==n.position&&(c=n.position);var h=l[i].data.completed;o&&h&&l[i].invalidate(),o?(r.A.compAnimationTargetState[t][e]==i?(l[i].play(c),s&&Y(l[i],{event:"start",direction:"forward",timeline:i})):(h?l[i].play(0):l[i].play(),s&&Y(l[i],{event:"start",direction:"forward",timeline:i})),r.A.compAnimationTargetState[t][e]=i):-1!=a?(l[i].reverse(c),s&&Y(l[i],{event:"start",direction:"backward",timeline:i}),r.A.compAnimationTargetState[t][e]="In"==i?"Out":"In"):(l[i].play(c),s&&Y(l[i],{event:"start",direction:"forward",timeline:i}),r.A.compAnimationTargetState[t][e]=i),l[i].data.completed=!1}}}},c=i,h=0,u=[];if(n.runLogicLayer)if(delete n.runLogicLayer,"In"==c){var m=R.computeLogicLayerCompositionStates(t,e,"In",I,T,u);u.forEach(function(t){r.A.compAnimationTargetState[t]&&"In"==r.A.compAnimationTargetState[t][t]&&(l=t)}),S&&S[l]&&(h=T[l]?S[l].Out:S[l].In),I&&I[e]&&(d=I[e].delay),l||(d="none");var f=0,v=0;if("auto"==d)v=parseFloat(h),isNaN(v)&&(v=0);else if("custom"==d){var g=parseFloat(I[e].time);isNaN(g)&&(g=0),g<0?f=-g:v=g}if(m.forEach(function(t){if(N[t.timeline]&&clearTimeout(N[t.timeline]),f=0)X(t.timelineOwner,t.timeline,t.state,n);else{var e=setTimeout(function(){X(t.timelineOwner,t.timeline,t.state,n)},1e3*f);N[t.timeline]=e}}),N[e]&&clearTimeout(N[e]),0==v)p(t,e,i,a,n);else{var y=setTimeout(function(){p(t,e,i,a,n)},1e3*v);N[e]=y}}else p(t,e,i,a,n);else p(t,e,i,a,n)}},j=function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o.runLogicLayer&&"In"==i){var n=R.computeLogicLayerCompositionStates(t,e,"In",I,T);delete o.runLogicLayer,n.forEach(function(t){j(t.timelineOwner,t.timeline,t.state,o)})}var s,a=!0;!0===o.suppressTimelineEvent&&(a=!1),r.A.compAnimationTargetState[t]&&(s=r.A.compAnimationTargetState[t][e]),"Toggle"==i&&(i=r.A.compAnimationTargetState[t]&&"In"==r.A.compAnimationTargetState[t][e]?"Out":"In");var d=!0;void 0!==T[e]&&!1===T[e]&&(d=!1);var p=i=R.getAnimationState2(i,d);if(p){r.A.compAnimationState[t]||(r.A.compAnimationState[t]={}),r.A.compAnimationState[t][e]=p,r.A.compAnimationTargetState[t]||(r.A.compAnimationTargetState[t]={}),r.A.compAnimationTargetState[t][e]=p,r.A.timelineMaxState[t]||(r.A.timelineMaxState[t]={}),r.A.timelineMaxState[t][e]=p;try{J.onStateChanged_callbacks.forEach(function(t){t(e,p)})}catch(t){}if(L[t]){var c=L[t][e];c&&("Out1"==p?(c.Out.seek(Number.MAX_VALUE),c.Out.seek(0),c.Out.pause(),c.Out.data.completed=!0,c.Out.data.forward=!0,c.In.seek(Number.MAX_VALUE),c.In.seek(0),c.In.pause(),c.In.data.completed=!0,c.In.data.forward=!1,a&&Y(c.In,{event:"jump",jumpTo:p,jumpFrom:s,timeline:"In"}),l.A.setActiveTimeline(e,"In",0)):"In"==p?(c.Out.seek(Number.MAX_VALUE),c.Out.seek(0),c.Out.pause(),c.Out.data.completed=!0,c.Out.data.forward=!1,c.In.seek(0),c.In.seek(c.In.duration()),c.In.pause(),c.In.data.completed=!0,c.In.data.forward=!0,a&&Y(c.In,{event:"jump",jumpTo:p,jumpFrom:s,timeline:"In"}),l.A.setActiveTimeline(e,"In",c.In.duration())):"Out2"==p&&(c.In.seek(0),c.In.seek(c.In.duration()),c.In.pause(),c.In.data.completed=!0,c.In.data.forward=!1,c.Out.seek(0),c.Out.seek(c.Out.duration()),c.Out.pause(),c.Out.data.completed=!0,c.Out.data.forward=!0,a&&Y(c.Out,{event:"jump",jumpTo:p,jumpFrom:s,timeline:"Out"}),l.A.setActiveTimeline(e,"Out",c.Out.duration())))}}},B=function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=!0;void 0!==T[e]&&!1===T[e]&&(n=!1),"In"==(i=R.getAnimationState2(i,n))?i="In":"Out1"!=i&&"Out2"!=i||(i=n?"Out":"rev__In");var s=i.indexOf("rev__");if(-1!=s&&(i=i.substr(5)),L[t]){var a=L[t][e];a&&("In"==i&&a.Out.getChildren(!0,!0,!1).forEach(function(t){t.data&&"none"==t.data.inEffect&&(t.seek(0),t.restart())}),n&&!o.reverseIn&&a[i].invalidate(),n?o.reverseIn?(a.In.reverse(o.position),Y(a.In,{event:"start",direction:"backward",timeline:"In"})):(a[i].play(o.position),Y(a[i],{event:"start",direction:"forward",timeline:i})):o.reverseIn?(a.In.reverse(o.position),Y(a.In,{event:"start",direction:"backward",timeline:"In"})):-1!=s?(a[i].reverse(-o.position),Y(a[i],{event:"start",direction:"backward",timeline:i})):(a[i].play(o.position),Y(a[i],{event:"start",direction:"forward",timeline:i})))}},G=function(t,e){if(L[t]){var i=L[t][e];i.In.pause(),Y(i.In,{event:"stop",direction:"forward",timeline:"In"}),i.Out.pause(),Y(i.Out,{event:"stop",direction:"forward",timeline:"Out"})}},U=function(t,e,i,o,n){if(("In"==i||"Out"==i)&&L[t]){var s=L[t][e];if(s){var a=!0;void 0!==T[e]&&!1===T[e]&&(a=!1),"In"==i?(s.Out.getChildren(!0,!0,!1).forEach(function(t){t.data&&"none"==t.data.inEffect&&(t.seek(0),t.restart())}),a&&s.In.invalidate(),s.In.seek(o),Y(s.In,{event:"seek",direction:"forward",timeline:"In"}),s.In.pause(),Y(s.In,{event:"stop",direction:"forward",timeline:"In"})):(a&&s.Out.invalidate(),s.Out.seek(o),Y(s.Out,{event:"seek",direction:"forward",timeline:"Out"}),s.Out.pause(),Y(s.Out,{event:"stop",direction:"forward",timeline:"Out"}))}r.A.compAnimationTargetState[t][e]="In"}},Z=function(t,e,i){if(L[t]){var o=L[t][e];if(o){var n=o.In.duration(),s=o.Out.duration();o.In.pause(),o.Out.pause(),i<=n?o.In.seek(Math.max(i,0)):o.Out.seek(Math.min(i-n,s))}}},z=function(t){0==C.config.graphicsDelay?H(t):setTimeout(function(){H(t)},C.config.graphicsDelay)},H=function(t){t&&O.id!=t.id&&t.commands&&(O=t).commands.forEach(function(t){if("play"==t.name)j(t.target,t.target,t.from,t.options),X(t.target,t.target,t.to,t.options);else if("play2"==t.name){if(N[t.target]&&clearTimeout(N[t.target]),t.delay&&0!=t.delay){var e=setTimeout(function(){X(t.target,t.target,t.to,t.options)},1e3*t.delay);N[t.target]=e}else X(t.target,t.target,t.to,t.options);if(t.states)for(var i in t.states)X(i,i,t.states[i],{suppressTimelineEvent:!0})}else if("jump"==t.name)j(t.target,t.target,t.to,t.options);else if("jump2"==t.name)j(t.target,t.target,t.to,t.options);else if("seek"==t.name)Z(t.target,t.target,t.to,t.options);else if("sequencer_get"==t.name){if(!x[o]){var o=t.seqId,n=t.target,s=E.createSequencer(J,w,b,n);x[o]=s}}else if("sequencer_command"==t.name){o=t.seqId,n=t.target,x[o]||(x[o]=E.createSequencer(J,w,b,n));var a=t.command;(s=x[o])&&("start"==a?s.start():"stop"==a?s.stop():"seek"==a?s.seek(t.time):"setDuration"==a?s.setDuration(t.duration):"setPayload"==a&&s.setPayload(t.payload))}})},K=function(t){if(M)M=!1;else{var e=t.val();if(C.config.syncGraphics){if("0"==C.config.syncGraphics)z(e);else if("1"==C.config.syncGraphics){e&&e.ts&&C.commands.push({ts:e.ts,json:e});var i=(e.ts-C.firstVideoSegment)/1e3;C.firstVideoSegment&&C.syncTimeline&&i>=0&&(C.syncTimeline.addCallback(z,i,[e]),console.log("add cmd",i,e.ts)),i<0&&console.log("skip cmd",i,e.ts)}else if("2"==C.config.syncGraphics){var o=0;e.commands&&e.commands.forEach(function(t){var i={id:e.id+o,ts:e.ts,commands:[t]};if(t.ts){var n=t.ts-Date.now();if(console.log("execute",t.target,"in",n),n>0){var s=A.extend(!0,i);setTimeout(function(t){z(s)},n)}else z(i)}else z(i);o++})}}else z(e)}},J={jump2:j,play2:X,_pause:G,_play:B,_seek:U,seekMasterTimeline:Z,seek:Z,onStateChanged_callbacks:[],OnairScript:null};const q={setConfig:function(t){C.config=A.extend(!0,C.config,t)},videoCommand:function(t,e){switch(t){case"videoSegment":!function(t){if(C.config.syncGraphics){t||console.warn("videoSement time is undefined."),C.firstVideoSegment||(C.firstVideoSegment=t,C.syncTimeline=new TimelineMax,C.commands.forEach(function(t){var e=(t.ts-C.firstVideoSegment)/1e3;e>=0&&(console.log("add cmd for first time sync",e),C.syncTimeline.addCallback(z,e,[t.json]))}),C.controlNodes.forEach(function(t){var e=(t.ts-C.firstVideoSegment)/1e3;e>=0&&(console.log("add nodes for first time sync",e),C.syncTimeline.addCallback(C.updatePayload,e,[t.tempRtdbRef,t.cId,t.changes]))}));var e=(t-C.firstVideoSegment)/1e3;e>=0&&(C.syncTimeline.play(e,!1),console.log("videoSegment",e))}}(e);break;case"videoPlaying":C.syncTimeline&&C.syncTimeline.play();break;case"videoPaused":case"videoStopped":C.syncTimeline&&C.syncTimeline.pause();break;case"setDelay":C.config.graphicsDelay=e}},init:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"onairapp",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;for(var d in l&&(V=l.val()),D=o,M=!0,r.A._widgetOnSingularValueDebounceMap={},r.A.mouseoverElement=void 0,W&&W.child("command").off(),W=t,F&&(F.child("compositionProps").child("logicLayers").off(),F.child("compositionProps").child("timeline2Active").off(),F.child("compositionProps").child("durations").off()),F=e,L)delete L[d];for(var d in x)delete x[d];var f=t;D&&(f=e),f.child("command").on("value",function(t){"playersdk"==window.onairMode&&window.record&&t.ref&&window.record("command",t.val(),t.ref.toString()),K(t)}),e.child("compositionProps").child("logicLayers").on("value",function(t){I=t.val()}),e.child("compositionProps").child("timeline2Active").on("value",function(t){T=t.val()}),e.child("compositionProps").child("durations").on("value",function(t){S=t.val()}),window.instantiate=function(o,d,p,c,h,m,f,v){if(!o||""!=o.composition){var g,y,w,I,S,T,R,E,x="offlineapp"==s?l.child("compositions/"+o):t.child("compositions/"+o),C=e.child("compositions/"+o),O=(t.child("compositions"),k.v4()),M=f||m,D=(g=k.v4(),y=O,w=O,I=p,S=d,T=h,R=M,E=v,function(){var t,e,i,o=g,s=y,a=w,l=I,d=S,p=T,c=R;r.A.compInstanceUserData[s]||(r.A.compInstanceUserData[s]={}),r.A.compInstanceUserData[s]=A.extend(!0,{},E);var h=function(){return _[o]},u=function(){return i},m=function(){return e},f=function(e){j(a,t,e,{runLogicLayer:!0})},v=function(e,i){var o=A.extend(!0,i,{runLogicLayer:!0});o.ignoreInternalState?B(a,t,e,o):X(a,t,e,o)},b=function(){G(a,t)};return{onAirRefId:o,getDuration:u,is2Timeline:m,setupBinding:function(o){t=o.mainCompTimelineId,L[a][t],i=o.compDuration,e=o.timeline2Active,l&&l(this)},ref:h,jumpTo:f,playTo:v,resize:function(t,e){h().onResize(t,e)},seek:function(e,i){"string"==typeof e&&A.isNumber(i)?U(a,t,e,i):A.isNumber(e)&&Z(a,t,e)},stop:b,animate:function(e){var i=function(){var t=e.timeline;return"Out1"==e.newState&&m()&&(t="Out"),u()[t]/e.duration};"start"==e.event&&"play"==e.animationEvent?v(e.newState,{scale:i(),position:e.time*i(),ignoreInternalState:!0}):"seek"==e.event?(e.time=Math.max(0,e.time),e.time=Math.min(e.time,e.duration),U(a,t,e.timeline,e.time*i())):"stop"==e.event?b():"jump"==e.event&&f(e.newState)},setControlNode:function(t){h()&&h().setControlNode(s,t)},setWidgetNode:function(t){h()&&h().setWidgetNode(s,t)},destroy:function(){if(L[a])for(var t in L[a]){var e=L[a][t];e&&(e.In.kill(),e.Out.kill())}n().unmountComponentAtNode(d),r.A.destroyIframe(s),r.A.cleanupCompositionInstance(s,p,c)},getUserData:function(){return r.A.compInstanceUserData[s]},setUserData:function(t){r.A.compInstanceUserData[s]=A.extend(!0,t)}}}());return M&&(r.A.instancesParentChildren[M]||(r.A.instancesParentChildren[M]=[]),r.A.instancesParentChildren[M].push(O)),M&&(r.A.tileCompInstances[M]||(r.A.tileCompInstances[M]={}),r.A.tileCompInstances[M][h]||(r.A.tileCompInstances[M][h]=[]),r.A.tileCompInstances[M][h].push(O)),n().unmountComponentAtNode(d),n().render(a().createElement(u.A,{subComposition:!0,compositionInstanceId:O,parentTileId:h,parentCompId:M,mainComposition:b?b.compositionId:e.key,rtdbRef:x,rootRtdbRef:"offlineapp"==s?l:t,sbRef:C,rootSbRef:e,iframeName:c,ref:function(t){_[D.onAirRefId]=t},width:$(d).width(),height:$(d).height(),mode:i,customSize:!0,handle:D,rootTimelines:L}),d),D}p(null)};var g=function(t,i){var o=t;if("string"==typeof t)try{o=JSON.parse(t)}catch(t){o=null}if("object"!==v(o))console.error("importCompositionFromJSON first param is invalid.");else{var n=o.mainComposition;if(n){var s=c.A.importComposition(o,i,n);e.child("compositions").update(s),e.child("compositionStates").child(i).set("In");var a=c.A.copyCompositionStatesWithIdMapping(o.compositionStates);e.child("compositionStates").update(a);var r=c.A.copyCompositionPropsWithIdMapping(o.compositionProps);e.child("compositionProps").update(r)}else console.error("importComposition JSON object must contain mainComposition")}};window.importComposition=function(t,i){var o=e.val().tempCompositions;if(o)for(var n in o)if(o[n]==t)return i&&i(n),n;var s=k.v4();return p().get(t).end(function(o,n){o?(console.error(o),i&&i(null)):n.body&&(g(n.body,s),e.child("tempCompositions").child(s).set(t),i&&i(s))}),s},window.importCompositionFromJSON=function(t,i){var o=k.v4();return g(t,o),e.child("tempCompositions").child(o).set(o),i&&i(o),o},window.removeComposition=function(t){e.child("compositions").child(t).remove(),e.child("compositionStates").child(t).remove(),e.child("compostiionProps").child("logicLayers").child(t).remove(),e.child("compostiionProps").child("timeline2Active").child(t).remove(),e.child("compostiionProps").child("scripts").child(t).remove(),e.child("tempCompositions").child(t).remove()},window.sendCustomMessage=function(t,e,i,o,n,s,a){window.singularMessage&&window.singularMessage({event:"custom",params:{type:"widget",name:o,id:i,widgetId:a,compId:n,data:t}})},window.setCustomWidgetUI=function(t,i,o,n,s,a,r){if(!1!==D){var l=e.child("compositions").child(i).child("tiles").child(t);if(!l.exists())return console.log("Widget tile reference not found"),{success:!1,error:"Widget tile reference not found"};var d=h.A.getWidgetById(o,n);if(!d)return console.error("WIDGET NOT FOUND IN MEMORY: ",o,n),{success:!1,error:"Widget id not found"};var p=d.model,c=function(t,e){if(!t||"object"!==v(t))return{valid:!1,error:"Invalid customModel"};if(!Array.isArray(t.fields)||!Array.isArray(t.groups))return{valid:!1,error:"customModel must contain fields and groups arrays"};var i=/^[a-zA-Z0-9]+$/,o=new Set,n=[];if(Array.isArray(e&&e.fields)){var s,a=m(e.fields);try{for(a.s();!(s=a.n()).done;){var r=s.value;r&&r.id&&(o.add(r.id),n.push(A.extend(!0,{},r)))}}catch(t){a.e(t)}finally{a.f()}}var l,d=m(t.fields);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(!p||"object"!==v(p))return{valid:!1,error:"Invalid field entry in customModel"};if(!p.id||"string"!=typeof p.id||!i.test(p.id))return{valid:!1,error:"Invalid field id: ".concat(p.id,". Must be alphanumeric.")};if(o.has(p.id))return{valid:!1,error:"Field id conflict: '".concat(p.id,"' already exists in widget model")};if(!p.type||"string"!=typeof p.type)return{valid:!1,error:"Missing or invalid type for field ".concat(p.id)};if(!p.title||"string"!=typeof p.title)return{valid:!1,error:"Missing or invalid title for field ".concat(p.id)};if(!("defaultValue"in p))return{valid:!1,error:"Missing defaultValue for field ".concat(p.id)};p.resetValue=p.defaultValue,delete p.defaultValue,n.push(A.extend(!0,{},p)),o.add(p.id)}}catch(t){d.e(t)}finally{d.f()}var c=new Map;if(Array.isArray(e&&e.groups)){var h,u=m(e.groups);try{for(u.s();!(h=u.n()).done;){var f=h.value;f&&f.id&&c.set(f.id,{id:f.id,title:f.title,toolTip:f.toolTip,activeId:f.activeId,width:f.width,childIds:Array.isArray(f.childIds)?f.childIds.slice():[]})}}catch(t){u.e(t)}finally{u.f()}}var g,y=m(t.groups);try{for(y.s();!(g=y.n()).done;){var w=g.value;if(!w||"object"!==v(w))return{valid:!1,error:"Invalid group entry in customModel"};if(!w.id||"string"!=typeof w.id||!i.test(w.id))return{valid:!1,error:"Invalid group id: ".concat(w.id,". Must be alphanumeric.")};if(!w.title||"string"!=typeof w.title)return{valid:!1,error:"Missing or invalid title for group ".concat(w.id)};if(!Array.isArray(w.childIds))return{valid:!1,error:"Missing or invalid childIds array for group ".concat(w.id)};var b,I=m(w.childIds);try{for(I.s();!(b=I.n()).done;){var S=b.value;if(!o.has(S))return{valid:!1,error:"Group ".concat(w.id," references non-existent field id: ").concat(S)}}}catch(t){I.e(t)}finally{I.f()}if(c.has(w.id)){var T,R=c.get(w.id),k=new Set(R.childIds),E=m(w.childIds);try{for(E.s();!(T=E.n()).done;){var L=T.value;k.has(L)||(R.childIds.push(L),k.add(L))}}catch(t){E.e(t)}finally{E.f()}c.set(w.id,R)}else c.set(w.id,{id:w.id,title:w.title,toolTip:w.toolTip,activeId:w.activeId,width:w.width,childIds:w.childIds.slice()})}}catch(t){y.e(t)}finally{y.f()}return{valid:!0,mergedModel:{fields:n,groups:Array.from(c.values())}}}(s,p);if(!c.valid)return console.error("Widget model validation failed:",c.error),{success:!1,error:c.error};l.child("customWidgetModel").set(c.mergedModel);var u=l.parent.parent.child("data").child(l.val().id);if(u.exists()&&c.mergedModel&&c.mergedModel.fields){var f=u.val()||{},g={};if((c.mergedModel.fields||[]).forEach(function(t){t&&t.id&&(Object.prototype.hasOwnProperty.call(f,t.id)?g[t.id]=f[t.id]:void 0!==t.resetValue&&(g[t.id]=t.resetValue))}),p.fields.forEach(function(t){g[t.id]=f[t.id]}),r)for(var y in r)Object.prototype.hasOwnProperty.call(g,y)&&(g[y]=r[y]);A.compareObject2(g,f)||(a?u.set(g):u.update(g))}return{success:!0}}}},rootTimelines:L,set:function(t){w=t.onAirRef,t.composition&&t.mainComposition&&(b=A.getCompositionInfo(t.composition,t.mainComposition)),W.child("sequencer").off(),W.child("sequencer").on("value",function(t){"playersdk"==window.onairMode&&window.record&&t.ref&&window.record("command",t.val(),t.ref.toString()),function(t){var e=t.val();if(e&&(g!=e.payloadTS&&(console.log("Load new sequencer"),g=e.payloadTS,y||(y=E.createSequencer(J,w,b)),y.setPayload(e.payload)),e.timeControl&&y)){var i=e.timeControl;if(console.log(e.timeControl),i.isRunning){var o=(Date.now()-i.UTC)/1e3;y.seek(o),console.log("seek to",o),y.play()}else{var n=i.value/1e3;y.seek(n),console.log("seek to",n),y.stop()}}}(t)})},controlLib:J,timestamps:C,handleSingularMessage:function(t){if(window.onSingularMessage&&window.onSingularMessage(t),"processAction"==t.type){var e=t.compId;if(e){var i;switch(t.state){case"in":i="In";break;case"out":i="Out";break;case"toggle":i="Toggle"}X(e,e,i,{runLogicLayer:!0})}}else window.parent.postMessage({event:"_singular_message",params:t},"*"),J.OnairScript&&J.OnairScript.handle_onSingularMessage(t)},onFirebaseTimelineCommand:K,goOffline:function(){W&&W.child("command").off()}}},15340:()=>{},18898:(t,e,i)=>{function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}var n=i(45659),s={extend:function(){var t={},e=!1,i=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);for(var n=function(i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e&&"[object Object]"===Object.prototype.toString.call(i[o])?t[o]=s.extend(!0,t[o],i[o]):t[o]=i[o])};i<o;i++)n(arguments[i]);return t},isOverlapped:function(t,e){var i=!1;return(t.beginTime>=e.beginTime&&t.beginTime<=e.endTime||e.beginTime>=t.beginTime&&e.beginTime<=t.endTime)&&(i=!0),i?{beginTime:Math.min(t.beginTime,e.beginTime),endTime:Math.max(t.endTime,e.endTime),minEndTime:Math.min(t.endTime,e.endTime)}:void 0},parsePayload:function(t,e,i,n,s,a){var r=[];t.forEach(function(t){var o=function(t,e){return t<0?t+e:t}(t.beginTime,i),n=function(t,e){return t<0?t+e:t}(t.endTime,i);o>=0&&r.push({beginTime:o,endTime:n,controlNode:t.controlNode,compId:e})}),r.sort(function(t,e){return(t.beginTime>e.beginTime)-.5});var l=[];r.forEach(function(t){-1==l.indexOf(t.beginTime)&&l.push(t.beginTime),-1==l.indexOf(t.endTime)&&l.push(t.endTime)});for(var d=[],p=0;p<l.length;p++){for(var c={},h=l[p],u=0;u<r.length;u++)h>=(v=r[u]).beginTime&&h<v.endTime&&(c=this.extend(!0,c,v.controlNode));d.push({time:h,controlNode:c,compId:e})}d.sort(function(t,e){return(t.time>e.time)-.5});var m=[];m=[].concat(r);var f=[];for(p=0;p<m.length;p++){var v;if(!(v=m[p]).discarded)for(u=p+1;u<m.length;u++){var g=m[u];if(!g.discarded){var y=this.isOverlapped(v,g);y&&(v.beginTime=y.beginTime,v.endTime=y.endTime,v.discarded=!0,g.discarded=!0,-1==f.indexOf(v)&&f.push(v))}}}m=m.filter(function(t){return!t.discarded}),(f=f.concat(m)).forEach(function(t){var e=d.filter(function(e){return e.time==t.beginTime});e.length>0&&(e[0].animation="In",t.inTickEvent=e[0]);var i=d.filter(function(e){return e.time==t.endTime});i.length>0&&(i[0].animation="Out",t.outTickEvent=i[0])});var w,b=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return o(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){l=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw a}}}}(f);try{for(b.s();!(w=b.n()).done;){var I=w.value,S=I.endTime-I.beginTime;S>=n+s?(I.outTickEvent.time=I.endTime-s,I.actualInAnim={timeline:"In",duration:n,time:I.beginTime},I.actualOutAnim={timeline:"Out",duration:s,time:I.outTickEvent.time},a||(I.outTickEvent.reverseIn=!0,I.actualOutAnim.timeline="In",I.actualOutAnim.reverseIn=!0)):S/2<=n?(I.outTickEvent.time=I.beginTime+S/2,I.outTickEvent.reverseIn=!0,I.actualInAnim={timeline:"In",duration:S/2,time:I.beginTime},I.actualOutAnim={timeline:"In",duration:S/2,time:I.outTickEvent.time,reverseIn:!0}):S/2>n&&(I.outTickEvent.time=I.beginTime+S-n,I.outTickEvent.reverseIn=!0,I.actualInAnim={timeline:"In",duration:n,time:I.beginTime},I.actualOutAnim={timeline:"In",duration:n,time:I.outTickEvent.time,reverseIn:!0})}}catch(t){b.e(t)}finally{b.f()}return[d,f]},createSequencer:function(t,e,i,o){return function(){var a,r,l=t,d=e,p=i,c=0,h=new TimelineMax,u={},m={},f={},v={},g={};for(var y in p.compositionDuration)m[y]=f[y]=p.compositionDuration[y].In,p.compositionProps.timeline2Active&&!0===p.compositionProps.timeline2Active[y]&&(f[y]=p.compositionDuration[y].Out,u[y]=!0);var w=function(t){t.controlNode&&t.controlNode.payload&&(S("play",t.time),o&&o({event:"setPayload",compId:t.compId,payload:t.controlNode.payload})),t.animation&&(t.reverseIn?l._play(t.compId,t.compId,t.animation,{reverseIn:!0,position:void 0}):l._play(t.compId,t.compId,t.animation,{position:0}))},b=function(t){var e=Number.MIN_VALUE;for(var i in v={},g={},h.removeCallback(w),t){var o=s.parsePayload(t[i],i,c,m[i],f[i],u[i]);v[i]=o[0],g[i]=o[1],v[i].forEach(function(t){h.addCallback(w,t.time,[t])}),g[i].forEach(function(t){e=Math.max(e,t.endTime)})}0!=c?h.addCallback(w,c,[{}]):e!=Number.MIN_VALUE&&h.addCallback(w,e,[{}]),h.pause()},I=function(t,e){for(var i,o,n,s,a,r=0;r<g[t].length;r++){var l=g[t][r];if(s=l.actualOutAnim.duration,n=l.actualInAnim.duration,e>=l.beginTime&&e<=l.endTime){var d=e-l.actualInAnim.time,p=e-l.actualOutAnim.time,c=s-p;if(Math.abs(c)<1e-10&&(c=0),d>=0&&d<=n){o=d,i=l.actualInAnim.timeline;break}if(p>=0&&p<=s&&0!=c){o=p,i=l.actualOutAnim.timeline,a=l.actualOutAnim.reverseIn;break}if(0!=c){o=void 0,i="In";break}}}return{targetAnimation:i,localTime:o,outDuration:s,reverseIn:a}},S=function(t,e){for(var i in v)for(var o=v[i].filter(function(t){return t.controlNode&&t.controlNode.payload}),n=0;n<o.length;n++){var s={controlNode:{}},a=void 0;if(e<o[n].time?(n-1>=0&&(a=o[n-1]),n-2>=0&&(s=o[n-2])):n==o.length-1&&(a=o[n],n-1>=0&&(s=o[n-1])),a){"seek"==t?d.seekUpdateAnimation(i,s.controlNode.payload,a.controlNode.payload,e-a.time):d.setControlNodeOffline(i,a.controlNode.payload,void 0,"GRAPHICS_SDK");break}}},T=function(){var t=h.time();for(var e in h.play(),S("play",t),g){var i=I(e,t);i.targetAnimation&&(void 0!==i.localTime?i.reverseIn?l._play(e,e,i.targetAnimation,{position:i.outDuration-i.localTime,reverseIn:!0}):l._play(e,e,i.targetAnimation,{position:i.localTime}):l.jump2(e,e,"In"))}},R=function(){for(var t in h.pause(),g)l._pause(t,t)},k=function(t){for(var e in t=Math.max(t,0),R(),S("seek",t),g){var i=I(e,t);i.targetAnimation?void 0!==i.localTime?i.reverseIn?l._seek(e,e,i.targetAnimation,i.outDuration-i.localTime):l._seek(e,e,i.targetAnimation,i.localTime):l.jump2(e,e,"In"):l.jump2(e,e,"Out")}h.seek(t)};return{start:function(){k(0),T()},stop:R,seek:k,play:T,setDuration:function(t){c=t,r&&b(r)},setPayload:function(t,e){r=function(t){if("string"==typeof t)try{a=JSON.parse(t)}catch(t){a=null}else a=t;return a}(t);var i=0;for(var o in r)r[o].forEach(function(t){t.priority=i}),i++,r[o].sort(function(t,e){return(t.beginTime>e.beginTime)-.5});var s=[];for(var o in r)void 0===p.idToName[o]&&(s.push(o),e&&e("Sequencer setPayload: Subcomp "+o+" not found."));s.forEach(function(t){delete r[t]});var l=p.compositionProps.logicLayers,d={};if(l){var c=n.getLogicLayerGroup(l);for(var o in r)l[o]||(c.push({name:o,comps:[o]}),l[o]={});var h={};for(var u in c.forEach(function(t){h[t.name]=[],t.comps.forEach(function(e){r[e]&&r[e].forEach(function(i){i.compId=e,i.inDuration=m[e],i.outDuration=f[e],i.delayMode=l[e].delay,i.delayTime=parseFloat(l[e].time),h[t.name].push(i)})}),h[t.name].sort(function(t,e){return(t.beginTime>e.beginTime)-.5})}),h){for(var v=h[u],g=0;g<v.length;g++)if(!v[g].discarded)for(var y=0;y<v.length;y++)v[y].discarded||g==y||Math.abs(v[g].beginTime-v[y].beginTime)<1e-10&&(v[g].priority>v[y].priority?v[y].discarded=!0:v[g].discarded=!0);for(v.forEach(function(t){var e=t.endTime-t.beginTime;e>=t.inDuration+t.outDuration?t.actualOutAnimDuration=t.outDuration:e/2<=t.inDuration?t.actualOutAnimDuration=e/2:e/2>t.inDuration&&(t.actualOutAnimDuration=t.inDuration)}),v=v.filter(function(t){return!t.discarded}),g=1;g<v.length;g++){var w=v[g];for(y=0;y<v.length;y++)if(g!=y){var I,S=v[y];S.beginTime<=w.beginTime&&S.endTime-S.actualOutAnimDuration>=w.beginTime&&((I="custom"==w.delayMode&&w.delayTime<0?w.beginTime-S.beginTime+-1*w.delayTime:w.beginTime-S.beginTime)>S.inDuration?S.endTime=w.beginTime+S.outDuration:I<=S.inDuration&&(S.endTime=w.beginTime+I),"custom"==w.delayMode&&w.delayTime<0&&(S.endTime+=-1*w.delayTime),"auto"==w.delayMode?I>S.inDuration?w.beginTime+=S.outDuration:w.beginTime+=I:"custom"==w.delayMode&&w.delayTime>0&&(w.beginTime+=w.delayTime))}}h[u]=v}for(var u in h)(v=h[u]).forEach(function(t){d[t.compId]||(d[t.compId]=[]),d[t.compId].push({beginTime:t.beginTime,endTime:t.endTime,controlNode:t.controlNode})})}else d=r;b(d)},restoreControlNodeDefaultValue:function(){d.restoreControlNodeDefaultValue()}}}()}};t.exports=s},24113:t=>{t.exports={VARIANT_RESOLUTIONS:[{id:"1280x720",title:"Landscape 1280x720",aspect:"16:9",width:1280,height:720,info:"Landscape with 16:9 aspect ratio for Facebook and Twitter"},{id:"1920x1080",title:"Landscape 1920x1080",aspect:"16:9",width:1920,height:1080,info:"Landscape with 16:9 aspect ratio for YouTube and Twitch"},{id:"38402160",title:"Landscape 38402160",aspect:"16:9",width:3840,height:2160,info:"Landscape with 16:9 aspect ratio for YouTube and high resolution displays"},{id:"720x1280",title:"Portrait 720x1280",aspect:"9:16",width:720,height:1280,info:"Portrait with 9:16 aspect ratio for Facebook and Twitter"},{id:"1080x1920",title:"Portrait 1080x1920",aspect:"9:16",width:1080,height:1920,info:"Portrait with 9:16 aspect ratio for TikTok, Instagram stories and YouTube Shorts"},{id:"2160x3840",title:"Portrait 2160x3840",aspect:"9:16",width:2160,height:3840,info:"Portrait with 9:16 aspect ratio for high resolution displays"},{id:"1080x1080",title:"Square 1080x1080",aspect:"1:1",width:1080,height:1080,info:"Square with 1:1 aspect ratio for Youtube, Instagram and Facebook"},{id:"responsive",title:"Responsive",aspect:"Responsive",width:0,height:0,info:"The output will adapt to the resolution to the output device, but the overlays can appear distorted"}]}},24800:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _compositionLibrary__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14794),lzutf8__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(95474),lzutf8__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lzutf8__WEBPACK_IMPORTED_MODULE_1__),Util=__webpack_require__(9769),ErrorStackParser=__webpack_require__(14263),tinycolor=__webpack_require__(87021),moment=__webpack_require__(95093),numeral=__webpack_require__(99227),OnairScript={onairRef:null,compositionInfo:{},callbacks:{payload_changed:{},state_changed:{},message:{},timeline_event:{},datanode_payload_changed:{},button_clicked:{}},subcompInstances:{},scriptObjects:{},globalScriptInstance:{},buttonClickedTS:{},tree:{},treeLookup:{},scriptCompInfoForUI:{states:{},payloads:{}},dataNodeRefs:[],controlNodeRefs:[],lastFbDataNode:{},utilitiesCreateConditionalSubCompLink:function(){return{contentSubComp:void 0,isContentValid:!1,requestedState:void 0,requestedEvent:void 0,setContentValid:function(t){this.isContentValid=t,t&&this.requestedState&&this.requestedEvent&&("start"==this.requestedEvent?this.contentSubComp.playTo(this.requestedState):this.contentSubComp.jumpTo(this.requestedState),this.requestedState=void 0,this.requestedEvent=void 0)},setContentSubComp:function(t){this.contentSubComp=t},timelineEvent:function(t){var e=t.message,i=e.targetState,o=e.event;"start"!=o&&"jump"!=o||("In"==i?this.isContentValid?"start"==o?this.contentSubComp.playTo(i):this.contentSubComp.jumpTo(i):(this.requestedState=i,this.requestedEvent=o):(this.requestedState=void 0,this.requestedEvent=void 0,"start"==o?this.contentSubComp.playTo(i):this.contentSubComp.jumpTo(i)))}}},utilitiesCreateTimeControl:function(){return function(){var t=0,e=window;try{for(;e;){if(void 0!==e.singularServerDateOffset){t=e.singularServerDateOffset;break}if(e==window.top)break;e=e.parent}}catch(t){}return{tc:{UTC:0,isrunning:!1,value:0},allowBackwardsJump:!1,roundToInterval:!0,intervalID:null,timeoutID:null,oldRunningTime:0,intervalTime:1e3,offsetToServerTime:t,updateCallback:null,setOffsetToServerTime:function(t){this._isNumeric(t)&&(this.offsetToServerTime=parseFloat(t))},getOffsetToServerTime:function(){return this.offsetToServerTime},setIntervalTime:function(t){this._isNumeric(t)&&parseFloat(t)!=this.intervalTime&&(this.intervalTime=parseFloat(t),this._clearInterval(),this._startInterval())},setUpdateCallback:function(t){this.updateCallback=t},setAllowBackwardsJump:function(t){this.allowBackwardsJump=t},setRoundToInterval:function(t){this.roundToInterval=t},setTimeControl:function(t){if("string"==typeof t||t instanceof String)try{t=JSON.parse(t)}catch(t){}if(void 0!==t&&void 0!==t.value&&void 0!==t.UTC&&void 0!==t.isRunning&&(t.value!=this.tc.value||t.UTC!=this.tc.UTC||t.isRunning!=this.tc.isRunning)){if(t.value<=this.tc.value&&(this.oldRunningTime=0),this.tc.isRunning!=t.isRunning){if(this.tc=t,this._clearInterval(),this.tc.isRunning)return void this._startInterval()}else this.tc=t;this._executeUpdateCallback()}},getCurrentTime:function(){var t=this.tc.value;this.tc.isRunning&&(t+=Date.now()-this.tc.UTC+this.offsetToServerTime),this.allowBackwardsJump||(t<this.oldRunningTime?t=this.oldRunningTime:this.oldRunningTime=t);var e=0;if(this.roundToInterval){var i=t%this.intervalTime;e=i>this.intervalTime/2?this.intervalTime-i:-i}return t+e},destroy:function(){this._clearInterval()},_clearInterval:function(){this.intervalID&&(clearInterval(this.intervalID),this.intervalID=null),this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},_startInterval:function(){var t=this.getCurrentTime()%this.intervalTime;this._clearInterval(),this.timeoutID=setTimeout(function(){this._executeUpdateCallback(),this.intervalID=setInterval(function(){this._executeUpdateCallback()}.bind(this),this.intervalTime)}.bind(this),this.intervalTime-t)},_executeUpdateCallback:function(){this.updateCallback&&this.updateCallback()},_isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}}}()},utilitiesCreateDataStream:function(t,e,i){return Util.createDataStream(t,e,i)},utilitiesGetSingularWindow:function(){for(var t=window.singularWindow,e=window;e.parent&&(t=(e=e.parent).window.singularWindow,e!=window.top););return t},context:function(){return{global:this.globalScriptInstance,utils:{createConditionalSubCompLink:this.utilitiesCreateConditionalSubCompLink,createTimeControl:this.utilitiesCreateTimeControl,createTinyColor:tinycolor,createMoment:moment,createNumeral:numeral,createDataStream:this.utilitiesCreateDataStream,getSingularWindow:this.utilitiesGetSingularWindow}}},dispatchEvent:function(t,e,i,o){var n={target:o,_stopPropagation:!1,stopPropagation:function(){this._stopPropagation=!0}};if("all"==t)for(var s in this.callbacks[e])this.callbacks[e][s](e,i,n);else{var a=this.treeLookup[t];if(a)do{try{this.callbacks[e][a.id]&&this.callbacks[e][a.id](e,i,n)}catch(t){this.reportRunTimeError(t)}a=a.parent}while(a&&1!=n._stopPropagation)}},handle_setControlNodeOffline:function(t,e,i){if(this.onairRef){var o=[];if(this.compositionInfo.dataSources&&this.compositionInfo.dataSources[t]&&this.compositionInfo.dataSources[t].composition){var n=Util.checkDataType(this.compositionInfo.dataSources[t].composition.controlNode.model,e),s=n.errors,a=n.payload,r=n.timeControlCollection,l=n.buttonCollection,d=this.compositionInfo.dataSources[t].composition.controlNode.payload,p={},c={};for(var h in a)Util.compareObject2(a[h],d[h])||(p[h]=a[h]);if(0==Object.keys(p))return;for(var u in a)if(null!=d[u]){var m=!0;if(r[u]){var f=Date.now(),v=a[u].command,g=d[u];if("play"==v)g.isRunning?m=!1:a[u]={UTC:f,isRunning:!0,value:g.value?g.value:0};else if("pause"==v){if(g.isRunning){var y=f,w=0,b=y;g&&(w=g.value?g.value:0,b=g.UTC?g.UTC:b),w+=y-b,a[u]={UTC:y,isRunning:!1,value:w}}}else"reset"==v&&(a[u]={UTC:f,isRunning:!1,value:0})}else l[u]&&a[u].ts!=d[u].ts&&(c[u]=!0);m&&(d[u]=a[u])}}if((o=s)&&o.length>0){var I="";o.forEach(function(t){I+=t+" "}),console.warn(I)}var S={payload:a,compId:t,compositionId:t};if(this.compositionInfo.subcompositionNames)for(var T in this.compositionInfo.subcompositionNames)for(var R in this.compositionInfo.subcompositionNames[T])R==t&&(S.compositionName=S.compName=this.compositionInfo.subcompositionNames[T][R]);for(var u in t==this.compositionInfo.compositionId&&(S.compositionName=S.compName="Root"),this.dispatchEvent(t,"payload_changed",S,i),c){var k=Util.extend(S);delete k.payload,k.buttonId=u,this.dispatchEvent(t,"button_clicked",k,i)}window.parent.postMessage({event:"_singular_composition_payload_changed",params:{compId:t,compositionId:t,payload:a}},"*")}},handle_onStateChanged:function(t,e){if(this.onairRef){var i={compositionId:t,state:e};if(this.compositionInfo.idToName){i.compositionName=this.compositionInfo.idToName[i.compositionId],null==i.compositionName&&(i.compositionName="Root");var o=!1;this.compositionInfo.compositionStates[i.compositionId]!=i.state&&(o=!0),this.compositionInfo.compositionStates[i.compositionId]=i.state,o&&this.dispatchEvent(t,"state_changed",i)}}},handle_onSingularMessage:function(t){this.onairRef&&this.dispatchEvent(t.params.compId,"message",t)},handle_timelineEvent:function(t){this.onairRef&&(t.compositionName=this.compositionInfo.idToName[t.compositionId],t.compositionId==this.compositionInfo.compositionId&&(t.compositionName="Root"),this.dispatchEvent(t.compositionId,"timeline_event",t))},getCompositionById:function(t){var e=this;if(this.subcompInstances[t])return this.subcompInstances[t];var i=function(){var i,o,n=e.compositionInfo.idToName[t];e.treeLookup[t]&&e.treeLookup[t].parent&&(i=e.treeLookup[t].parent),i&&(o=i.id),null==n&&(n="Root");var s=function(){if(e.compositionInfo.dataSources&&e.compositionInfo.dataSources[t]&&e.compositionInfo.dataSources[t].composition&&e.compositionInfo.dataSources[t].composition.controlNode&&e.compositionInfo.dataSources[t].composition.controlNode.model){var i=e.compositionInfo.dataSources[t].composition.controlNode.model.fields,o=[];for(var n in i)o.push(i[n]);return o}return[]};return{addListener:function(i,o){if(!e.callbacks[i])throw new Error("Listener event type '".concat(i,"' not supported."));e.callbacks[i][t]=o},removeListener:function(i){e.callbacks[i]&&delete e.callbacks[i][t]},id:t,name:n,parent:function(){var i=e.treeLookup[t];if(i&&i.parent)return e.getCompositionById(i.parent.id)},children:function(i){var o=e.treeLookup[t],n=[];return o.children.forEach(function(t){t.name!=i&&null!=i||n.push(e.getCompositionById(t.id))}),n},jumpTo:function(i){_compositionLibrary__WEBPACK_IMPORTED_MODULE_0__.A.controlLib.jump2(t,t,i,{runLogicLayer:!0});var o={event:"_singular_update_ui_from_script",params:{command:"jumpTo",compId:t,to:i}};window.postMessage(JSON.stringify(o),"*"),e.scriptCompInfoForUI.states[t]=i},playTo:function(i){_compositionLibrary__WEBPACK_IMPORTED_MODULE_0__.A.controlLib.play2(t,t,i,{runLogicLayer:!0});var o={event:"_singular_update_ui_from_script",params:{command:"playTo",compId:t,to:i}};window.postMessage(JSON.stringify(o),"*"),e.scriptCompInfoForUI.states[t]=i},seek:null,setPayload:function(i){if(void 0!==e.compositionInfo.dataSources[t].composition){var o=Util.extend(i),n=s().filter(function(t){return"timecontrol"==t.type}).reduce(function(t,e){return t[e.id]=!0,t},{}),a=e.compositionInfo.dataSources[t].composition.controlNode.payload;if(a){for(var r in o)if(null!=a[r]){var l=!1;if(n[r]){l=!0;var d=Date.now(),p=o[r].command,c=a[r];if("play"==p)c.isRunning?l=!1:o[r]={UTC:d,isRunning:!0,value:c.value?c.value:0};else if("pause"==p){if(c.isRunning){var h=d,u=0,m=h;c&&(u=c.value?c.value:0,m=c.UTC?c.UTC:m),u+=h-m,o[r]={UTC:h,isRunning:!1,value:u}}}else"reset"==p&&(o[r]={UTC:d,isRunning:!1,value:0})}l&&(a[r]=o[r])}e.onairRef.setControlNodeOffline(t,o,e.subcompInstances[t],"COMP_SCRIPT");var f={event:"_singular_update_ui_from_script",params:{command:"setPayload",compId:t,payload:o}};window.postMessage(JSON.stringify(f),"*"),e.scriptCompInfoForUI.payloads[t]=o}}},getPositionX:function(i){return e.onairRef.getTileLayout(o,t).left},getPositionY:function(i){return e.onairRef.getTileLayout(o,t).top},getSizeX:function(i){return e.onairRef.getTileLayout(o,t).width},getSizeY:function(i){return e.onairRef.getTileLayout(o,t).height},getRotateZ:function(i){return e.onairRef.getTileLayout(o,t).rotateZ},getVisibility:function(i){return e.onairRef.getTileLayout(o,t).visible},getOpacity:function(i){return e.onairRef.getTileLayout(o,t).opacity},getBrightness:function(i){return e.onairRef.getTileLayout(o,t).filterBrightness},getBlur:function(i){return e.onairRef.getTileLayout(o,t).filterBlur},getContrast:function(i){return e.onairRef.getTileLayout(o,t).filterContrast},getGrayscale:function(i){return e.onairRef.getTileLayout(o,t).filterGrayscale},getHue:function(i){return e.onairRef.getTileLayout(o,t).filterHueRotate},getInvert:function(i){return e.onairRef.getTileLayout(o,t).filterInvert},getSaturate:function(i){return e.onairRef.getTileLayout(o,t).filterSaturate},getSepia:function(i){return e.onairRef.getTileLayout(o,t).filterSepia},setPositionX:function(i){e.onairRef.setTileLayout(o,t,{left:i})},setPositionY:function(i){e.onairRef.setTileLayout(o,t,{top:i})},setSizeX:function(i){e.onairRef.setTileLayout(o,t,{width:i})},setSizeY:function(i){e.onairRef.setTileLayout(o,t,{height:i})},setRotateZ:function(i){e.onairRef.setTileLayout(o,t,{rotateZ:i})},setVisibility:function(i){e.onairRef.setTileLayout(o,t,{visible:i})},setOpacity:function(i){e.onairRef.setTileLayout(o,t,{opacity:i})},setBrightness:function(i){e.onairRef.setTileLayout(o,t,{filterBrightness:i})},setBlur:function(i){e.onairRef.setTileLayout(o,t,{filterBlur:i})},setContrast:function(i){e.onairRef.setTileLayout(o,t,{filterContrast:i})},setGrayscale:function(i){e.onairRef.setTileLayout(o,t,{filterGrayscale:i})},setHue:function(i){e.onairRef.setTileLayout(o,t,{filterHueRotate:i})},setInvert:function(i){e.onairRef.setTileLayout(o,t,{filterInvert:i})},setSaturate:function(i){e.onairRef.setTileLayout(o,t,{filterSaturate:i})},setSepia:function(i){e.onairRef.setTileLayout(o,t,{filterSepia:i})},getSubcompositionById:function(t){return e.getCompositionById(t)},listSubcompositions:function(){var i=[];if(e.compositionInfo.subcompositionNames[t])for(var o in e.compositionInfo.subcompositionNames[t])i.push({id:o,name:e.compositionInfo.subcompositionNames[t][o]});return i},getDataNodes:function(){var i={};if(e.compositionInfo.dataSources&&e.compositionInfo.dataSources[t]&&e.compositionInfo.dataSources[t].composition){var o=e.compositionInfo.dataSources[t].composition.dataNodes;for(var n in o){var s=o[n].dataNode;e.compositionInfo.dataNodes&&e.compositionInfo.dataNodes[s]&&(i[s]=e.compositionInfo.dataNodes[s])}}return i},getModel:function(){return s()},getPayload:function(){if(e.compositionInfo.dataSources&&e.compositionInfo.dataSources[t]&&e.compositionInfo.dataSources[t].composition){var i=e.compositionInfo.dataSources[t].composition.controlNode.payload,o=[];for(var n in i)o.push({key:n,value:i[n]});return o}return[]},getPayload2:function(){if(e.compositionInfo.dataSources&&e.compositionInfo.dataSources[t]&&e.compositionInfo.dataSources[t].composition){var i=Util.extend(e.compositionInfo.dataSources[t].composition.controlNode.payload);return i}return i},getControlNode:function(){if(e.compositionInfo.dataSources&&e.compositionInfo.dataSources[t]&&e.compositionInfo.dataSources[t].composition)return e.compositionInfo.dataSources[t].composition.controlNode},getLogicLayer:function(){if(e.compositionInfo.compositionProps&&e.compositionInfo.compositionProps.logicLayers&&e.compositionInfo.compositionProps.logicLayers)return e.compositionInfo.compositionProps.logicLayers[t]},getState:function(){var i=e.compositionInfo.compositionStates[t];return"In"==i?"In":"Out1"==i||"Out2"==i?"Out":void 0},find:function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];var s=o[0],a=e.compositionInfo.subcompositionNames,r=[],l=function(t,e){for(var i in a[t])a[t][i]==e&&r.push(t),l(i,e)};l(t,s);var d=[],p=o;return r.forEach(function(t){d=d.concat(function(t,i){var o=e.compositionInfo.subcompositionNames,n=(i[i.length-1],[]),s=function(t,e){for(var a in o[t])o[t][a]==i[e]&&(e<i.length-1?s(a,e+1):n.push(a))};s(t,0);var a=function(t){for(var e in o)if(o[e][t])return e},r=[];return n.forEach(function(i){for(var o=i,n=[];o!=t&&null!=o;)n.unshift(o),o=a(o);if(n.length>0){for(var s=e.getCompositionById(n[0]),l=1;l<n.length;l++)s=s.getCompositionById(n[l]);r.push(s)}}),r}(t,p))}),d},findWidget:function(){var i,o;2==arguments.length?(i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1]):1==arguments.length&&(o=arguments.length<=0?void 0:arguments[0]);var n=[],s=function(i,o,n){var s=[];return i.forEach(function(i){e.compositionInfo.compositions[t].tiles[i].type==o&&e.compositionInfo.compositions[t].tiles[i].name==n&&s.push(i)}),s};if(i)for(var a in e.compositionInfo.compositions[t].groups){var r=e.compositionInfo.compositions[t].groups[a];r.name==i&&(n=n.concat(s(Object.keys(r.items),"widget",o)))}else n=n.concat(s(Object.keys(e.compositionInfo.compositions[t].tiles),"widget",o));var l=[];return n.forEach(function(i){var o;l.push({getPayload:function(){return e.onairRef.getWidgetPayload(t,o)},setPayload:function(i){e.onairRef.setWidgetPayload(t,o,i)},click:function(i){e.onairRef.processWidgetClick(t,o,i)},getDomElement:function(t){return document.getElementById("onair"+o)},getPositionX:function(i){return e.onairRef.getTileLayout(t,o).left},getPositionY:function(i){return e.onairRef.getTileLayout(t,o).top},getSizeX:function(i){return e.onairRef.getTileLayout(t,o).width},getSizeY:function(i){return e.onairRef.getTileLayout(t,o).height},getRotateZ:function(i){return e.onairRef.getTileLayout(t,o).rotateZ},getVisibility:function(i){return e.onairRef.getTileLayout(t,o).visible},getOpacity:function(i){return e.onairRef.getTileLayout(t,o).opacity},getBrightness:function(i){return e.onairRef.getTileLayout(t,o).filterBrightness},getBlur:function(i){return e.onairRef.getTileLayout(t,o).filterBlur},getContrast:function(i){return e.onairRef.getTileLayout(t,o).filterContrast},getGrayscale:function(i){return e.onairRef.getTileLayout(t,o).filterGrayscale},getHue:function(i){return e.onairRef.getTileLayout(t,o).filterHueRotate},getInvert:function(i){return e.onairRef.getTileLayout(t,o).filterInvert},getSaturate:function(i){return e.onairRef.getTileLayout(t,o).filterSaturate},getSepia:function(i){return e.onairRef.getTileLayout(t,o).filterSepia},setPositionX:function(i){e.onairRef.setTileLayout(t,o,{left:i})},setPositionY:function(i){e.onairRef.setTileLayout(t,o,{top:i})},setSizeX:function(i){e.onairRef.setTileLayout(t,o,{width:i})},setSizeY:function(i){e.onairRef.setTileLayout(t,o,{height:i})},setRotateZ:function(i){e.onairRef.setTileLayout(t,o,{rotateZ:i})},setVisibility:function(i){e.onairRef.setTileLayout(t,o,{visible:i})},setOpacity:function(i){e.onairRef.setTileLayout(t,o,{opacity:i})},setBrightness:function(i){e.onairRef.setTileLayout(t,o,{filterBrightness:i})},setBlur:function(i){e.onairRef.setTileLayout(t,o,{filterBlur:i})},setContrast:function(i){e.onairRef.setTileLayout(t,o,{filterContrast:i})},setGrayscale:function(i){e.onairRef.setTileLayout(t,o,{filterGrayscale:i})},setHue:function(i){e.onairRef.setTileLayout(t,o,{filterHueRotate:i})},setInvert:function(i){e.onairRef.setTileLayout(t,o,{filterInvert:i})},setSaturate:function(i){e.onairRef.setTileLayout(t,o,{filterSaturate:i})},setSepia:function(i){e.onairRef.setTileLayout(t,o,{filterSepia:i})},id:o=i})}),l},findGroup:function(i){var o=[];for(var n in e.compositionInfo.compositions[t].groups)e.compositionInfo.compositions[t].groups[n].name==i&&o.push(n);var s=[];return o.forEach(function(i){var o;s.push({getDomElement:function(t){return document.getElementById("onair"+o)},getPositionX:function(i){return e.onairRef.getGroupLayout(t,o).left},getPositionY:function(i){return e.onairRef.getGroupLayout(t,o).top},getSizeX:function(i){return e.onairRef.getGroupLayout(t,o).width},getSizeY:function(i){return e.onairRef.getGroupLayout(t,o).height},getRotateZ:function(i){return e.onairRef.getGroupLayout(t,o).rotateZ},getVisibility:function(i){return e.onairRef.getGroupLayout(t,o).visible},getOpacity:function(i){return e.onairRef.getGroupLayout(t,o).opacity},getBrightness:function(i){return e.onairRef.getGroupLayout(t,o).filterBrightness},getBlur:function(i){return e.onairRef.getGroupLayout(t,o).filterBlur},getContrast:function(i){return e.onairRef.getGroupLayout(t,o).filterContrast},getGrayscale:function(i){return e.onairRef.getGroupLayout(t,o).filterGrayscale},getHue:function(i){return e.onairRef.getGroupLayout(t,o).filterHueRotate},getInvert:function(i){return e.onairRef.getGroupLayout(t,o).filterInvert},getSaturate:function(i){return e.onairRef.getGroupLayout(t,o).filterSaturate},getSepia:function(i){return e.onairRef.getGroupLayout(t,o).filterSepia},getBorderRadius:function(i){var n=e.onairRef.getGroupLayout(t,o);return{active:!0===n.groupClipChildrenValue,tl:n.groupBorderRadiusValueTL,tr:n.groupBorderRadiusValueTR,bl:n.groupBorderRadiusValueBR,br:n.groupBorderRadiusValueBL}},setPositionX:function(i){e.onairRef.setGroupLayout(t,o,{left:i})},setPositionY:function(i){e.onairRef.setGroupLayout(t,o,{top:i})},setSizeX:function(i){e.onairRef.setGroupLayout(t,o,{width:i})},setSizeY:function(i){e.onairRef.setGroupLayout(t,o,{height:i})},setRotateZ:function(i){e.onairRef.setGroupLayout(t,o,{rotateZ:i})},setVisibility:function(i){e.onairRef.setGroupLayout(t,o,{visible:i})},setOpacity:function(i){e.onairRef.setGroupLayout(t,o,{opacity:i})},setBrightness:function(i){e.onairRef.setGroupLayout(t,o,{filterBrightness:i})},setBlur:function(i){e.onairRef.setGroupLayout(t,o,{filterBlur:i})},setContrast:function(i){e.onairRef.setGroupLayout(t,o,{filterContrast:i})},setGrayscale:function(i){e.onairRef.setGroupLayout(t,o,{filterGrayscale:i})},setHue:function(i){e.onairRef.setGroupLayout(t,o,{filterHueRotate:i})},setInvert:function(i){e.onairRef.setGroupLayout(t,o,{filterInvert:i})},setSaturate:function(i){e.onairRef.setGroupLayout(t,o,{filterSaturate:i})},setSepia:function(i){e.onairRef.setGroupLayout(t,o,{filterSepia:i})},setBorderRadius:function(i){var n={groupBorderRadiusMode:!1};void 0!==i.tl&&(n.groupBorderRadiusValueTL=i.tl),void 0!==i.tr&&(n.groupBorderRadiusValueTR=i.tr),void 0!==i.bl&&(n.groupBorderRadiusValueBR=i.bl),void 0!==i.br&&(n.groupBorderRadiusValueBL=i.br),void 0!==i.active&&(n.groupClipChildren=i.active),e.onairRef.setGroupLayout(t,o,n)},id:o=i})}),s},getDomElement:function(i){return e.compositionInfo.compositionId==t?document.getElementsByClassName("onair-renderer root-onair")[0]:document.getElementById("onair"+t)}}}();return t===this.onairRef.props.rootRtdbRef.key&&(delete i.getPositionX,delete i.getPositionY,delete i.getSizeX,delete i.getSizeY,delete i.getRotateZ,delete i.getVisibility,delete i.getOpacity,delete i.getBrightness,delete i.getBlur,delete i.getContrast,delete i.getGrayscale,delete i.getHue,delete i.getInvert,delete i.getSaturate,delete i.getSepia,delete i.setPositionX,delete i.setPositionY,delete i.setSizeX,delete i.setSizeY,delete i.setRotateZ,delete i.setVisibility,delete i.setOpacity,delete i.setBrightness,delete i.setBlur,delete i.setContrast,delete i.setGrayscale,delete i.setHue,delete i.setInvert,delete i.setSaturate,delete i.setSepia),this.subcompInstances[t]=i,i},parseStackTrace:function(t){var e=ErrorStackParser.parse(t);if(!e||!e.length)return{compId:null,line:null};var i=function(t){if("SingularOverlayScript.js"==t)return"overlay";if(-1!==t.indexOf("SingularGlobalScript"))return"global";var e=t.lastIndexOf("/")+1;return t.substr(e,t.length-e-3)},o=function(t){if("SingularOverlayScript.js"==t)return"Overlay Script";if(-1!==t.indexOf("SingularGlobalScript"))return"Global Script";var e=t.indexOf("SingularCompScript/");if(-1!=e){e+=19;var i=t.lastIndexOf("/");if(-1!=i)return t.substr(e,i-e)}},n=e[0],s=i(n.fileName),a=o(n.fileName);if("singularplayer"==s||"OnairScript"==s){if(!(n=e[1]))return{compId:null,line:null};s=i(n.fileName),a=o(n.fileName)}return{compId:s,scriptName:a,line:{line:n.lineNumber,col:n.columnNumber}}},reportRunTimeError:function(t){var e=this.parseStackTrace(t);e.compId&&window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"error",compId:e.compId,scriptName:e.scriptName,message:t.message,line:e.line}},"*")},setScripts:function(t){var e=this;this.globalScriptInstance={},t&&(this.compositionInfo.compositionProps.scripts=t);var i=this.onairRef.props.rootSbRef.key,o=[i],n=function(t){for(var i in e.compositionInfo.subcompositionNames[t])o.unshift(i),n(i)};n(i),o.unshift("global"),o.forEach(function(t){e.installScript(t)})},installScript:function installScript(compId){if(this.onairRef&&(this.uninstallScript(compId),this.compositionInfo.compositionProps&&this.compositionInfo.compositionProps.scripts&&this.compositionInfo.compositionProps.scripts[compId])){var script=this.compositionInfo.compositionProps.scripts[compId];try{script=lzutf8__WEBPACK_IMPORTED_MODULE_1___default().decompress(script,{inputEncoding:"StorageBinaryString"})}catch(t){}window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"eval",compId}},"*");var processEvalError=function(t){var e=this.parseStackTrace(t);e.compId&&window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"error",compId:e.compId,scriptName:e.scriptName,message:t.name+": "+t.message,line:e.line}},"*"),e.compId&&e.compId==compId||window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"error",compId,scriptName:e.scriptName,message:t.name+": "+t.message}},"*")}.bind(this);try{var chromeDebuggerScriptName;chromeDebuggerScriptName="global"==compId?"//# sourceURL=SingularGlobalScript.js":null==this.compositionInfo.idToName[compId]?"//# sourceURL=SingularCompScript/Root/"+compId+".js":"//# sourceURL=SingularCompScript/"+encodeURI(this.compositionInfo.idToName[compId])+"/"+compId+".js";var scriptObj=eval(script+chromeDebuggerScriptName),isError=!1,sendErrorMessage=function(t){isError=!0,window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"error",compId,message:t}},"*")};if(scriptObj?(0!=isError||scriptObj.init&&"function"==typeof scriptObj.init||sendErrorMessage("Init function not found"),0==isError&&scriptObj.close&&"function"!=typeof scriptObj.close&&sendErrorMessage("Close is not a function")):sendErrorMessage("Script object not found"),0==isError&&scriptObj.init)try{"global"==compId?scriptObj.init(this.context()):scriptObj.init(this.getCompositionById(compId),this.context())}catch(t){isError=!0,processEvalError(t)}0==isError&&(this.scriptObjects[compId]=scriptObj,window.parent.postMessage({event:"_singular_composition_script_event",params:{type:"ok",compId}},"*"))}catch(t){processEvalError(t)}}},uninstallScript:function(t){if(this.onairRef){for(var e in this.callbacks)delete this.callbacks[e][t];this.scriptObjects[t]&&this.scriptObjects[t].close&&("global"==t?this.scriptObjects[t].close(this.context()):this.scriptObjects[t].close(this.getCompositionById(t),this.context())),delete this.scriptObjects[t]}},bindDatanodes:function(){var t=this;this.unbindDataNodes();var e=this.onairRef.props.rootRtdbRef.root,i=function(i){var o=t.compositionInfo.compositions[i];if(o.dataSources&&o.dataSources.composition&&o.dataSources.composition.dataNodes){var n=function(){var n=o.dataSources.composition.dataNodes[s],a=e.child("users").child(n.userId).child("dataNodes").child(n.dataNode);t.dataNodeRefs.push(a),a.on("value",function(e){if(e.exists()){var o=e.val();if(o){o.payload||(o.payload={});var s=!1;null==t.lastFbDataNode[o.id]||Util.compareObject2(t.lastFbDataNode[n.dataNode].payload,o.payload)||(s=!0),t.compositionInfo.dataNodes[o.id]=o,t.compositionInfo.dataNodes[o.id].url=window.location.origin+"/apiv1/datanodes/"+o.refId,s&&t.dispatchEvent(i,"datanode_payload_changed",{payload:o.payload,id:o.id,name:o.name}),t.lastFbDataNode[o.id]=o}}})};for(var s in o.dataSources.composition.dataNodes)n()}};for(var o in this.compositionInfo.compositions)i(o)},unbindDataNodes:function(){if(this.dataNodeRefs.length){for(var t in this.dataNodeRefs)this.dataNodeRefs[t].off();this.dataNodeRefs=[]}this.lastFbDataNode={}},bindControlNodes:function(){var t=this;this.unbindControlNodes();var e=this.onairRef.props.rootRtdbRef,i=function(i){if(t.compositionInfo.compositions[i].dataSources&&t.compositionInfo.compositions[i].dataSources.composition&&t.compositionInfo.compositions[i].dataSources.composition.controlNode){var o=e.child("compositions").child(i).child("dataSources/composition/controlNode/payload");t.controlNodeRefs.push[o],o.on("value",function(e,o,n){e.exists()&&"GRAPHICS_SDK"!=n&&"COMP_SCRIPT"!=n&&t.handle_setControlNodeOffline(i,e.val())})}};for(var o in this.compositionInfo.compositions)i(o)},unbindControlNodes:function(){if(this.controlNodeRefs.length){for(var t in this.controlNodeRefs)this.controlNodeRefs[t].off();this.controlNodeRefs=[]}},setup:function(t){var e=this;window.addEventListener("error",function(t){return e.reportRunTimeError(t.error)},!1);var i=t.props.rootSbRef.key;this.onairRef=t;var o=t.props.rootSbRef.val();this.compositionInfo=Util.getCompositionInfo(o,i),this.compositionInfo.adaptationGlobals=Util.extend(!0,t._adaptationGlobals),this.compositionInfo.compositions=o.compositions,this.compositionInfo.dataNodes={},_compositionLibrary__WEBPACK_IMPORTED_MODULE_0__.A.controlLib.onStateChanged_callbacks.push(this.handle_onStateChanged.bind(this)),_compositionLibrary__WEBPACK_IMPORTED_MODULE_0__.A.controlLib.OnairScript=this,window.singularScriptCompInfoForUI=this.scriptCompInfoForUI,this.treeLookup={},this.tree={id:i,children:[],parent:null,name:"Root"};var n=function(t){for(var i in e.treeLookup[t.id]=t,e.compositionInfo.subcompositionNames[t.id]){var o={id:i,children:[],parent:t,name:e.compositionInfo.subcompositionNames[t.id][i]};t.children.push(o),n(o)}};n(this.tree),this.setScripts(),this.bindDatanodes(),this.bindControlNodes()}};const __WEBPACK_DEFAULT_EXPORT__=OnairScript},33287:(t,e,i)=>{var o=i(57437);t.exports={getDefaultLayout:function(t){return{visible:!0,left:0,leftUnit:"%",top:0,topUnit:"%",zPos:0,width:100,widthUnit:"%",height:100,heightUnit:"%",lockSize:!0,scaleX:100,scaleY:100,lockScale:!0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,behavior:[],updateAnimation:{active:!1,alwaysExecute:!1,in:{duration:.5,effect:"fade",property:"none",easing:{easing:"power1",inOut:"out"}},out:{duration:.5,effect:"fade",property:"none",easing:{easing:"power1",inOut:"in"}},offset:.5},anchor:{x:50,y:50},zindex:t}},getRotateFromLayout:function(t){return{x:t.rotateX,y:t.rotateY,z:t.rotateZ}},getScaleFromLayout:function(t){return{x:t.scaleX/100,y:t.scaleY/100,z:(t.scaleX+t.scaleY)/200}},getCSSTransform:function(t,e){var i="",o={translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0},n=!1;e&&e.perspectiveActive&&(n=!0);var s=t.zPos||0;return 0==n&&(s=0),o.translateZ=s,0!=o.translateZ&&(i+="translateZ("+o.translateZ+"px) "),o.scaleX=t.scaleX/100,1!=o.scaleX&&(i+="scaleX("+o.scaleX+") "),o.scaleY=t.scaleY/100,1!=o.scaleY&&(i+="scaleY("+o.scaleY+") "),n&&(o.scaleZ=(Number(t.scaleX)+Number(t.scaleY))/200,1!=o.scaleZ&&(i+="scaleZ("+o.scaleZ+") ")),o.rotateX=0==n?0:t.rotateX,0!=o.rotateX&&(i+="rotateX("+o.rotateX+"deg) "),o.rotateY=0==n?0:t.rotateY,0!=o.rotateY&&(i+="rotateY("+o.rotateY+"deg) "),o.rotateZ=t.rotateZ,0!=o.rotateZ&&(i+="rotateZ("+o.rotateZ+"deg) "),o.skewX=t.skewX,o.skewY=t.skewY,0==o.skewX&&0==o.skewY||(o.skewX=Math.min(Math.max(o.skewX,-89.9),89.9),o.skewY=Math.min(Math.max(o.skewY,-89.9),89.9),i+="skew("+o.skewX+"deg, "+o.skewY+"deg) "),{transform:i,transformObj:o}},layoutToStyle:function(t,e,i,o,n){return o||(o={}),this.layoutToStyleTransform(t,e,i,o,n),this.layoutToStyleEffect(t,e,i,o),this.layoutGetShadow(t,e,i,o),this.layoutGetMaskStyle(t,e,i,o),this.layoutGetBlur(t,e,i,o),this.layoutGetBlendModeStyle(t,e,i,o),o},layoutToStyleTransform:function(t,e,i,n,s){n||(n={}),t.visible&&"0"!==t.visible&&"false"!==t.visible?n.visibility="inherit":n.visibility="hidden";var a=this.getCSSTransform(t,e).transform;n.transform=a;var r=t.leftUnit||"%",l=t.topUnit||"%",d=t.widthUnit||"%",p=t.heightUnit||"%",c=t.width,h=t.height,u=(100-c)*t.anchor.x/100,m=(100-h)*t.anchor.y/100,f=Number(t.left)+u;f&&(n.left=f+r);var v=Number(t.top)+m;if(v&&(n.top=v+l),n.width=t.width+d,n.height=t.height+p,50==t.anchor.x&&50==t.anchor.y||(n.transformOrigin=t.anchor.x+"% "+t.anchor.y+"%"),e&&e.perspectiveActive&&(n.transformStyle="preserve-3d"),void 0!==t.groupClipChildren&&1==t.groupClipChildren&&(n.overflow="hidden",void 0!==t.groupBorderRadiusMode))if(t.groupBorderRadiusMode){var g=t.groupBorderRadiusValueTL*s.width/100;n.borderRadius=g+"px"}else{var y=t.groupBorderRadiusValueTL||0,w=t.groupBorderRadiusValueTR||0,b=t.groupBorderRadiusValueBL||0,I=t.groupBorderRadiusValueBR||0,S=y*s.width/100,T=w*s.width/100,R=b*s.width/100,k=I*s.width/100;n.borderRadius=S+"px "+T+"px "+R+"px "+k+"px"}return n.zIndex=-t.zindex,n.position="absolute",void 0!==t.opacity&&t.opacity!=o.opacity&&(n.opacity=t.opacity/100),n},layoutToStyleEffect:function(t,e,i,n){return n||(n={}),n.filter="",void 0!==t.filterBrightness&&t.filterBrightness!=o.filterBrightness&&(n.filter+=" brightness("+t.filterBrightness+"%)"),void 0!==t.filterContrast&&t.filterContrast!=o.filterContrast&&(n.filter+=" contrast("+t.filterContrast+"%)"),void 0!==t.filterGrayscale&&t.filterGrayscale!=o.filterGrayscale&&(n.filter+=" grayscale("+t.filterGrayscale+"%)"),void 0!==t.filterHueRotate&&t.filterHueRotate!=o.filterHueRotate&&(n.filter+=" hue-rotate("+t.filterHueRotate+"deg)"),void 0!==t.filterInvert&&t.filterInvert!=o.filterInvert&&(n.filter+=" invert("+t.filterInvert+"%)"),void 0!==t.filterSaturate&&t.filterSaturate!=o.filterSaturate&&(n.filter+=" saturate("+t.filterSaturate+"%)"),void 0!==t.filterSepia&&t.filterSepia!=o.filterSepia&&(n.filter+=" sepia("+t.filterSepia+"%)"),""!==n.filter&&(n.WebkitFilter=n.filter),e&&e.perspectiveActive&&(n.transformStyle="preserve-3d",t.backfaceVisibility||(n.backfaceVisibility="hidden")),n},layoutGetShadow:function(t,e,i,n){if(n||(n={}),void 0!==t.filterDropShadowMode&&t.filterDropShadowMode!=o.filterDropShadowMode){var s=t.filterDropShadowX||o.filterDropShadowX,a=t.filterDropShadowY||o.filterDropShadowY,r=t.filterDropShadowBlur||o.filterDropShadowBlur,l=t.filterDropShadowSpread||o.filterDropShadowSpread,d=t.filterDropShadowColor||o.filterDropShadowColor,p=t.filterDropShadowInset?"inset":"";"box"==t.filterDropShadowMode?n.boxShadow=p+" "+s+"px "+a+"px "+r+"px "+l+"px rgba("+d.r+","+d.g+","+d.b+","+d.a+")":(void 0===n.filter&&(n.filter=""),n.filter+=" drop-shadow("+s+"px "+a+"px "+r+"px rgba("+d.r+","+d.g+","+d.b+","+d.a+")) ",n.filter&&(n.WebkitFilter=n.filter))}return n},layoutGetMaskStyle:function(t,e,i,o){return o},layoutGetBlur:function(t,e,i,n){return void 0!==n&&""!=n||(n={}),void 0!==t.filterBlur&&t.filterBlur!=o.filterBlur&&(void 0===n.filter&&(n.filter=""),n.filter+="blur("+t.filterBlur+"px)",n.filter&&(n.WebkitFilter=n.filter)),n},layoutGetBlendModeStyle:function(t,e,i,o){return{}}}},49128:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});const o={timelineStore:{},setActiveTimeline:function(t,e,i){this.timelineStore[t]||(this.timelineStore[t]={}),this.timelineStore[t]={activeTimeline:e,activeTimelinePosition:i}},getActiveTimeline:function(t){return this.timelineStore[t]?this.timelineStore[t]:{activeTimeline:"In",activeTimelinePosition:0}}}},50313:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});const o={compAnimationState:{},compAnimationTargetState:{},timelineMaxState:{},compParentTimeline:{},iframeRefMap:{},widgetWithAnimationCallback:{},instancesParentChildren:{},iframeInstances:{},compositionEffect:{},_widgetOnSingularValueDebounceMap:{},mouseoverElement:void 0,onAirWidgetRefMap:{},onAirGroupRefMap:{},tileCompInstances:{},compInstanceUserData:{},elementVisibility:{},stateCommand:{},compositionStack:null,suppressOnAnimationEvent:!1,reset:function(){this.compAnimationState={},this.compAnimationTargetState={},this.timelineMaxState={},this.compParentTimeline={},this.iframeRefMap={},this.widgetWithAnimationCallback={},this.instancesParentChildren={},this.iframeInstances={},this.compositionEffect={},this._widgetOnSingularValueDebounceMap={},this.mouseoverElement=void 0,this.onAirWidgetRefMap={},this.onAirGroupRefMap={},this.tileCompInstances={},this.compInstanceUserData={},this.elementVisibility={}},cleanupCompositionInstance:function(t,e,i){},cleanupWidgetCompInstancesDataByTile:function(t,e){},cleanupTileData:function(t,e){},cleanupGroupData:function(t,e){},destroyIframe:function(t){var e=this,i=function(t){e.iframeRefMap[t]&&(Object.keys(e.iframeRefMap[t]).forEach(function(i){if(e.iframeInstances[t]){var o=e.iframeInstances[t][i];o&&$(o).contents().find("body").html("")}}),delete e.iframeRefMap[t])};i(t);var o=[],n=function(t){var i=e.instancesParentChildren[t];i&&(o=o.concat(i),i.forEach(function(t){n(t)}))};n(t),o.forEach(function(t){e.iframeRefMap[t]&&i(t)})},updateElementVisibility:function(t,e,i,o,n,s){var a,r,l;if(this.onAirWidgetRefMap[n]&&(l=this.onAirWidgetRefMap[n][s]),l){var d=l.props.tile;r=d.effects,a=d.type}else{if(!this.onAirGroupRefMap[n])return;if(!(l=this.onAirGroupRefMap[n][s]))return;a="group",r=l.props.group.effects}for(var p=o,c=n;this.compParentTimeline[p]&&this.compParentTimeline[p][c]&&this.compParentTimeline[p][c].linked;)c=p=this.compParentTimeline[p][c].parentTimelineId;for(var h=t.style.opacity,u=t.parentNode;0!=h&&u!=e;){var m=u.style.opacity;"hidden"==u.style.visibility&&(m="0"),""!=m&&(h=m),u=u.parentNode}""==h&&(h=1);var f=!1,v=!0===i.child("compositionProps/timeline2Active/"+n).val();if("composition"==a){var g=this.timelineMaxState[s];f=g&&("Out1"==g[s]||"Out2"==g[s])}if(0==f&&("none"!=r.In.effect||"none"!=r.Out.effect&&v)){var y=this.timelineMaxState[p];f=y&&("Out1"==y[c]||"Out2"==y[c])}return this.elementVisibility[o]||(this.elementVisibility[o]={}),this.elementVisibility[o][s]||(this.elementVisibility[o][s]=!1),0!=h&&0==f&&(this.elementVisibility[o][s]=!0,!0)},updateElementVisibility2:function(t,e){if(this.timelineMaxState[t]){if("In"!=this.timelineMaxState[t][e]){for(var i in this.elementVisibility[t])this.elementVisibility[t][i]=!1;return!1}return!0}},isCompStateOut:function(t,e){for(;this.compParentTimeline[t]&&this.compParentTimeline[t][e]&&this.compParentTimeline[t][e].linked;)e=t=this.compParentTimeline[t][e].parentTimelineId;return!(!this.timelineMaxState[t]||"Out1"!=this.timelineMaxState[t][e]&&"Out2"!=this.timelineMaxState[t][e])}}},52871:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var o=i(40961),n=i.n(o),s=i(50313),a=i(9769);const r={componentDidUpdate:function(t,e){if(this.props.tile&&t){var i=this.props.tile.layout,o=t.tile.layout;(0==a.compareObject(i.behavior,o.behavior)||i.updateAnimation&&o.updateAnimation&&i.updateAnimation.active!=o.updateAnimation.active)&&this.setupBehavior(this.props.tile.layout.behavior)}},componentDidMount:function(){void 0!==this.props.tile&&void 0!==this.props.tile.layout&&void 0!==this.props.tile.layout.behavior&&this.setupBehavior(this.props.tile.layout.behavior)},componentWillUnmount:function(){this.destroyBehavior()},setupBehavior:function(t){void 0===this.behaviorTweens&&(this.behaviorTweens=[]);var e=[];if(void 0!==t&&""!=t){var i=n().findDOMNode(this.behaviorAnimationRef);if(null==i)return void console.log("Behavior: dom node not found: "+i+" --- "+this.behaviorAnimationRef);t.map(function(t){var o;0!=t.active&&(this.behaviorTweens.map(function(e,i){t.property==e.behavior.property&&(o=e)}),o||(o={behavior:null,tween:null},this.behaviorTweens.push(o)),o.behavior=t,o.reverse=!1,o.driftTarget=0,o.start=parseFloat(t.valueMin),o.end=parseFloat(t.valueMax),o.duration=parseFloat(t.duration),o.durationRange=parseFloat(t.durationRange),o.ease=this.generateGreensockEasing(t.easing),o.delay=parseFloat(t.delay),o.delayRange=parseFloat(t.delayRange),o.domNode=i,o.tween&&(o.tween.kill(),o.tween=null),this.startTween(o),e.push(t.property))}.bind(this))}for(var o=0;o<this.behaviorTweens.length;)-1==e.indexOf(this.behaviorTweens[o].behavior.property)&&null!=this.behaviorTweens[o].tween?(this.behaviorTweens[o].tween.kill(),this.resetTween(this.behaviorTweens[o]),this.behaviorTweens.splice(o,1)):o++},destroyBehavior:function(){void 0!==this.behaviorTweens&&(this.behaviorTweens.map(function(t){null!=t.tween&&t.tween.kill(),t.tween=null}),this.behaviorTweens=void 0)},startTween:function(t){var e=t.behavior,i=t.duration+Math.random()*t.durationRange,o=t.start,n=t.end;if("drift"==e.effect){for(var a=n-o,r=0;;)if(n=o+Math.random()*a,Math.abs(n-t.driftTarget)>a/5){r=Math.abs(n-t.driftTarget),t.driftTarget=n;break}i=i*r/a}else if("pingpong"==e.effect&&1==t.reverse||"loop-"==e.effect){var l=o;o=n,n=l}var d=this.convertBehaviorProperty(e.property,n);"drift"==e.effect?d.startAt="":d.startAt=this.convertBehaviorProperty(e.property,o),d.ease=t.ease,d.onComplete=this.startTween,d.onCompleteScope=this,d.onCompleteParams=[t],d.delay=t.delay+Math.random()*t.delayRange,t.tween=TweenLite.to(t.domNode,i,d),t.reverse=!t.reverse;var p=this.props.sbRef.key,c=this.props.compositionInstanceId||this.props.sbRef.key;!s.A.compAnimationTargetState[c]||"Out1"!=s.A.compAnimationTargetState[c][p]&&"Out2"!=s.A.compAnimationTargetState[c][p]||t.tween.pause()},resetTween:function(t){if(t.domNode)switch(t.behavior.property){case"positionX":TweenLite.set(t.domNode,{x:"0%"});break;case"positionY":TweenLite.set(t.domNode,{y:"0%"});break;case"positionZ":TweenLite.set(t.domNode,{z:"0%"});break;case"rotationX":TweenLite.set(t.domNode,{rotationX:0});break;case"rotationY":TweenLite.set(t.domNode,{rotationY:0});break;case"rotationZ":TweenLite.set(t.domNode,{rotationZ:0});break;case"scale":TweenLite.set(t.domNode,{scale:1});break;case"scaleX":TweenLite.set(t.domNode,{scaleX:1});break;case"scaleY":TweenLite.set(t.domNode,{scaleY:1});break;case"opacity":TweenLite.set(t.domNode,{opacity:1});break;default:console.error("resetTween: invalid property <"+property+">")}},convertBehaviorProperty:function(t,e){switch(t){case"positionX":return{x:e+"%"};case"positionY":return{y:e+"%"};case"positionZ":return{z:e+"%"};case"rotationX":return{rotationX:e};case"rotationY":return{rotationY:e};case"rotationZ":return{rotationZ:e};case"scale":return{scale:e/100};case"scaleX":return{scaleX:e/100};case"scaleY":return{scaleY:e/100};case"opacity":return{opacity:e/100};default:console.error("convertBehaviorProperty: invalid property <"+t+">")}},generateGreensockEasing:function(t){if(null==t||""==t)return Power0.easeNone;var e=this.getEasingObjectFromString(t.easing);switch(t.easing){case"linear":e=e.easeNone;break;case"stepped":break;case"rough":case"slowmo":e=e.ease;break;default:switch(t.inOut){case"in":e=e.easeIn;break;case"out":e=e.easeOut;break;default:e=e.easeInOut}}switch(t.easing){case"back":e=e.config(parseFloat(t.parBack));break;case"elastic":e=e.config(parseFloat(t.parElastic1),parseFloat(t.parElastic2));break;case"slowmo":e=e.config(parseFloat(t.parSlowmo1),parseFloat(t.parSlowmo2));break;case"stepped":e=e.config(parseFloat(t.parStepped));break;case"rough":var i=this.getEasingObjectFromString(t.parRoughTemplate);switch(t.parRoughEasing){case"in":i=i.easeIn;break;case"out":i=i.easeOut;break;case"inOut":i=i.easeInOut}e=e.config({template:i,strength:parseFloat(t.parRoughStrength),points:parseFloat(t.parRoughPoints),taper:t.parRoughTaper,randomize:t.parRoughRandomize,clamp:t.parRoughClamp})}return e},getEasingObjectFromString:function(t){switch(t){case"linear":return Power0;case"power1":return Power1;case"power2":return Power2;case"power3":return Power3;case"power4":return Power4;case"back":return Back;case"elastic":return Elastic;case"bounce":return Bounce;case"rough":return RoughEase;case"stepped":return SteppedEase;case"slowmo":return SlowMo;case"circ":return Circ;case"expo":return Expo;case"sine":return Sine;default:return Linear}},behaviorPause:function(){void 0!==this.behaviorTweens&&this.behaviorTweens.map(function(t){null!=t.tween&&t.tween.pause()})},behaviorResume:function(){void 0!==this.behaviorTweens&&this.behaviorTweens.map(function(t){null!=t.tween&&t.tween.resume()})}}},75348:t=>{t.exports={EVENT_SELECTION:[{id:"mousedown",title:"Mouse Down"},{id:"mouseup",title:"Mouse Up"},{id:"mouseenter",title:"Mouse Enter"},{id:"mouseleave",title:"Mouse Leave"},{id:"dblclick",title:"Mouse Double Click"},{id:"swipeleft",title:"Swipe Left"},{id:"swiperight",title:"Swipe Right"},{id:"swipeup",title:"Swipe Up"},{id:"swipedown",title:"Swipe Down"}],MOUSE_CURSORS:[{id:"default",title:"Default"},{id:"pointer",title:"Pointer"},{id:"progress",title:"Progress"},{id:"move",title:"Move"},{id:"none",title:"None"},{id:"help",title:"Help"},{id:"wait",title:"Wait"},{id:"zoom-in",title:"Zoom In"},{id:"zoom-out",title:"Zoom Out"}],CONTROL_MODE_SELECTION:[{id:"out",title:"Out"},{id:"in",title:"In"},{id:"toggle",title:"Toggle"}]}},76302:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var o=i(40927),n=i.n(o);const s=n().createClass({displayName:"Watermark",getInitialState:function(){var t=280/1920*100,e=36/1080*100,i=81.19,o=92.27;return void 0!==this.props.x&&(i=(100-t)*this.props.x/100),void 0!==this.props.y&&(o=(100-e)*this.props.y/100),{l:i,t:o,w:t,h:e}},componentDidMount:function(){var t=this;this.props.movingWatermark&&(this.interval=setInterval(function(){var e=Math.random()*(100-t.state.w),i=Math.random()*(100-t.state.h);t.setState({l:e,t:i})},6e4))},componentWillUnmount:function(){this.interval&&clearInterval(this.interval)},render:function(){if(!document.getElementsByClassName("root-onair")[0])return!1;var t=81.19,e=92.27;return void 0!==this.props.x&&(t=(100-this.state.w)*this.props.x/100),void 0!==this.props.y&&(e=(100-this.state.h)*this.props.y/100),this.props.movingWatermark&&(t=this.state.l,e=this.state.t),n().createElement("div",{style:{color:"white",opacity:"0.6",filter:"drop-shadow(rgba(0, 0, 0, 1.0) 2px 2px 3px)",zIndex:"99999",position:"absolute",display:"flex",width:this.state.w+"%",height:this.state.h+"%",left:t+"%",top:e+"%"}},n().createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 341 43.8"},n().createElement("g",{fill:"#fff",fillRule:"evenodd"},n().createElement("polygon",{points:"187.6,37.7 203.1,37.7 193.8,21.8 184.6,5.8 175.4,21.8 166.2,37.7 181.7,37.7 181.7,31.9 176.4,31.9  184.6,17.6 192.9,31.9 187.6,31.9 "}),n().createElement("g",null,n().createElement("g",null,n().createElement("path",{d:"M7.2,33c0.2-0.3,0.4-0.6,0.7-0.9c0.4-0.6,0.9-0.9,1.6-0.4C9.8,32,13,35.1,17,35.1c3.6,0,6-2.3,6-4.9 c0-3.1-2.7-4.9-7.8-7.1C10.3,21,7.3,19,7.3,13.9c0-3,2.4-8,9.5-8c4.4,0,7.7,2.3,7.7,2.3c0.3,0.1,0.8,0.7,0.3,1.5 c-0.2,0.3-0.4,0.6-0.5,0.9c-0.4,0.6-0.9,0.8-1.6,0.4c-0.3-0.2-3.1-2.1-5.9-2.1c-4.7,0-6.2,3-6.2,4.9c0,3,2.3,4.7,6,6.3 c6,2.5,9.9,4.7,9.9,9.9c0,4.7-4.4,8.1-9.7,8.1c-5.3,0-8.9-3.1-9.4-3.6C7.1,34.2,6.7,33.8,7.2,33z"}),n().createElement("path",{d:"M33.1,7.2c0-0.4,0.4-0.9,0.9-0.9h1.8c0.4,0,0.9,0.4,0.9,0.9v29.6c0,0.4-0.4,0.9-0.9,0.9H34 c-0.4,0-0.9-0.4-0.9-0.9V7.2z"}),n().createElement("path",{d:"M45.7,6.7c0-0.4,0.4-0.8,0.9-0.8h1.1l20.2,25.2c0,0,0,0,0.1,0V7.2c0-0.4,0.4-0.9,0.9-0.9h1.6 c0.4,0,0.9,0.4,0.9,0.9v30.1c0,0.4-0.4,0.8-0.9,0.8h-0.8L49,12.5h0v24.3c0,0.4-0.4,0.9-0.9,0.9h-1.6c-0.4,0-0.9-0.4-0.9-0.9V6.7z"}),n().createElement("path",{d:"M94.2,5.9c4.5,0,7.8,1.6,10.8,4.2c0.4,0.4,0.4,0.9,0,1.3c-0.4,0.4-0.9,0.9-1.3,1.3c-0.4,0.4-0.7,0.4-1.2,0 c-2.3-2-5.5-3.5-8.5-3.5C87.1,9,81.8,15,81.8,21.9c0,6.9,5.4,12.9,12.4,12.9c4.9,0,8.1-1.9,8.1-1.9v-6.3h-5.1 c-0.5,0-0.9-0.4-0.9-0.8v-1.7c0-0.5,0.4-0.9,0.9-0.9h7.7c0.4,0,0.8,0.4,0.8,0.9v10.2c0,0.2-0.2,0.6-0.4,0.7c0,0-4.6,3-11.1,3 c-9,0-16.2-7.1-16.2-16.1S85.3,5.9,94.2,5.9z"}),n().createElement("path",{d:"M112.7,7.2c0-0.4,0.4-0.9,0.9-0.9h1.7c0.5,0,0.9,0.4,0.9,0.9v18.7c0,5.1,3.2,9.1,8.4,9.1c5.3,0,8.5-3.9,8.5-9 V7.2c0-0.4,0.4-0.9,0.9-0.9h1.7c0.4,0,0.9,0.4,0.9,0.9v18.9c0,6.8-4.8,12-11.9,12c-7,0-11.8-5.2-11.8-12V7.2z"}),n().createElement("path",{d:"M145.2,7.2c0-0.4,0.4-0.9,0.9-0.9h1.7c0.4,0,0.9,0.4,0.9,0.9v27.5h12.9c0.5,0,0.9,0.4,0.9,0.9v1.3 c0,0.4-0.4,0.9-0.9,0.9H146c-0.5,0-0.9-0.4-0.9-0.9V7.2z"}),n().createElement("path",{d:"M206.9,7.2c0-0.4,0.4-0.9,0.9-0.9h11.6c5.4,0,9.8,4.2,9.8,9.5c0,4.1-2.7,7.6-6.6,9.1l6.1,11.4 c0.3,0.6,0,1.3-0.8,1.3h-2.3c-0.4,0-0.6-0.2-0.7-0.4l-6-11.9h-8.5v11.4c0,0.4-0.4,0.9-0.9,0.9h-1.7c-0.5,0-0.9-0.4-0.9-0.9V7.2z M219.1,22.5c3.4,0,6.4-2.9,6.4-6.5c0-3.4-3-6.3-6.4-6.3h-8.7v12.8H219.1z"}),n().createElement("path",{d:"M238.5,33c1.4,0,2.6,1.1,2.6,2.6c0,1.4-1.1,2.6-2.6,2.6c-1.4,0-2.6-1.2-2.6-2.6C235.9,34.2,237.1,33,238.5,33 z"}),n().createElement("path",{d:"M250.5,7.2c0-0.4,0.4-0.9,0.9-0.9h1.7c0.4,0,0.9,0.4,0.9,0.9v27.5h12.9c0.5,0,0.9,0.4,0.9,0.9v1.3 c0,0.4-0.4,0.9-0.9,0.9h-15.5c-0.5,0-0.9-0.4-0.9-0.9V7.2z"}),n().createElement("path",{d:"M272.5,7.2c0-0.4,0.4-0.9,0.9-0.9h1.8c0.4,0,0.9,0.4,0.9,0.9v29.6c0,0.4-0.4,0.9-0.9,0.9h-1.8 c-0.4,0-0.9-0.4-0.9-0.9V7.2z"}),n().createElement("path",{d:"M280.9,7.5c-0.3-0.6,0.1-1.2,0.8-1.2h1.8c0.4,0,0.7,0.3,0.8,0.5l11.1,25.1h0.2l11.1-25.1 c0.1-0.2,0.4-0.5,0.8-0.5h1.8c0.7,0,1,0.6,0.8,1.2l-13.6,30.1c-0.1,0.3-0.4,0.5-0.8,0.5h-0.4c-0.3,0-0.6-0.2-0.8-0.5L280.9,7.5z"}),n().createElement("path",{d:"M314.8,7.2c0-0.4,0.4-0.9,0.9-0.9h17.6c0.5,0,0.9,0.4,0.9,0.9v1.3c0,0.4-0.4,0.9-0.9,0.9h-15v10.9h12.8 c0.4,0,0.9,0.4,0.9,0.9v1.3c0,0.5-0.4,0.9-0.9,0.9h-12.8v11.4h15c0.5,0,0.9,0.4,0.9,0.9v1.3c0,0.4-0.4,0.9-0.9,0.9h-17.6 c-0.5,0-0.9-0.4-0.9-0.9V7.2z"}))))))}})},79838:()=>{}}]);