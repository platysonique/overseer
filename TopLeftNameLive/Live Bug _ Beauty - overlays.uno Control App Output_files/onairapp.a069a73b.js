(()=>{var n,e={17604:function(n,e){!function(){var n={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function t(){var n=arguments[0],e=t.cache;return e[n]&&e.hasOwnProperty(n)||(e[n]=t.parse(n)),t.format.call(null,e[n],arguments)}function o(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function i(n,e){return Array(e+1).join(n)}t.format=function(e,r){var a,s,l,c,d,u,p,w=1,f=e.length,m="",g=[],h=!0,v="";for(s=0;s<f;s++)if("string"===(m=o(e[s])))g[g.length]=e[s];else if("array"===m){if((c=e[s])[2])for(a=r[w],l=0;l<c[2].length;l++){if(!a.hasOwnProperty(c[2][l]))throw new Error(t("[sprintf] property '%s' does not exist",c[2][l]));a=a[c[2][l]]}else a=c[1]?r[c[1]]:r[w++];if("function"==o(a)&&(a=a()),n.not_string.test(c[8])&&n.not_json.test(c[8])&&"number"!=o(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",o(a)));switch(n.number.test(c[8])&&(h=a>=0),c[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,c[6]?parseInt(c[6]):0);break;case"e":a=c[7]?a.toExponential(c[7]):a.toExponential();break;case"f":a=c[7]?parseFloat(a).toFixed(c[7]):parseFloat(a);break;case"g":a=c[7]?parseFloat(a).toPrecision(c[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&c[7]?a.substring(0,c[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}n.json.test(c[8])?g[g.length]=a:(!n.number.test(c[8])||h&&!c[3]?v="":(v=h?"+":"-",a=a.toString().replace(n.sign,"")),u=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",p=c[6]-(v+a).length,d=c[6]&&p>0?i(u,p):"",g[g.length]=c[5]?v+a+d:"0"===u?v+d+a:d+v+a)}return g.join("")},t.cache={},t.parse=function(e){for(var t=e,o=[],i=[],r=0;t;){if(null!==(o=n.text.exec(t)))i[i.length]=o[0];else if(null!==(o=n.modulo.exec(t)))i[i.length]="%";else{if(null===(o=n.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(o[2]){r|=1;var a=[],s=o[2],l=[];if(null===(l=n.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=n.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=n.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}o[2]=a}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=o}t=t.substring(o[0].length)}return i},e.sprintf=t,e.vsprintf=function(n,e,o){return(o=(e||[]).slice(0)).splice(0,0,n),t.apply(null,o)}}("undefined"==typeof window||window)},40927:(n,e,t)=>{"use strict";n.exports=t(63475)},40961:(n,e,t)=>{"use strict";n.exports=t(75832)},66949:(n,e,t)=>{"use strict";var o=t(40961),i=t.n(o),r=t(40927),a=t.n(r),s=t(76302),l=t(25160),c=t.n(l),d=t(14794),u=t(16918),p=t.n(u),w=t(79988),f=(t(37482),t(51229),t(47500)),m=t.n(f);var g=t(15734),h=t.n(g),v=t(9769),y=t.n(v),b=t(3808);const S=a().createClass({displayName:"OnairLive",getInitialState:function(){return{unmount:!1}},onCompositionReady:function(n){this.props.onCompositionReady&&this.props.onCompositionReady(n)},onStateChanged:function(n,e){this.props.onStateChanged&&this.props.onStateChanged(n,e)},unmount:function(){this.setState({unmount:!0})},resize:function(n,e){this.setState({width:n,height:e}),this.refs.onairRef.resizeRenderWindow()},render:function(){if(this.state.unmount)return!1;var n;n=this.props.mainComposition?this.props.mainComposition:this.props.rtdbRef.key;var e,t,o=window.innerWidth,i=window.innerHeight,r="live",s=void 0,l=void 0;if(window.singularScene.width&&"undefined"!=window.singularScene.width&&(e=parseInt(window.singularScene.width)),window.singularScene.height&&"undefined"!=window.singularScene.height&&(t=parseInt(window.singularScene.height)),window.customSize){r="preview",s=!0;var c=this.props.sbRef.val().uiSettings;o=this.state.width||e||c.editorResolutionWidth,i=this.state.height||t||c.editorResolutionHeight,l=!0}return"responsive"==window.singularScene.aspect&&(s=!1),a().createElement(b.A,{appPreview:this.props.appPreview,windowAdaptationGlobals:this.props.windowAdaptationGlobals,displayVariant:this.props.displayVariant,showWatermark:this.props.showWatermark,onCompositionReady:this.onCompositionReady,onStateChanged:this.onStateChanged,rootRtdbRef:this.props.rtdbRef,rtdbRef:this.props.rtdbRef.child("compositions").child(n),mainComposition:n,rootSbRef:this.props.sbRef,sbRef:this.props.sbRef.child("compositions").child(this.props.sbRef.key),noScaleUp:l,width:o,height:i,rootTimelines:this.props.rootTimelines,mode:r,customSize:s,ref:"onairRef"})}});var A=t(70187),C=t(88534),I=t.n(C),R=t(84433),x=t.n(R);function E(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}t(97909).polyfill(),window.compEditorMessage=function(n){};try{var k,O=new URLSearchParams(window.location.search),P={},T=function(n){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(n,e){if(n){if("string"==typeof n)return E(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(n,e):void 0}}(n))){e&&(n=e);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,a=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return r=n.done,n},e:function(n){a=!0,i=n},f:function(){try{r||null==e.return||e.return()}finally{if(a)throw i}}}}(O.entries());try{for(T.s();!(k=T.n()).done;){var D=k.value;P[D[0]]=D[1]}}catch(n){T.e(n)}finally{T.f()}c().parseQuery(P)}catch(n){}var _,U=function(n){try{singularanalytics.event(analyticEventType.APP_OUTPUT_OPENED,n,window.page?window.page:"UI",window.location.hostname,{element_id:window.singularAppInstanceId,metadata:singularanalytics.getUIMetadata(analyticEventType.APP_OUTPUT_OPENED,{plan:window.singularAccountSubscriptionPlan,appTemplateId:window.singularAppInstanceTemplateId,brand:window.singularBrand})})}catch(n){console.error(n)}},M=function(n,e,t){i().render(a().createElement(s.A,{x:e,y:t}),n)},j=3;if(1==window.multipleDBs){var N=!1;try{window.top.singularUser&&(N=!0)}catch(n){}if(!N){var W=window.singularCoreDb.databaseMirror.split(",");W=W.filter(function(n){return""!=n});var B=W[Math.floor(Math.random()*W.length)];window.singularCoreDb.databaseURL=B,console.log("onairapp connects to",window.singularCoreDb.databaseURL)}}var z,L=function(n,e,t){var o=e.val();window.singularScene&&window.singularScene.forceinteractivelayer||o.compositions&&o.compositions[n.key]&&o.compositions[n.key].settings?(window.singularMessage=function(){},i().render(a().createElement(A.A,{showWatermark:window.rwms,rtdbRef:n,rootRtdbRef:n,sbRef:e,onCompositionReady:function(n){return d.A.set({onAirRef:n,composition:e.val(),mainComposition:e.key})},mainComposition:n.key,interactiveMode:"composition",rootTimelines:d.A.rootTimelines}),t)):(window.singularMessage=d.A.handleSingularMessage,i().render(a().createElement(S,{windowAdaptationGlobals:window.singularAdaptationGlobals,displayVariant:window.singularDisplayVariant,showWatermark:window.rwms,rtdbRef:n,rootRtdbRef:n,sbRef:e,onCompositionReady:function(n){return d.A.set({onAirRef:n,composition:e.val(),mainComposition:e.key})},rootTimelines:d.A.rootTimelines}),t))};if("compurl"!=window.onairMode){var F=function(n){var e=!1;document.getElementById("onairLive")||(document.body.style.overflow="hidden");var t=document.getElementById("onairLive");if(t){var o=null,r=null,s=function(n,e,t,s){var l=function(e,o,r){e.once("value",function(c){var u=c.val();if(u)if(1!=window.multipleDBs||null!=u.compositionUrl&&null!=u.compositions){_&&location.reload();var w=u.mainComposition,f=e,m=new(p())(null,w);if(d.A.init(f,m,"live"),u.compositionProps&&u.compositionProps.scripts||u.script||window.singularScene&&window.singularScene.forceinteractivelayer)window.singularMessage=function(){},s&&(window.singularAppInstanceId=s.appinstance_id),m.update(u,!1,!1),d.A.goOffline(),window.singularAppInstanceOutputInfo={compExtract:o,firebaseUrl:n.toString(),outputId:r,ds:window.singularAppInstanceDataStore},_=i().render(a().createElement(A.A,{showWatermark:window.rwms,rtdbRef:f,rootRtdbRef:f,sbRef:m,onCompositionReady:function(n){return d.A.set({onAirRef:n,composition:m.val(),mainComposition:m.key})},mainComposition:w,interactiveMode:"appinstance",rootTimelines:d.A.rootTimelines}),t);else{var g=u.compositionUrl;g.startsWith("//")&&(g="https:"+g),h().get(g,function(n,e){n?(console.error("cannot load external data for output"),M(t)):(m.set(e.body,!1,!1),m.child("compositionStates").set(u.compositionStates,!1,!1),y().applyPayload(m,u),window.singularMessage=d.A.handleSingularMessage,_=i().render(a().createElement(S,{windowAdaptationGlobals:window.singularAdaptationGlobals,displayVariant:window.singularDisplayVariant,showWatermark:window.rwms,rtdbRef:f,rootRtdbRef:f,sbRef:m,onCompositionReady:function(n){return d.A.set({onAirRef:n,composition:m.val(),mainComposition:m.key})},mainComposition:w,rootTimelines:d.A.rootTimelines}),t))})}}else j-- >0?(console.log("Incomplete data, retry in 3secs."),setTimeout(function(n){l(e,o,r)},3e3)):console.error("Incomplete data.");else console.error("No comp extract found")})};if("broadcast"==e.toLowerCase()){l(n.child("broadcast/compExtract"),null,"Broadcast");var c=null;n.child("broadcast/compExtract/id").on("value",function(n){null!=c&&location.reload(),c=n.val()})}else o&&o.off(),n.child("outputs").once("value",function(a){var s=a.val(),c=[];for(var d in s)s[d].name==e&&(o=n.child("outputs").child(d)),s[d].key=d,c.push(s[d]);!o&&c.length>0&&(c.sort(function(n,e){return(n.name>e.name)-.5}),o=n.child("outputs").child(c[0].key)),o?o.on("value",function(e){if(e.exists()){var o=e.key,a=e.val(),s=a.compExtract;if(window.compExtract=s,r&&r.compExtract==a.compExtract)return;r=a,i().unmountComponentAtNode(t),_&&_.unmount(),s?(j=3,l(n.child("compExtracts").child(s),s,o)):(console.warn("No composition assigned to the output"),M(t))}else console.error("No data to render output ["+a+"]"),M(t)}):(console.error("Output is empty"),M(t))})};if("appinstance"==window.onairMode)window.appPreview||U(window.singularAppAccount),s(n,window.singularAppInstanceOutputName,t);else if("device"==window.onairMode){var l=function(a){if(!a)return o&&(o.off(),r=null,i().unmountComponentAtNode(t),_&&_.unmount()),t.innerHTML="",void(window.singularAppInstanceId=-1);if(window.singularAppInstanceId=a.appinstance_id,e||(e=!0,function(){try{singularanalytics.event(analyticEventType.OUTPUT_OPENED,window.deviceAccount,window.page?window.page:"UI",window.location.hostname,{element_id:window.deviceId,metadata:singularanalytics.getUIMetadata(analyticEventType.OUTPUT_OPENED,{appId:window.singularAppInstanceId,plan:window.singularAccountSubscriptionPlan,brand:window.singularBrand})})}catch(n){console.error(n)}}()),U(window.deviceAccount),a.datastore){window.singularAppInstanceDataStore=a.datastore;var l=new(p())(null);window.singularAppInstanceDataStoreSBRef=l,new(I())(l,window.singularAppInstanceDataStore).then(function(n){s(l,a.output.name,t,a)})}else{var c=n.parent.parent.child("appinstances").child(a.appinstance_id);s(c,a.output.name,t,a)}};if(window.singularDeviceDataStore){var c=new(p())(null);new(I())(c,window.singularDeviceDataStore).then(function(n){c.child("appinstance").on("value",function(n){var e=n.val();0===Object.keys(e).length?l(null):l(e)})})}else n.child("appinstance").on("value",function(n){l(n.val())})}else if("compoutput"==window.onairMode){!function(n,e){try{singularanalytics.event(analyticEventType.COMP_OPENED,n,window.page?window.page:"UI",window.location.hostname,{element_id:e,metadata:singularanalytics.getUIMetadata(analyticEventType.COMP_OPENED,{plan:window.singularAccountSubscriptionPlan,brand:window.singularBrand})})}catch(n){console.error(n)}}(parseInt(window.singularOwnerAccountId),window.singularCompId);var u=new(p())(null,n.key);d.A.init(n,u,"live"),x().readFromS3OrFirebase(n,function(e,o){u.set(o,!1,!1),L(n,u,t)})}!function(){if("NDI"==window.page){var n=document.createElement("div");document.body.appendChild(n),n.style.position="absolute",n.style.zIndex=99999,n.style.left="0px",n.style.top="0px",n.style.width="1px",n.style.height="1px",n.style.backgroundColor="red";var e=0,t=function(){e=0===e?.001:0,n.style.opacity=e,window.requestAnimationFrame(t)};t()}}()}};if(null===window.singularAppInstanceDataStore||void 0===window.singularAppInstanceDataStore)z=function(n,e){F(e)},m().waterfall([function(n){if(window.singularCoreDb){var e,t=w.A.initializeApp(window.singularCoreDb);e=window.singularStartupDb?t.database().ref().child(window.singularStartupDb):t.database().ref(),window.singularRtdbCoreRef=t.database().ref(),window.singularRtdbCoreApp=t,window.singularCoreDb.token?t.auth().setPersistence(w.A.auth.Auth.Persistence.NONE).then(function(){t.auth().signInWithCustomToken(window.singularCoreDb.token).then(function(){n(null,e)}).catch(function(e){console.log("Init app error "+e.code+", "+e.message),n("Init app error "+e.code+", "+e.message)})}).catch(function(e){n("realtime setPersistence error "+e.code+", "+e.message)}):n(null,e)}else n("No CoreDb Url")}],function(n,e){n?z(n):z(null,e)});else{var G=new(p())(null);window.singularAppInstanceDataStoreSBRef=G,new(I())(G,window.singularAppInstanceDataStore,null,"appWithoutStorage").then(function(n){F(G)})}}else h().get(window.singularCompUrl).end(function(n,e){if(n)console.error("cannot load "+window.singularCompUrl),window.parent.postMessage({type:"interactive_error",params:{type:"error",message:"cannot load "+window.singularCompUrl}},"*");else{var t=e.body,o=new(p())(null,t.mainComposition);o.set(t,!1,!1);var i=new(p())(null,t.mainComposition);d.A.init(o,i,"live"),i.set(t,!1,!1);var r=document.getElementById("onairLive");L(o,i,r)}})}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=e,o.c=t,o.amdO={},n=[],o.O=(e,t,i,r)=>{if(!t){var a=1/0;for(d=0;d<n.length;d++){for(var[t,i,r]=n[d],s=!0,l=0;l<t.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every(n=>o.O[n](t[l]))?t.splice(l--,1):(s=!1,r<a&&(a=r));if(s){n.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=n.length;d>0&&n[d-1][2]>r;d--)n[d]=n[d-1];n[d]=[t,i,r]},o.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return o.d(e,{a:e}),e},o.d=(n,e)=>{for(var t in e)o.o(e,t)&&!o.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),o.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),o.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),(()=>{var n={381:0};o.O.j=e=>0===n[e];var e=(e,t)=>{var i,r,[a,s,l]=t,c=0;if(a.some(e=>0!==n[e])){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var d=l(o)}for(e&&e(t);c<a.length;c++)r=a[c],o.o(n,r)&&n[r]&&n[r][0](),n[r]=0;return o.O(d)},t=self.webpackChunkSingular=self.webpackChunkSingular||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var i=o.O(void 0,[967,822,34,956,727,77,964,274,490,515,878,27,953],()=>o(o.s=66949));i=o.O(i)})();