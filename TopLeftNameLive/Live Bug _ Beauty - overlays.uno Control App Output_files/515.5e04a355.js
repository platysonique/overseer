(self.webpackChunkSingular=self.webpackChunkSingular||[]).push([[515],{25160:(e,t,i)=>{var o=i(87567);e.exports={initializeGlobals:function(e,t,i){var o={};if(e&&(o=Object.assign({},e)),this.addDefaultValues(o),"automatic"==o.layout)if(t&&i){var n=t/i;o.layout=n>=19/9?"banner":n>=11/9?"landscape":n>=9/11?"square":n>=9/19?"portrait":"tower"}else o.layout="landscape";return"automatic"==o.screenSize&&(o.screenSize=t&&i?t<=600?"extraSmall":t<=768?"small":t<=992?"medium":t<=1200?"large":"extraLarge":"medium"),o},addDefaultValues:function(e){if(!e)return Object.assign({},o.DEFAULT_GLOBALS);for(var t in e=Object.assign({},e),o.DEFAULT_GLOBALS)null==e[t]&&(e[t]=o.DEFAULT_GLOBALS[t]);return e},parseQuery:function(e){var t=function(e,t){return e.find(function(e){if(e.id.toLowerCase()==String(t).toLowerCase())return!0})},i={};return o.ADAPTATION_SELECTION.forEach(function(n){var r=function(e,t){for(var i in e=e.toLowerCase(),t)if(t.hasOwnProperty(i)&&e==(i+"").toLowerCase())return t[i]}("g_"+n.id,e);if(void 0!==r){switch(n.id){case"screenSize":if(null==t(o.ADAPTATION_SCREEN_SIZES,r))return void console.warn("Invalid Adaptation Global for "+n.id+": "+r);break;case"layout":if(null==t(o.ADAPTATION_LAYOUTS,r))return void console.warn("Invalid Adaptation Global for "+n.id+": "+r);break;case"textDirection":if(null==t(o.ADAPTATION_TEXT_DIRECTIONS,r))return void console.warn("Invalid Adaptation Global for "+n.id+": "+r);break;case"interactive":if(null==t(o.ADAPTATION_INTERACTIVE,r))return void console.warn("Invalid Adaptation Global for "+n.id+": "+r)}i[n.id]=r}}),i},getQuery:function(e){var t=[];return o.ADAPTATION_SELECTION.forEach(function(i){e[i.id]&&e[i.id]!=o.DEFAULT_GLOBALS[i.id]&&t.push("g_"+i.id+"="+e[i.id])}),t},checkArray:function(e,t){return!(e&&e.active&&(!e.value||e.value&&void 0!==t&&!e.value[t]))},checkString:function(e,t){if(!e||!e.active)return!0;var i=e.value;if(null!=i)switch(e.operation){case"equal":if(i!==t)return!1;break;case"notEqual":if(i===t)return!1;break;case"partOf":if(-1==i.indexOf(t))return!1;break;case"notPartOf":if(-1!=i.indexOf(t))return!1}return!0},executeAdaptation:function(e,t){return!e||!t||0!=this.checkArray(t.layout,e.layout)&&0!=this.checkArray(t.screenSize,e.screenSize)&&0!=this.checkArray(t.textDirection,e.textDirection)&&0!=this.checkArray(t.interactive,e.interactive)&&0!=this.checkString(t.language,e.language)&&0!=this.checkString(t.custom1,e.custom1)&&0!=this.checkString(t.custom2,e.custom2)&&0!=this.checkString(t.custom3,e.custom3)}}},87567:e=>{e.exports={ADAPTATION_SELECTION:[{id:"screenSize",title:"Screen Size",tooltip:"Uses the width of the render window."},{id:"layout",title:"Layout",tooltip:"Uses the aspect ratio of the render window."},{id:"textDirection",title:"Text Direction",tooltip:"Hide elements if they show left to right or right to left text."},{id:"interactive",title:"Interactive",tooltip:"Hide elements if they are interactive or not."},{id:"language",title:"Language",tooltip:"Specifies the language of the element. We recommend using two letter language codes"},{id:"custom1",title:"Custom 1",tooltip:"A text field with no predefined purpose."},{id:"custom2",title:"Custom 2",tooltip:"A text field with no predefined purpose."},{id:"custom3",title:"Custom 3",tooltip:"A text field with no predefined purpose."}],ADAPTATION_INTERACTIVE:[{id:"interactive",title:"Interactive",tooltip:""},{id:"notInteractive",title:"Not Interactive",tooltip:""}],ADAPTATION_SCREEN_SIZES:[{id:"automatic",title:"Automatic",tooltip:"Uses the width of the render window"},{id:"extraSmall",title:"Extra Small",tooltip:"Phones, 600px and down"},{id:"small",title:"Small",tooltip:"Portrait tablets and large phones, 600px and up"},{id:"medium",title:"Medium",tooltip:"Landscape tablets, 768px and up"},{id:"large",title:"Large",tooltip:"Laptops and desktops, 992px and up"},{id:"extraLarge",title:"Extra Large",tooltip:"Large laptops and desktops, 1200px and up"}],ADAPTATION_LAYOUTS:[{id:"automatic",title:"Automatic",tooltip:"Uses the aspect ratio of the render window"},{id:"tower",title:"Tower",tooltip:"Aspect ratio smaller than 9x19 or 0.47"},{id:"portrait",title:"Portrait",tooltip:"Aspect ratio between 9x11 and 9x19 or 0.82 and 0.47"},{id:"square",title:"Square",tooltip:"Aspect ratio between 11x9 and 9x11 or 1.22 and 0.82"},{id:"landscape",title:"Landscape",tooltip:"Aspect ratio between 11x9 and 19x9 or 1.22 and 2.11"},{id:"banner",title:"Banner",tooltip:"Aspect ratio greater than 19x9 or 2.11"}],ADAPTATION_TEXT_DIRECTIONS:[{id:"ltr",title:"Left to Right",tooltip:""},{id:"rtl",title:"Right to Left",tooltip:""}],OPERATION_SELECTION:[{id:"equal",title:"Equal"},{id:"notEqual",title:"Not equal"},{id:"partOf",title:"Part of"},{id:"notPartOf",title:"Not part Of"}],DEFAULT_GLOBALS:{screenSize:"automatic",layout:"automatic",textDirection:"ltr",interactive:"interactive",language:"",custom1:"",custom2:"",custom3:""}}},89126:(e,t,i)=>{"use strict";i.d(t,{A:()=>b});var o=i(40927),n=i.n(o),r=i(40961),s=i.n(r),a=i(9769);const c=n().createClass({displayName:"VideoPreviewDevice",getInitialState:function(){return this.stream=null,{error:null,connectBusy:!1}},shouldComponentUpdate:function(e,t){return!a.compareObject(e,this.props)||!a.compareObject(t,this.state)},componentDidMount:function(){this.connectVideoSource(this.props)},componentWillUnmount:function(){this.disconnectVideoSource()},componentWillReceiveProps:function(e){e.deviceVideo==this.props.deviceVideo&&e.deviceAudio==this.props.deviceAudio&&e.devicePermissionDummy==this.props.devicePermissionDummy||this.connectVideoSource(e)},componentDidUpdate:function(){if(this.refs.videoElement){var e=s().findDOMNode(this.refs.videoElement);e&&void 0!==this.props.muted&&(e.muted=this.props.muted)}},connectVideoSource:function(e){var t=this;if(this.refs.videoElement&&navigator.mediaDevices){var i=e.deviceVideo;e.devicePermissionDummy&&(i=e.devicePermissionDummy);var o=e.audioVideo;e.devicePermissionDummy&&(o=e.devicePermissionDummy),this.setState({connectBusy:!0,error:null}),this.disconnectVideoSource();var n={video:{deviceId:{exact:i}},audio:{deviceId:{exact:o}}};navigator.mediaDevices.getUserMedia(n).then(function(e){t.stream=e;var i=s().findDOMNode(t.refs.videoElement);i&&(i.srcObject=e,t.setState({connectBusy:!1}))}).catch(function(e){t.setState({error:e.message,connectBusy:!1})})}},disconnectVideoSource:function(){this.stream&&(this.stream.getTracks().forEach(function(e){e.stop()}),this.stream=null)},render:function(){var e,t="visible";return"config"==this.props.mode&&(this.props.devicePermissionDummy?t="hidden":this.state.connectBusy?(e=n().createElement("div",{style:{textAlign:"center"}},"Connecting to video device"),t="hidden"):this.state.error&&("Permission denied"==this.state.error||(e=n().createElement("div",{style:{textAlign:"center"}},"Error while accessing media devices: ",this.state.error)),t="hidden")),n().createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},n().createElement("video",{autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",visibility:t,objectFit:this.props.objectFit},ref:"videoElement"}),n().createElement("div",{style:{position:"absolute",top:"0px",width:"100%"}},e))}});var d=i(17334),l=i.n(d),u=i(29921),p=i.n(u),h=i(9769);const m=n().createClass({displayName:"VideoPreviewRed5",getInitialState:function(){return this.red5WebrtcClientLibrary=null,this.subscriber=null,this.connectVideoSource=l()(this.connectVideoSourceDebounce,1e3),{red5PlayerError:null,connectionState:"none",videoElementID:Math.floor(4294967296*Math.random()).toString(16)}},shouldComponentUpdate:function(e,t){return!h.compareObject(e,this.props)||!h.compareObject(t,this.state)},componentWillMount:function(){},componentDidMount:function(){this.tryToConnect()},componentWillUnmount:function(){this.disconnectVideoSource()},componentWillReceiveProps:function(e){e.red5Host==this.props.red5Host&&e.red5Name==this.props.red5Name&&e.red5Port==this.props.red5Port&&e.red5App==this.props.red5App||this.connectVideoSource(e.red5Host,e.red5Name,e.red5Port,e.red5App)},componentDidUpdate:function(){if(this.refs.videoElement){var e=s().findDOMNode(this.refs.videoElement);e&&void 0!==this.props.muted&&(e.muted=this.props.muted)}},connectVideoSourceDebounce:function(e,t,i,o){if(this.red5WebrtcClientLibrary){var n=window.document.getElementById(this.state.videoElementID);if(n){this.setState({connectionState:"server",red5PlayerError:null}),this.disconnectVideoSource(),this.subscriber=new this.red5WebrtcClientLibrary.RTCSubscriber,this.subscriber.on("*",this.handleSubscriberEvent),i&&(i=Number(i)),e&&(e=e.trim()),o&&(o=o.trim()),t&&(t=t.trim());try{this.subscriber.init({protocol:"wss",port:i,host:e,app:o,streamName:t,rtcConfiguration:{iceServers:[{urls:"stun:stun2.l.google.com:19302"}],iceCandidatePoolSize:2,bundlePolicy:"max-bundle"},bandwidth:{audio:56,video:512},mediaElementId:this.state.videoElementID,subscriptionId:"mystream"+Math.floor(65536*Math.random()).toString(16),videoEncoding:"NONE",audioEncoding:"NONE",autoLayoutOrientation:!1}).then(function(e){return this.setState({connectionState:"track"}),e.subscribe()}.bind(this)).then(function(e){this.setState({connectionState:"none"}),n&&(n.muted=!0)}.bind(this)).catch(function(e){console.info("WebRTC connection error ",e),this.setState({red5PlayerError:e.type})}.bind(this))}catch(e){console.info("WebRTC connection library error ",e),this.setState({red5PlayerError:e.type})}}}else this.setState({cconnectionState:"none",red5PlayerError:"Cannot find red5prosdk"})},handleSubscriberEvent:function(e){switch(e._type){case"Subscribe.Connection.Closed":this.setState({connectionState:"closed"});break;case"Connect.Failure":this.setState({connectionState:"ConnectionError"});break;case"Subscribe.InvalidName":this.setState({connectionState:"InvalidName"});break;case"Subscribe.Volume.Change":var t=window.document.getElementById(this.state.videoElementID);t&&(t.muted=!0)}},disconnectVideoSource:function(){this.subscriber&&this.subscriber.unsubscribe().then(function(){this.subscriber.off("*",this.handleSubscriberEvent),this.subscriber=null}.bind(this))},tryToConnect:function(){this.setState({red5PlayerError:null,connectionState:"none"}),this.connectVideoSource(this.props.red5Host,this.props.red5Name,this.props.red5Port,this.props.red5App)},handleScriptError:function(){this.red5WebrtcClientLibrary=null},handleScriptLoad:function(){this.red5WebrtcClientLibrary=window.red5prosdk},render:function(){var e,t,i="hidden";return"config"==this.props.mode?this.state.red5PlayerError?e="Connect to WebRTC stream error: "+this.state.red5PlayerError:"server"==this.state.connectionState?e="Connecting to WebRTC Server":"track"==this.state.connectionState?e="Waiting for WebRTC Stream":"closed"==this.state.connectionState?(e="WebRTC connection has been closed",t=n().createElement("button",{className:"btn btn-secondary",style:{display:"block",margin:"15px auto"},onClick:this.tryToConnect},"Try to connect")):"ConnectionError"==this.state.connectionState?e="WebRTC connection could not be established":"InvalidName"==this.state.connectionState?(e="WebRTC channel name not found",t=n().createElement("button",{className:"btn btn-secondary",style:{display:"block",margin:"15px auto"},onClick:this.tryToConnect},"Try to connect")):i="visible":i="visible",e&&(e=n().createElement("div",{style:{textAlign:"center",color:"rgb(51, 51, 51)"}},e)),n().createElement("div",{className:"red5-preview-player",style:{width:"100%",height:"100%"}},n().createElement(p(),{url:"/libs/3rdparty/red5pro-sdk.min.js",onError:this.handleScriptError,onLoad:this.handleScriptLoad}),e,t,n().createElement("div",{style:{width:"100%",height:"100%",visibility:i}},n().createElement("video",{id:this.state.videoElementID,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:this.props.objectFit},ref:"videoElement"})))}});var v=i(57453),f=i(9769);const b=n().createClass({displayName:"VideoPreviewMain",getInitialState:function(){return{}},shouldComponentUpdate:function(e,t){return!f.compareObject(e,this.props)||!f.compareObject(t,this.state)},componentDidUpdate:function(){if(this.refs.videoElement){var e=s().findDOMNode(this.refs.videoElement);e&&void 0!==this.props.muted&&(e.muted=this.props.muted)}},render:function(){var e,t;switch(e="config"==this.props.mode?"contain":"fill",this.props.videoType){case"red5":t=n().createElement(m,{red5Host:this.props.red5Host,red5Name:this.props.red5Name,red5Port:this.props.red5Port,red5App:this.props.red5App,mode:this.props.mode,objectFit:e,muted:this.props.muted});break;case"videoclip":t=n().createElement("video",{loop:!0,autoPlay:!0,muted:!0,src:this.props.videoURL,style:{width:"100%",height:"100%",objectFit:e},ref:"videoElement"});break;case"picture":t=n().createElement(v.A,{src:this.props.pictureURL,fallbackImage:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",initialImage:"/images/loading-bubbles.svg",style:{width:"100%",height:"100%",objectFit:e}});break;case"device":t=n().createElement(c,{deviceVideo:this.props.deviceVideo,deviceAudio:this.props.deviceAudio,devicePermissionDummy:this.props.devicePermissionDummy,mode:this.props.mode,muted:this.props.muted,objectFit:e});break;default:return null}var i={width:"100%",height:"100%",position:"absolute"};return this.props.zIndex&&(i.zIndex=this.props.zIndex),n().createElement("div",{style:i},t)}})}}]);